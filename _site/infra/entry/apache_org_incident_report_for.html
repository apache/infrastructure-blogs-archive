<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>apache.org incident report for 05/29/2012 | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="apache.org incident report for 05/29/2012" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Last week, internal audit activity discovered that the access logs of some committer-only Apache services contained passwords but had been available to every Apache committer. The problem The httpd logs of several ASF services are aggregated and archived on minotaur.apache.org.&nbsp; Minotaur is also people.apache.org, the shell host for committers, and committers were encouraged to analyse the logs and produce aggregated data. However, for two services, the archived logs included forensic logs, which are extra-verbose logs that include all HTTP request headers.&nbsp; (The logs are never encrypted, even if the HTTP connection was wrapped by SSL encryption.)&nbsp; Both of these services --- http://s.apache.org and http://svn.apache.org --- allow anyone to use them in a read-only manner anonymously, and allow further operations (such as creating shortlinks) to LDAP-authenticated committers.&nbsp; Authentication is usually done by embedding the username and password, encoded in base64, in the &quot;Authorization:&quot; HTTP header, under SSL encryption. Base64 is a reversible transform.&nbsp; (It is an encoding, not a cipher.) Consequently, any Apache committer could learn the passwords of any other committer by reading the log files and reversing the base64 encoding. Shutting the barn door The logs archive directory was made readable by the root user only.&nbsp; Forensic logging was disabled, and past forensic logs deleted.&nbsp; ZFS snapshots containing those logs were destroyed, too. Finding the horse We know that several committers had on one occasion or another copied the logs in order to analyse them, so we operated on the assumption that copies of the sensitive forensic logs were circulating on hardware we do not control.&nbsp; We therefore opted to have all passwords changed, or reset. Several Apache committers whose passwords grant very high access were advised privately to change their passwords.&nbsp; The root@ team ensured the follow-through and, before announcing the vulnerability any further, changed the passwords of those whom had not done so themselves.&nbsp; The root@ team also changed the passwords of all non-human (role) accounts on those services. The vulnerability was then announced to all Apache committers with the same instructions: &#39;Your passwords may be compromised; change them &quot;now&quot;; we will explain the problem later.&#39;.&nbsp; This notice was authenticated via a PGP signature and via acknowledging it in a root-owned file on people.apache.org. Finally, passwords that have not been changed after forensic logs had been disabled --- and, therefore, were presumed to be contained in compromised forensic logs --- were changed by the root@ team to random strings. Implications Were some committer to have compromised another Apache account using this vulnerability prior to these steps being taken, note that root access to all apache.org hosts is only available using one-time-passwords (otp) for certain privileged sudo users.&nbsp; Such account holders have been instructed not to use the same password for otp as for LDAP, so this would not have resulted in an attacker gaining root privileges without our knowledge.&nbsp; All of our commit activity is peer-reviewed and logged to various commit lists, and no reports of unusual commit activity have been received during the time frame in which this exposure was effective.&nbsp; In fact no unusual activity has ever been reported regarding any of our LDAP-based services, so there is no reason for us to suspect malicious activity has occurred as a result of this vulnerability. Preventing recurrence No code changes were needed to the software that s.apache.org and svn.apache.org run; the software was behaving correctly according to its configuration, but the configuration itself --- and the in-house log archiving scripts --- were incorrect. A member of the infrastructure team will be approaching the Apache HTTPD PMC with a documentation patch for mod_log_forensic. Epilogue There were no malicious parties involved here (to our knowledge); we just made a configuration error.&nbsp; The nature of the error meant we had to assume all passwords were compromised, and that was costly to fix. We hope our disclosure has been as open as possible and true to the ASF spirit.&nbsp; Hopefully others can learn from our mistakes.&nbsp; See our prior incident reports from the Apache Infrastructure Team. Committers --- please address questions to root@apache.org only. Queries from the press should be sent to press@apache.org. Happy hacking!" />
<meta property="og:description" content="Last week, internal audit activity discovered that the access logs of some committer-only Apache services contained passwords but had been available to every Apache committer. The problem The httpd logs of several ASF services are aggregated and archived on minotaur.apache.org.&nbsp; Minotaur is also people.apache.org, the shell host for committers, and committers were encouraged to analyse the logs and produce aggregated data. However, for two services, the archived logs included forensic logs, which are extra-verbose logs that include all HTTP request headers.&nbsp; (The logs are never encrypted, even if the HTTP connection was wrapped by SSL encryption.)&nbsp; Both of these services --- http://s.apache.org and http://svn.apache.org --- allow anyone to use them in a read-only manner anonymously, and allow further operations (such as creating shortlinks) to LDAP-authenticated committers.&nbsp; Authentication is usually done by embedding the username and password, encoded in base64, in the &quot;Authorization:&quot; HTTP header, under SSL encryption. Base64 is a reversible transform.&nbsp; (It is an encoding, not a cipher.) Consequently, any Apache committer could learn the passwords of any other committer by reading the log files and reversing the base64 encoding. Shutting the barn door The logs archive directory was made readable by the root user only.&nbsp; Forensic logging was disabled, and past forensic logs deleted.&nbsp; ZFS snapshots containing those logs were destroyed, too. Finding the horse We know that several committers had on one occasion or another copied the logs in order to analyse them, so we operated on the assumption that copies of the sensitive forensic logs were circulating on hardware we do not control.&nbsp; We therefore opted to have all passwords changed, or reset. Several Apache committers whose passwords grant very high access were advised privately to change their passwords.&nbsp; The root@ team ensured the follow-through and, before announcing the vulnerability any further, changed the passwords of those whom had not done so themselves.&nbsp; The root@ team also changed the passwords of all non-human (role) accounts on those services. The vulnerability was then announced to all Apache committers with the same instructions: &#39;Your passwords may be compromised; change them &quot;now&quot;; we will explain the problem later.&#39;.&nbsp; This notice was authenticated via a PGP signature and via acknowledging it in a root-owned file on people.apache.org. Finally, passwords that have not been changed after forensic logs had been disabled --- and, therefore, were presumed to be contained in compromised forensic logs --- were changed by the root@ team to random strings. Implications Were some committer to have compromised another Apache account using this vulnerability prior to these steps being taken, note that root access to all apache.org hosts is only available using one-time-passwords (otp) for certain privileged sudo users.&nbsp; Such account holders have been instructed not to use the same password for otp as for LDAP, so this would not have resulted in an attacker gaining root privileges without our knowledge.&nbsp; All of our commit activity is peer-reviewed and logged to various commit lists, and no reports of unusual commit activity have been received during the time frame in which this exposure was effective.&nbsp; In fact no unusual activity has ever been reported regarding any of our LDAP-based services, so there is no reason for us to suspect malicious activity has occurred as a result of this vulnerability. Preventing recurrence No code changes were needed to the software that s.apache.org and svn.apache.org run; the software was behaving correctly according to its configuration, but the configuration itself --- and the in-house log archiving scripts --- were incorrect. A member of the infrastructure team will be approaching the Apache HTTPD PMC with a documentation patch for mod_log_forensic. Epilogue There were no malicious parties involved here (to our knowledge); we just made a configuration error.&nbsp; The nature of the error meant we had to assume all passwords were compromised, and that was costly to fix. We hope our disclosure has been as open as possible and true to the ASF spirit.&nbsp; Hopefully others can learn from our mistakes.&nbsp; See our prior incident reports from the Apache Infrastructure Team. Committers --- please address questions to root@apache.org only. Queries from the press should be sent to press@apache.org. Happy hacking!" />
<link rel="canonical" href="http://localhost:4000/infra/entry/apache_org_incident_report_for" />
<meta property="og:url" content="http://localhost:4000/infra/entry/apache_org_incident_report_for" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-05-29T16:59:09-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="apache.org incident report for 05/29/2012" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2012-05-29T16:59:09-04:00","datePublished":"2012-05-29T16:59:09-04:00","description":"Last week, internal audit activity discovered that the access logs of some committer-only Apache services contained passwords but had been available to every Apache committer. The problem The httpd logs of several ASF services are aggregated and archived on minotaur.apache.org.&nbsp; Minotaur is also people.apache.org, the shell host for committers, and committers were encouraged to analyse the logs and produce aggregated data. However, for two services, the archived logs included forensic logs, which are extra-verbose logs that include all HTTP request headers.&nbsp; (The logs are never encrypted, even if the HTTP connection was wrapped by SSL encryption.)&nbsp; Both of these services --- http://s.apache.org and http://svn.apache.org --- allow anyone to use them in a read-only manner anonymously, and allow further operations (such as creating shortlinks) to LDAP-authenticated committers.&nbsp; Authentication is usually done by embedding the username and password, encoded in base64, in the &quot;Authorization:&quot; HTTP header, under SSL encryption. Base64 is a reversible transform.&nbsp; (It is an encoding, not a cipher.) Consequently, any Apache committer could learn the passwords of any other committer by reading the log files and reversing the base64 encoding. Shutting the barn door The logs archive directory was made readable by the root user only.&nbsp; Forensic logging was disabled, and past forensic logs deleted.&nbsp; ZFS snapshots containing those logs were destroyed, too. Finding the horse We know that several committers had on one occasion or another copied the logs in order to analyse them, so we operated on the assumption that copies of the sensitive forensic logs were circulating on hardware we do not control.&nbsp; We therefore opted to have all passwords changed, or reset. Several Apache committers whose passwords grant very high access were advised privately to change their passwords.&nbsp; The root@ team ensured the follow-through and, before announcing the vulnerability any further, changed the passwords of those whom had not done so themselves.&nbsp; The root@ team also changed the passwords of all non-human (role) accounts on those services. The vulnerability was then announced to all Apache committers with the same instructions: &#39;Your passwords may be compromised; change them &quot;now&quot;; we will explain the problem later.&#39;.&nbsp; This notice was authenticated via a PGP signature and via acknowledging it in a root-owned file on people.apache.org. Finally, passwords that have not been changed after forensic logs had been disabled --- and, therefore, were presumed to be contained in compromised forensic logs --- were changed by the root@ team to random strings. Implications Were some committer to have compromised another Apache account using this vulnerability prior to these steps being taken, note that root access to all apache.org hosts is only available using one-time-passwords (otp) for certain privileged sudo users.&nbsp; Such account holders have been instructed not to use the same password for otp as for LDAP, so this would not have resulted in an attacker gaining root privileges without our knowledge.&nbsp; All of our commit activity is peer-reviewed and logged to various commit lists, and no reports of unusual commit activity have been received during the time frame in which this exposure was effective.&nbsp; In fact no unusual activity has ever been reported regarding any of our LDAP-based services, so there is no reason for us to suspect malicious activity has occurred as a result of this vulnerability. Preventing recurrence No code changes were needed to the software that s.apache.org and svn.apache.org run; the software was behaving correctly according to its configuration, but the configuration itself --- and the in-house log archiving scripts --- were incorrect. A member of the infrastructure team will be approaching the Apache HTTPD PMC with a documentation patch for mod_log_forensic. Epilogue There were no malicious parties involved here (to our knowledge); we just made a configuration error.&nbsp; The nature of the error meant we had to assume all passwords were compromised, and that was costly to fix. We hope our disclosure has been as open as possible and true to the ASF spirit.&nbsp; Hopefully others can learn from our mistakes.&nbsp; See our prior incident reports from the Apache Infrastructure Team. Committers --- please address questions to root@apache.org only. Queries from the press should be sent to press@apache.org. Happy hacking!","headline":"apache.org incident report for 05/29/2012","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/infra/entry/apache_org_incident_report_for"},"url":"http://localhost:4000/infra/entry/apache_org_incident_report_for"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">apache.org incident report for 05/29/2012</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2012-05-29T16:59:09-04:00" itemprop="datePublished">May 29, 2012
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Joe", "login"=>"joes", "email"=>"joes@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Last week, internal audit activity discovered that the access logs of some committer-only Apache services contained passwords but had been available to every Apache committer.</p>
<h3> </h3>
<h3>The problem</h3>
<p>The httpd logs of several ASF services are aggregated and archived on minotaur.apache.org.&nbsp; Minotaur is also people.apache.org, the shell host for committers, and committers were encouraged to analyse the logs and <a href="http://mail-archives.apache.org/mod_mbox/subversion-dev/201205.mbox/%3CCABD8fLV30-YaFaYt21GuCJX+_xqqPCB+S+XpW_G1aydyTrgkug@mail.gmail.com%3E">produce aggregated data</a>.</p>
<p>However, for two services, the archived logs included <a href="http://httpd.apache.org/docs/current/mod/mod_log_forensic.html">forensic logs</a>, which are extra-verbose logs that include all HTTP request headers.&nbsp; (The logs are never encrypted, even if the HTTP connection was wrapped by SSL encryption.)&nbsp; Both of these services --- <a href="http://s.apache.org/">http://s.apache.org</a> and <a href="http://svn.apache.org/">http://svn.apache.org</a> --- allow anyone to use them in a read-only manner anonymously, and allow further operations (such as creating shortlinks) to LDAP-authenticated committers.&nbsp; Authentication is usually done by embedding the username and password, encoded in base64, in the "Authorization:" HTTP header, under SSL encryption.</p>
<p>Base64 is a reversible transform.&nbsp; (It is an encoding, not a cipher.)</p>
<p>Consequently, any Apache committer could learn the passwords of any other committer by reading the log files and reversing the base64 encoding.</p>
<h3>Shutting the barn door</h3>
<p>The logs archive directory was made readable by the root user only.&nbsp; Forensic logging was disabled, and past forensic logs deleted.&nbsp; ZFS snapshots containing those logs were destroyed, too.</p>
<h3>Finding the horse<br /></h3>
<p>We know that several committers had on one occasion or another copied the logs in order to analyse them, so we operated on the assumption that copies of the sensitive forensic logs were circulating on hardware we do not control.&nbsp; We therefore opted to have all passwords changed, or reset.</p>
<p>Several Apache committers whose passwords grant very high access were advised privately to change their passwords.&nbsp; The root@ team ensured the follow-through and, before announcing the vulnerability any further, changed the passwords of those whom had not done so themselves.&nbsp; The root@ team also changed the passwords of all non-human (role) accounts on those services.</p>
<p>The vulnerability was then announced to all Apache committers with the same instructions: 'Your passwords may be compromised; change them "now"; we will explain the problem later.'.&nbsp; This notice was authenticated via a PGP signature and via acknowledging it in a root-owned file on people.apache.org.</p>
<p>Finally, passwords that have not been changed after forensic logs had been disabled --- and, therefore, were presumed to be contained in compromised forensic logs --- were changed by the root@ team to random strings.</p>
<h3>Implications<br /></h3>
<p>Were some committer to have compromised another Apache account using this vulnerability prior to these steps being taken, note that root access to all apache.org hosts is only available using one-time-passwords (otp) for certain privileged sudo users.&nbsp; Such account holders have been instructed not to use the same password for otp as for LDAP, so this would not have resulted in an attacker gaining root privileges without our knowledge.&nbsp; All of our commit activity is peer-reviewed and logged to various commit lists, and no reports of unusual commit activity have been received during the time frame in which this exposure was effective.&nbsp; In fact no unusual activity has ever been reported regarding any of our LDAP-based services, so there is no reason for us to suspect malicious activity has occurred as a result of this vulnerability.</p>
<h3>Preventing recurrence</h3>
<p>No code changes were needed to the software that s.apache.org and<br />
svn.apache.org run; the software was behaving correctly according to<br />
its configuration, but the configuration itself --- and the in-house<br />
log archiving scripts --- were incorrect.</p>
<p>A member of the infrastructure team will be approaching the Apache HTTPD PMC with a documentation patch for mod_log_forensic.</p>
<h3>Epilogue</h3>
<p>There were no malicious parties involved here (to our knowledge); we just made a configuration error.&nbsp; The nature of the error meant we had to assume all passwords were compromised, and that was costly to fix.</p>
<p>We hope our disclosure has been as open as possible and true to the ASF spirit.&nbsp; Hopefully others can learn from our mistakes.&nbsp; See our <a href="http://www.apache.org/info/20010519-hack.html">prior</a> <a href="https://blogs.apache.org/infra/entry/apache_org_downtime_report">incident</a> <a href="https://blogs.apache.org/infra/entry/apache_org_04_09_2010">reports</a> from the Apache Infrastructure Team.</p>
<p>Committers --- please address questions to root@apache.org only.</p>
<p>Queries from the press should be sent to press@apache.org.</p>
<p>Happy hacking!</p>

  </div><a class="u-url" href="/infra/entry/apache_org_incident_report_for" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
