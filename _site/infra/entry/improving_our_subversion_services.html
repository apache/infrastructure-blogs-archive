<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Improving our Subversion Services | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Improving our Subversion Services" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This week the ASF Infrastructure Team deployed one of the first major changes to how svn.apache.org works since it was launched, 6 years ago. We now distribute Subversion traffic to our servers based on the geographic region of a client. We are using pgeodns, the same software that powers CPAN Search and the NTP Pool.&nbsp; With pgeodns we can give out different DNS entries to clients, depending on where they are connecting from.&nbsp; It isn&#39;t an exact science, but for most clients it is good enough to find the closer Subversion Server. If you are connecting from Europe, your client will connect to Harmonia.&nbsp; Harmonia is a Sun x4150 running FreeBSD 7.0, using ZFS raid2z over&nbsp; 6 disks, hosted in Amsterdam at SURFnet. Users in North America are directed to Eris, our traditional Subversion Master Server.&nbsp; Eris is a Dell 2950 also running FreeBSD 7.0, using ZFS raid2z over 4 disks, hosted in Corvallis, Oregon at OSUOSL. Using svnsync as described in Norman&#39;s ApacheCon EU 2009 Talk, we replicate all commits to the master to the slave in real time.&nbsp; If a commit is made to the slave, we proxy the commit to the master. Read operations are handled on the nearest mirror, and are much faster for everything from the initial checking out to running an update due to the decreased latency. While this change should improve the experience significantly, we have some other changes coming up soon for svn.apache.org: Upgrade to Subversion 1.6: Representation Sharing, inode packing, and memcached support should help make our SVN servers even faster. Upgrade both Eris and Harmonia to FreeBSD 7.2-STABLE: The ZFS filesystem is experimental in FreeBSD 7, and there are many stability and performance enhancements available in newer versions. Adding more Geographic Mirrors: Once we are comfortable with the current setup, we would like to expand to another mirror location, hopefully in Australia or Asia.&nbsp;" />
<meta property="og:description" content="This week the ASF Infrastructure Team deployed one of the first major changes to how svn.apache.org works since it was launched, 6 years ago. We now distribute Subversion traffic to our servers based on the geographic region of a client. We are using pgeodns, the same software that powers CPAN Search and the NTP Pool.&nbsp; With pgeodns we can give out different DNS entries to clients, depending on where they are connecting from.&nbsp; It isn&#39;t an exact science, but for most clients it is good enough to find the closer Subversion Server. If you are connecting from Europe, your client will connect to Harmonia.&nbsp; Harmonia is a Sun x4150 running FreeBSD 7.0, using ZFS raid2z over&nbsp; 6 disks, hosted in Amsterdam at SURFnet. Users in North America are directed to Eris, our traditional Subversion Master Server.&nbsp; Eris is a Dell 2950 also running FreeBSD 7.0, using ZFS raid2z over 4 disks, hosted in Corvallis, Oregon at OSUOSL. Using svnsync as described in Norman&#39;s ApacheCon EU 2009 Talk, we replicate all commits to the master to the slave in real time.&nbsp; If a commit is made to the slave, we proxy the commit to the master. Read operations are handled on the nearest mirror, and are much faster for everything from the initial checking out to running an update due to the decreased latency. While this change should improve the experience significantly, we have some other changes coming up soon for svn.apache.org: Upgrade to Subversion 1.6: Representation Sharing, inode packing, and memcached support should help make our SVN servers even faster. Upgrade both Eris and Harmonia to FreeBSD 7.2-STABLE: The ZFS filesystem is experimental in FreeBSD 7, and there are many stability and performance enhancements available in newer versions. Adding more Geographic Mirrors: Once we are comfortable with the current setup, we would like to expand to another mirror location, hopefully in Australia or Asia.&nbsp;" />
<link rel="canonical" href="http://localhost:4000/infra/entry/improving_our_subversion_services" />
<meta property="og:url" content="http://localhost:4000/infra/entry/improving_our_subversion_services" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2009-04-02T21:03:39-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Improving our Subversion Services" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2009-04-02T21:03:39-04:00","datePublished":"2009-04-02T21:03:39-04:00","description":"This week the ASF Infrastructure Team deployed one of the first major changes to how svn.apache.org works since it was launched, 6 years ago. We now distribute Subversion traffic to our servers based on the geographic region of a client. We are using pgeodns, the same software that powers CPAN Search and the NTP Pool.&nbsp; With pgeodns we can give out different DNS entries to clients, depending on where they are connecting from.&nbsp; It isn&#39;t an exact science, but for most clients it is good enough to find the closer Subversion Server. If you are connecting from Europe, your client will connect to Harmonia.&nbsp; Harmonia is a Sun x4150 running FreeBSD 7.0, using ZFS raid2z over&nbsp; 6 disks, hosted in Amsterdam at SURFnet. Users in North America are directed to Eris, our traditional Subversion Master Server.&nbsp; Eris is a Dell 2950 also running FreeBSD 7.0, using ZFS raid2z over 4 disks, hosted in Corvallis, Oregon at OSUOSL. Using svnsync as described in Norman&#39;s ApacheCon EU 2009 Talk, we replicate all commits to the master to the slave in real time.&nbsp; If a commit is made to the slave, we proxy the commit to the master. Read operations are handled on the nearest mirror, and are much faster for everything from the initial checking out to running an update due to the decreased latency. While this change should improve the experience significantly, we have some other changes coming up soon for svn.apache.org: Upgrade to Subversion 1.6: Representation Sharing, inode packing, and memcached support should help make our SVN servers even faster. Upgrade both Eris and Harmonia to FreeBSD 7.2-STABLE: The ZFS filesystem is experimental in FreeBSD 7, and there are many stability and performance enhancements available in newer versions. Adding more Geographic Mirrors: Once we are comfortable with the current setup, we would like to expand to another mirror location, hopefully in Australia or Asia.&nbsp;","headline":"Improving our Subversion Services","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/infra/entry/improving_our_subversion_services"},"url":"http://localhost:4000/infra/entry/improving_our_subversion_services"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Improving our Subversion Services</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2009-04-02T21:03:39-04:00" itemprop="datePublished">Apr 2, 2009
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Paul Querna", "login"=>"pquerna", "email"=>"pquerna@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>This week the ASF Infrastructure Team deployed one of the first major changes to how <a href="http://svn.apache.org/">svn.apache.org</a> works since it was launched, <a href="http://svn.apache.org/viewvc?view=rev&amp;revision=1">6 years ago</a>.</p>
<p><a href="http://geo.bitnames.com/"></a>We now distribute Subversion traffic to our servers based on the geographic region of a client.</p>
<p>We are using <a href="http://geo.bitnames.com/">pgeodns</a>, the same software that powers <a href="http://search.cpan.org/">CPAN</a><a href="http://search.cpan.org/"> Search</a> and the <a href="http://www.pool.ntp.org/">NTP Pool</a>.&nbsp; With pgeodns we can give out different DNS entries to clients, depending on where they are connecting from.&nbsp; It isn't an exact science, but for most clients it is good enough to find the closer Subversion Server.</p>
<p>If you are connecting from Europe, your client will connect to Harmonia.&nbsp; <a href="http://www.apache.org/dev/machines.html#harmonia">Harmonia</a> is a Sun x4150 running FreeBSD 7.0, using ZFS raid2z over&nbsp; 6 disks, hosted in Amsterdam at <a href="http://www.surfnet.nl/en/">SURFnet</a>.</p>
<p>Users in North America are directed to Eris, our traditional Subversion Master Server.&nbsp; <a href="http://www.apache.org/dev/machines.html#eris">Eris</a> is a Dell 2950 also running FreeBSD 7.0, using ZFS raid2z over 4 disks, hosted in Corvallis, Oregon at <a href="http://osuosl.org">OSUOSL</a>.</p>
<p>Using <a href="http://svnbook.red-bean.com/nightly/en/svn.ref.svnsync.html">svnsync</a> as described in <a href="https://blogs.apache.org/infra/entry/subversion_on_the_fly_replication">Norman's ApacheCon EU 2009 Talk</a>, we replicate all commits to the master to the slave in real time.&nbsp; If a commit is made to the slave, we proxy the commit to the master.</p>
<p>Read operations are handled on the nearest mirror, and are much faster for everything from the initial checking out to running an update due to the decreased latency.</p>
<p>While this change should improve the experience significantly, we have some other changes coming up soon for svn.apache.org:</p>
<ul>
<li>Upgrade to <a href="http://subversion.tigris.org/svn_1.6_releasenotes.html">Subversion 1.6</a>: Representation Sharing, inode packing, and memcached support should help make our SVN servers even faster.</li>
<li>Upgrade both Eris and Harmonia to FreeBSD 7.2-STABLE: The ZFS filesystem is experimental in FreeBSD 7, and there are many stability and performance enhancements available in newer versions.</li>
<li>Adding more Geographic Mirrors: Once we are comfortable with the current setup, we would like to expand to another mirror location, hopefully in Australia or Asia.&nbsp;</li>
</ul>
<p></p>

  </div><a class="u-url" href="/infra/entry/improving_our_subversion_services" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
