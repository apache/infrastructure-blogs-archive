<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Groovy List Processing Cheat Sheet | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Groovy List Processing Cheat Sheet" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Declaring lists Several styles are supported for declaring lists: var pets = [&#39;cat&#39;, &#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;, &#39;gerbil&#39;] // idiomatic Groovyvar nums = [1, 2, 3, 4] as LinkedList // use &#39;as&#39; for other kinds of listvar primes = List.of(2, 3, 5, 7) // Java 9+ style (immutable)var range = 1..4 // a range is also a list (immutable)var bigNums = [1000, 2000].asUnmodifiable() // unmodifiable (backed by original)var negNums = [-100, -200].asImmutable() // immutable (backed by copy) List elements and properties Java methods for accessing list elements and list properties: assert !pets.isEmpty()assert pets.size() == 5assert pets.get(0) == &#39;cat&#39;assert pets.contains(&#39;dog&#39;)assert pets.containsAll(&#39;cat&#39;, &#39;dog&#39;)pets.forEach { assert it.size() &gt; 2 }assert [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;].indexOf(&#39;a&#39;) == 0assert [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;].lastIndexOf(&#39;a&#39;) == 2 Groovy extensions for accessing list elements and list properties: assert pets[0] == &#39;cat&#39;assert pets?[0] == &#39;cat&#39; // safe indexing returns null if pets was null instead of NPEassert pets.first() == &#39;cat&#39;assert pets.head() == &#39;cat&#39;assert pets[-1] == &#39;gerbil&#39;assert pets[1..3] == [&#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;]assert pets[3..1] == [&#39;fish&#39;, &#39;dog&#39;, &#39;canary&#39;] // reverse rangeassert pets[1, 3, 3] == [&#39;canary&#39;, &#39;fish&#39;, &#39;fish&#39;] // arbitrary collectionassert pets[0..1, [3, 3]] == [&#39;cat&#39;, &#39;canary&#39;, &#39;fish&#39;, &#39;fish&#39;] // nested collectionsassert [1, 2, 3, 1].count(1) == 2assert [1, 2, 3, 4].min() == 1assert [1, 2, 3, 4].max() == 4assert [1, 2, 3, 4].sum() == 10assert [1, 2, 3, 4].average() == 2.5[1, 2, 3, 4].eachWithIndex{ val, idx -&gt; assert val == idx + 1 }def cpets = pets[0..1]assert cpets == [&#39;cat&#39;, &#39;canary&#39;]assert pets.findAll { it =~ /c.*/ } == cpetsassert pets.find { it =~ /c.*/ } == cpets[0]assert pets.grep(~/c.*/) == cpetsassert cpets.min { it.size() } == &#39;cat&#39; // cpet with smallest size nameassert cpets.max { it.size() } == &#39;canary&#39; // cpet with largest nameassert pets.groupBy { it.size() } == [3: [&#39;cat&#39;, &#39;dog&#39;], 4: [&#39;fish&#39;], 6: [&#39;canary&#39;, &#39;gerbil&#39;]]assert pets.countBy { it.size() } == [3: 2, 4: 1, 6: 2]assert pets.sum{ it.size() } == 22 // total size of all pet namesassert pets.average{ it.size() } == 4.4 // average size of pet namesassert pets.indices == 0..4assert pets.findIndexValues { it.size() == 6 } == [1, 4]assert cpets.indexed() == [0: &#39;cat&#39;, 1: &#39;canary&#39;]assert cpets.withIndex()*.toList() == [[&#39;cat&#39;, 0], [&#39;canary&#39;, 1]] Modifying mutable lists Methods from Java for modifying lists: pets.remove(2); assert pets == [&#39;cat&#39;, &#39;canary&#39;, &#39;fish&#39;, &#39;gerbil&#39;] // remove by indexpets.remove(&#39;fish&#39;); assert pets == [&#39;cat&#39;, &#39;canary&#39;, &#39;gerbil&#39;] // remove by elementpets.removeIf(p -&gt; p.startsWith(&quot;c&quot;)); assert pets == [&#39;gerbil&#39;] // remove by conditionpets.clear(); assert pets.isEmpty() // make emptypets.add(&quot;kangaroo&quot;); assert pets == [&#39;kangaroo&#39;] // add elementpets.add(0, &quot;koala&quot;); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;] // add element at index positionpets.addAll([&#39;ant&#39;, &#39;bee&#39;]); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;, &#39;ant&#39;, &#39;bee&#39;] // add collectionpets.addAll(1, [&#39;ant&#39;]); assert pets == [&#39;koala&#39;, &#39;ant&#39;, &#39;kangaroo&#39;, &#39;ant&#39;, &#39;bee&#39;] // add collection at indexpets.removeAll([&#39;ant&#39;, &#39;flea&#39;]); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;, &#39;bee&#39;] // remove from collectionpets.retainAll([&#39;bee&#39;, &#39;koala&#39;]); assert pets == [&#39;koala&#39;, &#39;bee&#39;] // retain from collectionpets.set(0, &quot;zebra&quot;); assert pets == [&#39;zebra&#39;, &#39;bee&#39;] // set element at indexpets.replaceAll(String::toUpperCase); assert pets == [&#39;ZEBRA&#39;, &#39;BEE&#39;] // replace elements by unary operatorpets.sort(Comparator.naturalOrder()); assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;] // sort Groovy extensions for modifying lists: pets &lt;&lt; &#39;rock&#39;; assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;] // leftShift appendpets += [&#39;rabbit&#39;, &#39;rock&#39;, &#39;hare&#39;]; assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;, &#39;rabbit&#39;, &#39;rock&#39;, &#39;hare&#39;] // append collectionpets.unique(); assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;, &#39;rabbit&#39;, &#39;hare&#39;] // remove duplicatespets.sort{ it.size() }; assert pets == [&#39;BEE&#39;, &#39;rock&#39;, &#39;hare&#39;, &#39;ZEBRA&#39;, &#39;rabbit&#39;] // sort by sizepets[0] = &#39;ant&#39;; assert pets == [&#39;ant&#39;, &#39;rock&#39;, &#39;hare&#39;, &#39;ZEBRA&#39;, &#39;rabbit&#39;] // replace element by indexpets[1..3] = [&#39;snake&#39;, &#39;SNAKE&#39;]; assert pets == [&#39;ant&#39;, &#39;snake&#39;, &#39;SNAKE&#39;, &#39;rabbit&#39;] // replace range of elementspets.unique{it.toLowerCase() }; assert pets == [&#39;ant&#39;, &#39;snake&#39;, &#39;rabbit&#39;] // remove duplicates ignoring casepets.reverse(true); assert pets == [&#39;rabbit&#39;, &#39;snake&#39;, &#39;ant&#39;] // flippets.shuffle(); assert pets.size() == 3; // shuffle elements; resulting order will varydef dice = [1, 2, 3, 4, 5, 6]dice.removeAt(2); assert dice == [1, 2, 4, 5, 6]dice.removeElement(2); assert dice == [1, 4, 5, 6]dice.removeLast(); assert dice == [1, 4, 5]dice.swap(0, 2); assert dice == [5, 4, 1] Additional list functionality Methods and operators which return new lists or values: assert [1, 2, 3] + [1] == [1, 2, 3, 1]assert [1, 2, 3, 1] - [1] == [2, 3]assert [1, 2, 3] * 2 == [1, 2, 3, 1, 2, 3]assert [1, [2, 3]].flatten() == [1, 2, 3]assert [1, 2, 3].disjoint([4, 5, 6])assert [1, 2, 3].intersect([4, 3, 1]) == [1, 3]assert [1, 2, 3].collect { it + 3 } == [4, 5, 6]assert [1, 2, 3, 4].collect { 1 } == [1, 1, 1, 1]assert [4, 2, 1, 3].findAll { it % 2 == 0 } == [4, 2]assert [1, 2, 3, 4].take(3) == [1, 2, 3]assert [1, 2, 3, 4].takeRight(3) == [2, 3, 4]assert [1, 2, 3, 4].takeWhile{ it &lt; 3 } == [1, 2]assert [1, 2, 3, 4].drop(2) == [3, 4]assert [1, 2, 3, 4].dropRight(2) == [1, 2]assert [1, 2, 3, 4].dropWhile{it &lt; 3 } == [3, 4]assert [1, 2, 3, 4].join(&#39;-&#39;) == &#39;1-2-3-4&#39;assert [1, 2, 3, 4].tail() == [2, 3, 4]assert [1, 2, 3, 4].init() == [1, 2, 3]assert [1, 2, 3, 4].tails() == [[1, 2, 3, 4], [2, 3, 4], [3, 4], [4], []]assert [1, 2, 3, 4].inits() == [[1, 2, 3, 4], [1, 2, 3], [1, 2], [1], []]assert [1, 2, 3, 4].reverse() == [4, 3, 2, 1]assert [1, 2, 3, 1].toUnique() == [1, 2, 3]assert [1, 2, 3, 1].toSorted() == [1, 1, 2, 3]assert [1, 2, 3, 4].collect { it * 2 } == [2, 4, 6, 8]assert [[1, 2], [3, 4]].collectNested { it * 2 } == [[2, 4], [6, 8]]def squaresAndCubesOfEvens = { it % 2 ? [] : [it**2, it**3] }assert [1, 2, 3, 4].collectMany(squaresAndCubesOfEvens) == [4, 8, 16, 64]assert [1, 2, 3, 4].any { it &gt; 3 }assert [1, 2, 3, 4].every { it &lt; 5 }assert ![1, 2, 3, 4].every { it &gt; 3 }assert [1, 2, 3, 4].find { it &gt; 2 } == 3assert [1, 2, 3, 4].findAll { it &gt; 2 } == [3, 4]assert [1, 2, 3, 4].findIndexOf { it &gt; 2 } == 2assert [1, 2, 3, 1].findLastIndexOf { it &gt; 2 } == 2assert [1, 2, 3, 4].inject { acc, i -&gt; acc + i } == 10assert (1..10).collate(3) == [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]assert (1..10).chop(1, 3, 2, -1) == [[1], [2, 3, 4], [5, 6], [7, 8, 9, 10]]assert [1,2,3].permutations().toList() == [ [1, 2, 3], [3, 2, 1], [2, 1, 3], [3, 1, 2], [1, 3, 2], [2, 3, 1]]def matrix = [[&#39;a&#39;, &#39;b&#39;], [ 1 , 2 ]]assert matrix.transpose() == [ [&#39;a&#39;, 1], [&#39;b&#39;, 2] ]assert matrix.combinations() == [ [&#39;a&#39;, 1], [&#39;b&#39;, 1], [&#39;a&#39;, 2], [&#39;b&#39;, 2] ]assert [1, 2, 3].subsequences()*.toList() == [[1], [1, 2, 3], [2], [2, 3], [1, 2], [3], [1, 3]]def answers = [1, 2, 3].withDefault{ 42 }assert answers[2] == 3 &amp;&amp; answers[99] == 42 GINQ processing Groovy also supports language integrated query support to process lists: // squares of odd numbers between 1 and 5assert [1, 9, 25] == GQL { from n in 1..5 where n % 2 != 0 select n ** 2}// group pets by name sizeassert [&quot;3:[cat, dog]&quot;, &quot;4:[fish]&quot;, &quot;6:[canary, gerbil]&quot;] == GQL { from p in pets groupby p.size() as size select size, agg(p) as names}*.with{ &quot;$it.size:$it.names&quot; } Stream methods Useful stream methods (it is worthwhile comparing some of the examples to earlier non-stream variants): pets = [&#39;cat&#39;, &#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;, &#39;gerbil&#39;]assert pets.stream().filter(p -&gt; p.size() == 3).map(String::toUpperCase).toList() == [&#39;CAT&#39;, &#39;DOG&#39;]assert pets.stream().map(p -&gt; p.size()).distinct().sorted().toList() == [3, 4, 6] // ordered pet name sizesassert nums.stream().reduce{ a, b -&gt; a + b }.get() == 10assert (1..10).stream().skip(3).limit(5).filter(i -&gt; i % 2 == 0).map(i -&gt; i ** 2).toList() == [16, 36, 64]assert [1, 2, 3, 4].stream().flatMap(i -&gt; i % 2 ? Stream.empty() : Stream.of(i**2, i**3)).toList() == [4, 8, 16, 64]assert pets.stream().collect(Collectors.groupingBy(p -&gt; p.size())) == [3:[&#39;cat&#39;, &#39;dog&#39;], 4:[&#39;fish&#39;], 6:[&#39;canary&#39;, &#39;gerbil&#39;]]assert [1, 2, 3, 4].stream().map(Integer::toString).collect(Collectors.joining(&#39;-&#39;)) == &#39;1-2-3-4&#39;Arrays.stream(0..9 as int[]).summaryStatistics().with { assert sum == 45 &amp;&amp; min == 0 &amp;&amp; max == 9 &amp;&amp; average == 4.5 &amp;&amp; count == 10}assert pets.stream().allMatch(w -&gt; w ==~ /.*[aeiou].*/) // all pet names contain a vowel GPars Before looking at GPars, it is worth looking at parallel stream processing: // calculate squares of odd numbers from input listassert (1..5).parallelStream().filter{ it % 2 != 0 }.map(n -&gt; n ** 2).toList() == [1, 9, 25] GPars was designed to provide similar functionality long before streams processing was available. It still has some useful features. Groovy has several tricks for removing the outer &quot;withPool&quot; clauses but we&#39;ll do the longhand here. Two GPars variations of above streams example: GParsPool.withPool { assert (1..5).findAllParallel{ it % 2 }.collectParallel{ it ** 2 } == [1, 9, 25] assert (1..5).parallel.filter{ it % 2 }.map{ it ** 2 }.collection == [1, 9, 25]} Or using (JEP 425) virtual threads: GParsExecutorsPool.withExistingPool(Executors.newVirtualThreadPerTaskExecutor()) { assert (1..5).findAllParallel{ it % 2 }.collectParallel{ it ** 2 } == [1, 9, 25]} Other libraries There are numerous list-related libraries on the JVM. We&#39;ll look at just a few. Eclipse collections Eclipse collections comes with many container types including immutable collections, primitive collections, bimaps, multimaps and bags as well as numerous utility methods. It focuses on reduced memory footprint and efficient containers. It might be particularly of interest if you need primitive collections, immutable collections or some more exotic collection types like bag or bidirectional maps. Here are just a few examples: var certainties = Lists.immutable.of(&#39;death&#39;, &#39;taxes&#39;)assert certainties.reduce{ a, b -&gt; &quot;$a &amp; $b&quot; }.get() == &#39;death &amp; taxes&#39;var numBag = Bags.immutable.with(&#39;One&#39;, &#39;One&#39;, &#39;Two&#39;, &#39;Three&#39;)assert numBag.toMapOfItemToCount() == [One:2, Two:1, Three:1]var biMap = BiMaps.immutable.with(6, &quot;six&quot;, 2, &quot;two&quot;)assert biMap.inverse().six == 6 Guava Guava provides a number of extensions to the JDK collections ecosystem. In particular, it has immutable collections, new collection types like multisets and bidirectional maps and various powerful extensions and utilities. Here are a few examples: var set = TreeMultiset.create([1, 2, 3])assert set == TreeMultiset.create([3, 2, 1])set.addAll([1, 3, 5])assert set.size() == 6 &amp;&amp; set.elementSet().size() == 4assert set.toList() == [1, 1, 2, 3, 3, 5]var bimap = HashBiMap.create()bimap.five = 5assert bimap.inverse()[5] == &#39;five&#39; Apache Commons Collections The Apache Commons Collections library extends upon the JDK collections framework adding some new types like bidirectional maps and bags as well as providing many comparator and iterator implementations. The library was designed to fill gaps in the JDK offerings and while some of those gaps in the JDK have now been filled by the JDK itself, Commons Collections still contains much useful functionality. Here are a few examples: var six = [six: 6] as TreeBidiMapassert six.inverseBidiMap() == [6: &#39;six&#39;]var bag = new HashBag([&#39;one&#39;] * 6)bag.remove(&#39;one&#39;, 2)assert bag.getCount(&#39;one&#39;) == 4 Further Information GPars (website) Eclipse Collections (website and github site) Guava (user guide) Apache Commons Collections (website) Groovy in Action (Appendix D has cheat sheets for Lists, GStrings, Closures, Regular expressions and GPath expressions) Groovy Goodness: Getting the Tail of a List Groovy Goodness: Take and Drop Items from a List Groovy Goodness: Take Or Drop Last Items From a Collection Groovy Goodness: Safe Index Based Access For Lists, Arrays and Maps Groovy Goodness: Pop And Push Items In a List Lists in Groovy Conclusion We have looked at the more common methods for list processing with Groovy and a few other useful libraries." />
<meta property="og:description" content="Declaring lists Several styles are supported for declaring lists: var pets = [&#39;cat&#39;, &#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;, &#39;gerbil&#39;] // idiomatic Groovyvar nums = [1, 2, 3, 4] as LinkedList // use &#39;as&#39; for other kinds of listvar primes = List.of(2, 3, 5, 7) // Java 9+ style (immutable)var range = 1..4 // a range is also a list (immutable)var bigNums = [1000, 2000].asUnmodifiable() // unmodifiable (backed by original)var negNums = [-100, -200].asImmutable() // immutable (backed by copy) List elements and properties Java methods for accessing list elements and list properties: assert !pets.isEmpty()assert pets.size() == 5assert pets.get(0) == &#39;cat&#39;assert pets.contains(&#39;dog&#39;)assert pets.containsAll(&#39;cat&#39;, &#39;dog&#39;)pets.forEach { assert it.size() &gt; 2 }assert [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;].indexOf(&#39;a&#39;) == 0assert [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;].lastIndexOf(&#39;a&#39;) == 2 Groovy extensions for accessing list elements and list properties: assert pets[0] == &#39;cat&#39;assert pets?[0] == &#39;cat&#39; // safe indexing returns null if pets was null instead of NPEassert pets.first() == &#39;cat&#39;assert pets.head() == &#39;cat&#39;assert pets[-1] == &#39;gerbil&#39;assert pets[1..3] == [&#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;]assert pets[3..1] == [&#39;fish&#39;, &#39;dog&#39;, &#39;canary&#39;] // reverse rangeassert pets[1, 3, 3] == [&#39;canary&#39;, &#39;fish&#39;, &#39;fish&#39;] // arbitrary collectionassert pets[0..1, [3, 3]] == [&#39;cat&#39;, &#39;canary&#39;, &#39;fish&#39;, &#39;fish&#39;] // nested collectionsassert [1, 2, 3, 1].count(1) == 2assert [1, 2, 3, 4].min() == 1assert [1, 2, 3, 4].max() == 4assert [1, 2, 3, 4].sum() == 10assert [1, 2, 3, 4].average() == 2.5[1, 2, 3, 4].eachWithIndex{ val, idx -&gt; assert val == idx + 1 }def cpets = pets[0..1]assert cpets == [&#39;cat&#39;, &#39;canary&#39;]assert pets.findAll { it =~ /c.*/ } == cpetsassert pets.find { it =~ /c.*/ } == cpets[0]assert pets.grep(~/c.*/) == cpetsassert cpets.min { it.size() } == &#39;cat&#39; // cpet with smallest size nameassert cpets.max { it.size() } == &#39;canary&#39; // cpet with largest nameassert pets.groupBy { it.size() } == [3: [&#39;cat&#39;, &#39;dog&#39;], 4: [&#39;fish&#39;], 6: [&#39;canary&#39;, &#39;gerbil&#39;]]assert pets.countBy { it.size() } == [3: 2, 4: 1, 6: 2]assert pets.sum{ it.size() } == 22 // total size of all pet namesassert pets.average{ it.size() } == 4.4 // average size of pet namesassert pets.indices == 0..4assert pets.findIndexValues { it.size() == 6 } == [1, 4]assert cpets.indexed() == [0: &#39;cat&#39;, 1: &#39;canary&#39;]assert cpets.withIndex()*.toList() == [[&#39;cat&#39;, 0], [&#39;canary&#39;, 1]] Modifying mutable lists Methods from Java for modifying lists: pets.remove(2); assert pets == [&#39;cat&#39;, &#39;canary&#39;, &#39;fish&#39;, &#39;gerbil&#39;] // remove by indexpets.remove(&#39;fish&#39;); assert pets == [&#39;cat&#39;, &#39;canary&#39;, &#39;gerbil&#39;] // remove by elementpets.removeIf(p -&gt; p.startsWith(&quot;c&quot;)); assert pets == [&#39;gerbil&#39;] // remove by conditionpets.clear(); assert pets.isEmpty() // make emptypets.add(&quot;kangaroo&quot;); assert pets == [&#39;kangaroo&#39;] // add elementpets.add(0, &quot;koala&quot;); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;] // add element at index positionpets.addAll([&#39;ant&#39;, &#39;bee&#39;]); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;, &#39;ant&#39;, &#39;bee&#39;] // add collectionpets.addAll(1, [&#39;ant&#39;]); assert pets == [&#39;koala&#39;, &#39;ant&#39;, &#39;kangaroo&#39;, &#39;ant&#39;, &#39;bee&#39;] // add collection at indexpets.removeAll([&#39;ant&#39;, &#39;flea&#39;]); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;, &#39;bee&#39;] // remove from collectionpets.retainAll([&#39;bee&#39;, &#39;koala&#39;]); assert pets == [&#39;koala&#39;, &#39;bee&#39;] // retain from collectionpets.set(0, &quot;zebra&quot;); assert pets == [&#39;zebra&#39;, &#39;bee&#39;] // set element at indexpets.replaceAll(String::toUpperCase); assert pets == [&#39;ZEBRA&#39;, &#39;BEE&#39;] // replace elements by unary operatorpets.sort(Comparator.naturalOrder()); assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;] // sort Groovy extensions for modifying lists: pets &lt;&lt; &#39;rock&#39;; assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;] // leftShift appendpets += [&#39;rabbit&#39;, &#39;rock&#39;, &#39;hare&#39;]; assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;, &#39;rabbit&#39;, &#39;rock&#39;, &#39;hare&#39;] // append collectionpets.unique(); assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;, &#39;rabbit&#39;, &#39;hare&#39;] // remove duplicatespets.sort{ it.size() }; assert pets == [&#39;BEE&#39;, &#39;rock&#39;, &#39;hare&#39;, &#39;ZEBRA&#39;, &#39;rabbit&#39;] // sort by sizepets[0] = &#39;ant&#39;; assert pets == [&#39;ant&#39;, &#39;rock&#39;, &#39;hare&#39;, &#39;ZEBRA&#39;, &#39;rabbit&#39;] // replace element by indexpets[1..3] = [&#39;snake&#39;, &#39;SNAKE&#39;]; assert pets == [&#39;ant&#39;, &#39;snake&#39;, &#39;SNAKE&#39;, &#39;rabbit&#39;] // replace range of elementspets.unique{it.toLowerCase() }; assert pets == [&#39;ant&#39;, &#39;snake&#39;, &#39;rabbit&#39;] // remove duplicates ignoring casepets.reverse(true); assert pets == [&#39;rabbit&#39;, &#39;snake&#39;, &#39;ant&#39;] // flippets.shuffle(); assert pets.size() == 3; // shuffle elements; resulting order will varydef dice = [1, 2, 3, 4, 5, 6]dice.removeAt(2); assert dice == [1, 2, 4, 5, 6]dice.removeElement(2); assert dice == [1, 4, 5, 6]dice.removeLast(); assert dice == [1, 4, 5]dice.swap(0, 2); assert dice == [5, 4, 1] Additional list functionality Methods and operators which return new lists or values: assert [1, 2, 3] + [1] == [1, 2, 3, 1]assert [1, 2, 3, 1] - [1] == [2, 3]assert [1, 2, 3] * 2 == [1, 2, 3, 1, 2, 3]assert [1, [2, 3]].flatten() == [1, 2, 3]assert [1, 2, 3].disjoint([4, 5, 6])assert [1, 2, 3].intersect([4, 3, 1]) == [1, 3]assert [1, 2, 3].collect { it + 3 } == [4, 5, 6]assert [1, 2, 3, 4].collect { 1 } == [1, 1, 1, 1]assert [4, 2, 1, 3].findAll { it % 2 == 0 } == [4, 2]assert [1, 2, 3, 4].take(3) == [1, 2, 3]assert [1, 2, 3, 4].takeRight(3) == [2, 3, 4]assert [1, 2, 3, 4].takeWhile{ it &lt; 3 } == [1, 2]assert [1, 2, 3, 4].drop(2) == [3, 4]assert [1, 2, 3, 4].dropRight(2) == [1, 2]assert [1, 2, 3, 4].dropWhile{it &lt; 3 } == [3, 4]assert [1, 2, 3, 4].join(&#39;-&#39;) == &#39;1-2-3-4&#39;assert [1, 2, 3, 4].tail() == [2, 3, 4]assert [1, 2, 3, 4].init() == [1, 2, 3]assert [1, 2, 3, 4].tails() == [[1, 2, 3, 4], [2, 3, 4], [3, 4], [4], []]assert [1, 2, 3, 4].inits() == [[1, 2, 3, 4], [1, 2, 3], [1, 2], [1], []]assert [1, 2, 3, 4].reverse() == [4, 3, 2, 1]assert [1, 2, 3, 1].toUnique() == [1, 2, 3]assert [1, 2, 3, 1].toSorted() == [1, 1, 2, 3]assert [1, 2, 3, 4].collect { it * 2 } == [2, 4, 6, 8]assert [[1, 2], [3, 4]].collectNested { it * 2 } == [[2, 4], [6, 8]]def squaresAndCubesOfEvens = { it % 2 ? [] : [it**2, it**3] }assert [1, 2, 3, 4].collectMany(squaresAndCubesOfEvens) == [4, 8, 16, 64]assert [1, 2, 3, 4].any { it &gt; 3 }assert [1, 2, 3, 4].every { it &lt; 5 }assert ![1, 2, 3, 4].every { it &gt; 3 }assert [1, 2, 3, 4].find { it &gt; 2 } == 3assert [1, 2, 3, 4].findAll { it &gt; 2 } == [3, 4]assert [1, 2, 3, 4].findIndexOf { it &gt; 2 } == 2assert [1, 2, 3, 1].findLastIndexOf { it &gt; 2 } == 2assert [1, 2, 3, 4].inject { acc, i -&gt; acc + i } == 10assert (1..10).collate(3) == [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]assert (1..10).chop(1, 3, 2, -1) == [[1], [2, 3, 4], [5, 6], [7, 8, 9, 10]]assert [1,2,3].permutations().toList() == [ [1, 2, 3], [3, 2, 1], [2, 1, 3], [3, 1, 2], [1, 3, 2], [2, 3, 1]]def matrix = [[&#39;a&#39;, &#39;b&#39;], [ 1 , 2 ]]assert matrix.transpose() == [ [&#39;a&#39;, 1], [&#39;b&#39;, 2] ]assert matrix.combinations() == [ [&#39;a&#39;, 1], [&#39;b&#39;, 1], [&#39;a&#39;, 2], [&#39;b&#39;, 2] ]assert [1, 2, 3].subsequences()*.toList() == [[1], [1, 2, 3], [2], [2, 3], [1, 2], [3], [1, 3]]def answers = [1, 2, 3].withDefault{ 42 }assert answers[2] == 3 &amp;&amp; answers[99] == 42 GINQ processing Groovy also supports language integrated query support to process lists: // squares of odd numbers between 1 and 5assert [1, 9, 25] == GQL { from n in 1..5 where n % 2 != 0 select n ** 2}// group pets by name sizeassert [&quot;3:[cat, dog]&quot;, &quot;4:[fish]&quot;, &quot;6:[canary, gerbil]&quot;] == GQL { from p in pets groupby p.size() as size select size, agg(p) as names}*.with{ &quot;$it.size:$it.names&quot; } Stream methods Useful stream methods (it is worthwhile comparing some of the examples to earlier non-stream variants): pets = [&#39;cat&#39;, &#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;, &#39;gerbil&#39;]assert pets.stream().filter(p -&gt; p.size() == 3).map(String::toUpperCase).toList() == [&#39;CAT&#39;, &#39;DOG&#39;]assert pets.stream().map(p -&gt; p.size()).distinct().sorted().toList() == [3, 4, 6] // ordered pet name sizesassert nums.stream().reduce{ a, b -&gt; a + b }.get() == 10assert (1..10).stream().skip(3).limit(5).filter(i -&gt; i % 2 == 0).map(i -&gt; i ** 2).toList() == [16, 36, 64]assert [1, 2, 3, 4].stream().flatMap(i -&gt; i % 2 ? Stream.empty() : Stream.of(i**2, i**3)).toList() == [4, 8, 16, 64]assert pets.stream().collect(Collectors.groupingBy(p -&gt; p.size())) == [3:[&#39;cat&#39;, &#39;dog&#39;], 4:[&#39;fish&#39;], 6:[&#39;canary&#39;, &#39;gerbil&#39;]]assert [1, 2, 3, 4].stream().map(Integer::toString).collect(Collectors.joining(&#39;-&#39;)) == &#39;1-2-3-4&#39;Arrays.stream(0..9 as int[]).summaryStatistics().with { assert sum == 45 &amp;&amp; min == 0 &amp;&amp; max == 9 &amp;&amp; average == 4.5 &amp;&amp; count == 10}assert pets.stream().allMatch(w -&gt; w ==~ /.*[aeiou].*/) // all pet names contain a vowel GPars Before looking at GPars, it is worth looking at parallel stream processing: // calculate squares of odd numbers from input listassert (1..5).parallelStream().filter{ it % 2 != 0 }.map(n -&gt; n ** 2).toList() == [1, 9, 25] GPars was designed to provide similar functionality long before streams processing was available. It still has some useful features. Groovy has several tricks for removing the outer &quot;withPool&quot; clauses but we&#39;ll do the longhand here. Two GPars variations of above streams example: GParsPool.withPool { assert (1..5).findAllParallel{ it % 2 }.collectParallel{ it ** 2 } == [1, 9, 25] assert (1..5).parallel.filter{ it % 2 }.map{ it ** 2 }.collection == [1, 9, 25]} Or using (JEP 425) virtual threads: GParsExecutorsPool.withExistingPool(Executors.newVirtualThreadPerTaskExecutor()) { assert (1..5).findAllParallel{ it % 2 }.collectParallel{ it ** 2 } == [1, 9, 25]} Other libraries There are numerous list-related libraries on the JVM. We&#39;ll look at just a few. Eclipse collections Eclipse collections comes with many container types including immutable collections, primitive collections, bimaps, multimaps and bags as well as numerous utility methods. It focuses on reduced memory footprint and efficient containers. It might be particularly of interest if you need primitive collections, immutable collections or some more exotic collection types like bag or bidirectional maps. Here are just a few examples: var certainties = Lists.immutable.of(&#39;death&#39;, &#39;taxes&#39;)assert certainties.reduce{ a, b -&gt; &quot;$a &amp; $b&quot; }.get() == &#39;death &amp; taxes&#39;var numBag = Bags.immutable.with(&#39;One&#39;, &#39;One&#39;, &#39;Two&#39;, &#39;Three&#39;)assert numBag.toMapOfItemToCount() == [One:2, Two:1, Three:1]var biMap = BiMaps.immutable.with(6, &quot;six&quot;, 2, &quot;two&quot;)assert biMap.inverse().six == 6 Guava Guava provides a number of extensions to the JDK collections ecosystem. In particular, it has immutable collections, new collection types like multisets and bidirectional maps and various powerful extensions and utilities. Here are a few examples: var set = TreeMultiset.create([1, 2, 3])assert set == TreeMultiset.create([3, 2, 1])set.addAll([1, 3, 5])assert set.size() == 6 &amp;&amp; set.elementSet().size() == 4assert set.toList() == [1, 1, 2, 3, 3, 5]var bimap = HashBiMap.create()bimap.five = 5assert bimap.inverse()[5] == &#39;five&#39; Apache Commons Collections The Apache Commons Collections library extends upon the JDK collections framework adding some new types like bidirectional maps and bags as well as providing many comparator and iterator implementations. The library was designed to fill gaps in the JDK offerings and while some of those gaps in the JDK have now been filled by the JDK itself, Commons Collections still contains much useful functionality. Here are a few examples: var six = [six: 6] as TreeBidiMapassert six.inverseBidiMap() == [6: &#39;six&#39;]var bag = new HashBag([&#39;one&#39;] * 6)bag.remove(&#39;one&#39;, 2)assert bag.getCount(&#39;one&#39;) == 4 Further Information GPars (website) Eclipse Collections (website and github site) Guava (user guide) Apache Commons Collections (website) Groovy in Action (Appendix D has cheat sheets for Lists, GStrings, Closures, Regular expressions and GPath expressions) Groovy Goodness: Getting the Tail of a List Groovy Goodness: Take and Drop Items from a List Groovy Goodness: Take Or Drop Last Items From a Collection Groovy Goodness: Safe Index Based Access For Lists, Arrays and Maps Groovy Goodness: Pop And Push Items In a List Lists in Groovy Conclusion We have looked at the more common methods for list processing with Groovy and a few other useful libraries." />
<link rel="canonical" href="http://localhost:4000/groovy/entry/groovy-list-processing-cheat-sheet" />
<meta property="og:url" content="http://localhost:4000/groovy/entry/groovy-list-processing-cheat-sheet" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-08-31T02:05:05-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Groovy List Processing Cheat Sheet" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-08-31T02:05:05-04:00","datePublished":"2022-08-31T02:05:05-04:00","description":"Declaring lists Several styles are supported for declaring lists: var pets = [&#39;cat&#39;, &#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;, &#39;gerbil&#39;] // idiomatic Groovyvar nums = [1, 2, 3, 4] as LinkedList // use &#39;as&#39; for other kinds of listvar primes = List.of(2, 3, 5, 7) // Java 9+ style (immutable)var range = 1..4 // a range is also a list (immutable)var bigNums = [1000, 2000].asUnmodifiable() // unmodifiable (backed by original)var negNums = [-100, -200].asImmutable() // immutable (backed by copy) List elements and properties Java methods for accessing list elements and list properties: assert !pets.isEmpty()assert pets.size() == 5assert pets.get(0) == &#39;cat&#39;assert pets.contains(&#39;dog&#39;)assert pets.containsAll(&#39;cat&#39;, &#39;dog&#39;)pets.forEach { assert it.size() &gt; 2 }assert [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;].indexOf(&#39;a&#39;) == 0assert [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;].lastIndexOf(&#39;a&#39;) == 2 Groovy extensions for accessing list elements and list properties: assert pets[0] == &#39;cat&#39;assert pets?[0] == &#39;cat&#39; // safe indexing returns null if pets was null instead of NPEassert pets.first() == &#39;cat&#39;assert pets.head() == &#39;cat&#39;assert pets[-1] == &#39;gerbil&#39;assert pets[1..3] == [&#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;]assert pets[3..1] == [&#39;fish&#39;, &#39;dog&#39;, &#39;canary&#39;] // reverse rangeassert pets[1, 3, 3] == [&#39;canary&#39;, &#39;fish&#39;, &#39;fish&#39;] // arbitrary collectionassert pets[0..1, [3, 3]] == [&#39;cat&#39;, &#39;canary&#39;, &#39;fish&#39;, &#39;fish&#39;] // nested collectionsassert [1, 2, 3, 1].count(1) == 2assert [1, 2, 3, 4].min() == 1assert [1, 2, 3, 4].max() == 4assert [1, 2, 3, 4].sum() == 10assert [1, 2, 3, 4].average() == 2.5[1, 2, 3, 4].eachWithIndex{ val, idx -&gt; assert val == idx + 1 }def cpets = pets[0..1]assert cpets == [&#39;cat&#39;, &#39;canary&#39;]assert pets.findAll { it =~ /c.*/ } == cpetsassert pets.find { it =~ /c.*/ } == cpets[0]assert pets.grep(~/c.*/) == cpetsassert cpets.min { it.size() } == &#39;cat&#39; // cpet with smallest size nameassert cpets.max { it.size() } == &#39;canary&#39; // cpet with largest nameassert pets.groupBy { it.size() } == [3: [&#39;cat&#39;, &#39;dog&#39;], 4: [&#39;fish&#39;], 6: [&#39;canary&#39;, &#39;gerbil&#39;]]assert pets.countBy { it.size() } == [3: 2, 4: 1, 6: 2]assert pets.sum{ it.size() } == 22 // total size of all pet namesassert pets.average{ it.size() } == 4.4 // average size of pet namesassert pets.indices == 0..4assert pets.findIndexValues { it.size() == 6 } == [1, 4]assert cpets.indexed() == [0: &#39;cat&#39;, 1: &#39;canary&#39;]assert cpets.withIndex()*.toList() == [[&#39;cat&#39;, 0], [&#39;canary&#39;, 1]] Modifying mutable lists Methods from Java for modifying lists: pets.remove(2); assert pets == [&#39;cat&#39;, &#39;canary&#39;, &#39;fish&#39;, &#39;gerbil&#39;] // remove by indexpets.remove(&#39;fish&#39;); assert pets == [&#39;cat&#39;, &#39;canary&#39;, &#39;gerbil&#39;] // remove by elementpets.removeIf(p -&gt; p.startsWith(&quot;c&quot;)); assert pets == [&#39;gerbil&#39;] // remove by conditionpets.clear(); assert pets.isEmpty() // make emptypets.add(&quot;kangaroo&quot;); assert pets == [&#39;kangaroo&#39;] // add elementpets.add(0, &quot;koala&quot;); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;] // add element at index positionpets.addAll([&#39;ant&#39;, &#39;bee&#39;]); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;, &#39;ant&#39;, &#39;bee&#39;] // add collectionpets.addAll(1, [&#39;ant&#39;]); assert pets == [&#39;koala&#39;, &#39;ant&#39;, &#39;kangaroo&#39;, &#39;ant&#39;, &#39;bee&#39;] // add collection at indexpets.removeAll([&#39;ant&#39;, &#39;flea&#39;]); assert pets == [&#39;koala&#39;, &#39;kangaroo&#39;, &#39;bee&#39;] // remove from collectionpets.retainAll([&#39;bee&#39;, &#39;koala&#39;]); assert pets == [&#39;koala&#39;, &#39;bee&#39;] // retain from collectionpets.set(0, &quot;zebra&quot;); assert pets == [&#39;zebra&#39;, &#39;bee&#39;] // set element at indexpets.replaceAll(String::toUpperCase); assert pets == [&#39;ZEBRA&#39;, &#39;BEE&#39;] // replace elements by unary operatorpets.sort(Comparator.naturalOrder()); assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;] // sort Groovy extensions for modifying lists: pets &lt;&lt; &#39;rock&#39;; assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;] // leftShift appendpets += [&#39;rabbit&#39;, &#39;rock&#39;, &#39;hare&#39;]; assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;, &#39;rabbit&#39;, &#39;rock&#39;, &#39;hare&#39;] // append collectionpets.unique(); assert pets == [&#39;BEE&#39;, &#39;ZEBRA&#39;, &#39;rock&#39;, &#39;rabbit&#39;, &#39;hare&#39;] // remove duplicatespets.sort{ it.size() }; assert pets == [&#39;BEE&#39;, &#39;rock&#39;, &#39;hare&#39;, &#39;ZEBRA&#39;, &#39;rabbit&#39;] // sort by sizepets[0] = &#39;ant&#39;; assert pets == [&#39;ant&#39;, &#39;rock&#39;, &#39;hare&#39;, &#39;ZEBRA&#39;, &#39;rabbit&#39;] // replace element by indexpets[1..3] = [&#39;snake&#39;, &#39;SNAKE&#39;]; assert pets == [&#39;ant&#39;, &#39;snake&#39;, &#39;SNAKE&#39;, &#39;rabbit&#39;] // replace range of elementspets.unique{it.toLowerCase() }; assert pets == [&#39;ant&#39;, &#39;snake&#39;, &#39;rabbit&#39;] // remove duplicates ignoring casepets.reverse(true); assert pets == [&#39;rabbit&#39;, &#39;snake&#39;, &#39;ant&#39;] // flippets.shuffle(); assert pets.size() == 3; // shuffle elements; resulting order will varydef dice = [1, 2, 3, 4, 5, 6]dice.removeAt(2); assert dice == [1, 2, 4, 5, 6]dice.removeElement(2); assert dice == [1, 4, 5, 6]dice.removeLast(); assert dice == [1, 4, 5]dice.swap(0, 2); assert dice == [5, 4, 1] Additional list functionality Methods and operators which return new lists or values: assert [1, 2, 3] + [1] == [1, 2, 3, 1]assert [1, 2, 3, 1] - [1] == [2, 3]assert [1, 2, 3] * 2 == [1, 2, 3, 1, 2, 3]assert [1, [2, 3]].flatten() == [1, 2, 3]assert [1, 2, 3].disjoint([4, 5, 6])assert [1, 2, 3].intersect([4, 3, 1]) == [1, 3]assert [1, 2, 3].collect { it + 3 } == [4, 5, 6]assert [1, 2, 3, 4].collect { 1 } == [1, 1, 1, 1]assert [4, 2, 1, 3].findAll { it % 2 == 0 } == [4, 2]assert [1, 2, 3, 4].take(3) == [1, 2, 3]assert [1, 2, 3, 4].takeRight(3) == [2, 3, 4]assert [1, 2, 3, 4].takeWhile{ it &lt; 3 } == [1, 2]assert [1, 2, 3, 4].drop(2) == [3, 4]assert [1, 2, 3, 4].dropRight(2) == [1, 2]assert [1, 2, 3, 4].dropWhile{it &lt; 3 } == [3, 4]assert [1, 2, 3, 4].join(&#39;-&#39;) == &#39;1-2-3-4&#39;assert [1, 2, 3, 4].tail() == [2, 3, 4]assert [1, 2, 3, 4].init() == [1, 2, 3]assert [1, 2, 3, 4].tails() == [[1, 2, 3, 4], [2, 3, 4], [3, 4], [4], []]assert [1, 2, 3, 4].inits() == [[1, 2, 3, 4], [1, 2, 3], [1, 2], [1], []]assert [1, 2, 3, 4].reverse() == [4, 3, 2, 1]assert [1, 2, 3, 1].toUnique() == [1, 2, 3]assert [1, 2, 3, 1].toSorted() == [1, 1, 2, 3]assert [1, 2, 3, 4].collect { it * 2 } == [2, 4, 6, 8]assert [[1, 2], [3, 4]].collectNested { it * 2 } == [[2, 4], [6, 8]]def squaresAndCubesOfEvens = { it % 2 ? [] : [it**2, it**3] }assert [1, 2, 3, 4].collectMany(squaresAndCubesOfEvens) == [4, 8, 16, 64]assert [1, 2, 3, 4].any { it &gt; 3 }assert [1, 2, 3, 4].every { it &lt; 5 }assert ![1, 2, 3, 4].every { it &gt; 3 }assert [1, 2, 3, 4].find { it &gt; 2 } == 3assert [1, 2, 3, 4].findAll { it &gt; 2 } == [3, 4]assert [1, 2, 3, 4].findIndexOf { it &gt; 2 } == 2assert [1, 2, 3, 1].findLastIndexOf { it &gt; 2 } == 2assert [1, 2, 3, 4].inject { acc, i -&gt; acc + i } == 10assert (1..10).collate(3) == [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]assert (1..10).chop(1, 3, 2, -1) == [[1], [2, 3, 4], [5, 6], [7, 8, 9, 10]]assert [1,2,3].permutations().toList() == [ [1, 2, 3], [3, 2, 1], [2, 1, 3], [3, 1, 2], [1, 3, 2], [2, 3, 1]]def matrix = [[&#39;a&#39;, &#39;b&#39;], [ 1 , 2 ]]assert matrix.transpose() == [ [&#39;a&#39;, 1], [&#39;b&#39;, 2] ]assert matrix.combinations() == [ [&#39;a&#39;, 1], [&#39;b&#39;, 1], [&#39;a&#39;, 2], [&#39;b&#39;, 2] ]assert [1, 2, 3].subsequences()*.toList() == [[1], [1, 2, 3], [2], [2, 3], [1, 2], [3], [1, 3]]def answers = [1, 2, 3].withDefault{ 42 }assert answers[2] == 3 &amp;&amp; answers[99] == 42 GINQ processing Groovy also supports language integrated query support to process lists: // squares of odd numbers between 1 and 5assert [1, 9, 25] == GQL { from n in 1..5 where n % 2 != 0 select n ** 2}// group pets by name sizeassert [&quot;3:[cat, dog]&quot;, &quot;4:[fish]&quot;, &quot;6:[canary, gerbil]&quot;] == GQL { from p in pets groupby p.size() as size select size, agg(p) as names}*.with{ &quot;$it.size:$it.names&quot; } Stream methods Useful stream methods (it is worthwhile comparing some of the examples to earlier non-stream variants): pets = [&#39;cat&#39;, &#39;canary&#39;, &#39;dog&#39;, &#39;fish&#39;, &#39;gerbil&#39;]assert pets.stream().filter(p -&gt; p.size() == 3).map(String::toUpperCase).toList() == [&#39;CAT&#39;, &#39;DOG&#39;]assert pets.stream().map(p -&gt; p.size()).distinct().sorted().toList() == [3, 4, 6] // ordered pet name sizesassert nums.stream().reduce{ a, b -&gt; a + b }.get() == 10assert (1..10).stream().skip(3).limit(5).filter(i -&gt; i % 2 == 0).map(i -&gt; i ** 2).toList() == [16, 36, 64]assert [1, 2, 3, 4].stream().flatMap(i -&gt; i % 2 ? Stream.empty() : Stream.of(i**2, i**3)).toList() == [4, 8, 16, 64]assert pets.stream().collect(Collectors.groupingBy(p -&gt; p.size())) == [3:[&#39;cat&#39;, &#39;dog&#39;], 4:[&#39;fish&#39;], 6:[&#39;canary&#39;, &#39;gerbil&#39;]]assert [1, 2, 3, 4].stream().map(Integer::toString).collect(Collectors.joining(&#39;-&#39;)) == &#39;1-2-3-4&#39;Arrays.stream(0..9 as int[]).summaryStatistics().with { assert sum == 45 &amp;&amp; min == 0 &amp;&amp; max == 9 &amp;&amp; average == 4.5 &amp;&amp; count == 10}assert pets.stream().allMatch(w -&gt; w ==~ /.*[aeiou].*/) // all pet names contain a vowel GPars Before looking at GPars, it is worth looking at parallel stream processing: // calculate squares of odd numbers from input listassert (1..5).parallelStream().filter{ it % 2 != 0 }.map(n -&gt; n ** 2).toList() == [1, 9, 25] GPars was designed to provide similar functionality long before streams processing was available. It still has some useful features. Groovy has several tricks for removing the outer &quot;withPool&quot; clauses but we&#39;ll do the longhand here. Two GPars variations of above streams example: GParsPool.withPool { assert (1..5).findAllParallel{ it % 2 }.collectParallel{ it ** 2 } == [1, 9, 25] assert (1..5).parallel.filter{ it % 2 }.map{ it ** 2 }.collection == [1, 9, 25]} Or using (JEP 425) virtual threads: GParsExecutorsPool.withExistingPool(Executors.newVirtualThreadPerTaskExecutor()) { assert (1..5).findAllParallel{ it % 2 }.collectParallel{ it ** 2 } == [1, 9, 25]} Other libraries There are numerous list-related libraries on the JVM. We&#39;ll look at just a few. Eclipse collections Eclipse collections comes with many container types including immutable collections, primitive collections, bimaps, multimaps and bags as well as numerous utility methods. It focuses on reduced memory footprint and efficient containers. It might be particularly of interest if you need primitive collections, immutable collections or some more exotic collection types like bag or bidirectional maps. Here are just a few examples: var certainties = Lists.immutable.of(&#39;death&#39;, &#39;taxes&#39;)assert certainties.reduce{ a, b -&gt; &quot;$a &amp; $b&quot; }.get() == &#39;death &amp; taxes&#39;var numBag = Bags.immutable.with(&#39;One&#39;, &#39;One&#39;, &#39;Two&#39;, &#39;Three&#39;)assert numBag.toMapOfItemToCount() == [One:2, Two:1, Three:1]var biMap = BiMaps.immutable.with(6, &quot;six&quot;, 2, &quot;two&quot;)assert biMap.inverse().six == 6 Guava Guava provides a number of extensions to the JDK collections ecosystem. In particular, it has immutable collections, new collection types like multisets and bidirectional maps and various powerful extensions and utilities. Here are a few examples: var set = TreeMultiset.create([1, 2, 3])assert set == TreeMultiset.create([3, 2, 1])set.addAll([1, 3, 5])assert set.size() == 6 &amp;&amp; set.elementSet().size() == 4assert set.toList() == [1, 1, 2, 3, 3, 5]var bimap = HashBiMap.create()bimap.five = 5assert bimap.inverse()[5] == &#39;five&#39; Apache Commons Collections The Apache Commons Collections library extends upon the JDK collections framework adding some new types like bidirectional maps and bags as well as providing many comparator and iterator implementations. The library was designed to fill gaps in the JDK offerings and while some of those gaps in the JDK have now been filled by the JDK itself, Commons Collections still contains much useful functionality. Here are a few examples: var six = [six: 6] as TreeBidiMapassert six.inverseBidiMap() == [6: &#39;six&#39;]var bag = new HashBag([&#39;one&#39;] * 6)bag.remove(&#39;one&#39;, 2)assert bag.getCount(&#39;one&#39;) == 4 Further Information GPars (website) Eclipse Collections (website and github site) Guava (user guide) Apache Commons Collections (website) Groovy in Action (Appendix D has cheat sheets for Lists, GStrings, Closures, Regular expressions and GPath expressions) Groovy Goodness: Getting the Tail of a List Groovy Goodness: Take and Drop Items from a List Groovy Goodness: Take Or Drop Last Items From a Collection Groovy Goodness: Safe Index Based Access For Lists, Arrays and Maps Groovy Goodness: Pop And Push Items In a List Lists in Groovy Conclusion We have looked at the more common methods for list processing with Groovy and a few other useful libraries.","headline":"Groovy List Processing Cheat Sheet","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/groovy/entry/groovy-list-processing-cheat-sheet"},"url":"http://localhost:4000/groovy/entry/groovy-list-processing-cheat-sheet"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Groovy List Processing Cheat Sheet</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-08-31T02:05:05-04:00" itemprop="datePublished">Aug 31, 2022
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Paul King", "login"=>"paulk", "email"=>"paulk@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h3>Declaring lists</h3>
<p>Several styles are supported for declaring lists:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>pets    = [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// idiomatic Groovy<br></span><span style="color:#cc7832;">var </span>nums    = [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>] <span style="color:#cc7832;">as </span>LinkedList                  <span style="color:#808080;">// use 'as' for other kinds of list<br></span><span style="color:#cc7832;">var </span>primes  = List.<span style="color:#9876aa;font-style:italic;">of</span>(<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">7</span>)                         <span style="color:#808080;">// Java 9+ style (immutable)<br></span><span style="color:#cc7832;">var </span>range   = <span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">4                                        </span><span style="color:#808080;">// a range is also a list (immutable)<br></span><span style="color:#cc7832;">var </span>bigNums = [<span style="color:#6897bb;">1000</span>, <span style="color:#6897bb;">2000</span>].asUnmodifiable()               <span style="color:#808080;">// unmodifiable (backed by original)<br></span><span style="color:#cc7832;">var </span>negNums = [-<span style="color:#6897bb;">100</span>, -<span style="color:#6897bb;">200</span>].asImmutable()                  <span style="color:#808080;">// immutable (backed by copy)</span></pre>
<h3>List elements and properties</h3>
<p>Java methods for accessing list elements and list properties:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">assert </span>!pets.isEmpty()<br><span style="color:#cc7832;">assert </span>pets.size() == <span style="color:#6897bb;">5<br></span><span style="color:#cc7832;">assert </span>pets.get(<span style="color:#6897bb;">0</span>) == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets.contains(<span style="color:#6a8759;">'dog'</span>)<br><span style="color:#cc7832;">assert </span>pets.containsAll(<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'dog'</span>)<br>pets.forEach <span style="font-weight:bold;">{ </span><span style="color:#cc7832;">assert </span>it.size() > <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6a8759;">'a'</span>, <span style="color:#6a8759;">'b'</span>, <span style="color:#6a8759;">'a'</span>].indexOf(<span style="color:#6a8759;">'a'</span>) == <span style="color:#6897bb;">0<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6a8759;">'a'</span>, <span style="color:#6a8759;">'b'</span>, <span style="color:#6a8759;">'a'</span>].lastIndexOf(<span style="color:#6a8759;">'a'</span>) == <span style="color:#6897bb;">2<br></span></pre>
<p>Groovy extensions for accessing list elements and list properties:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">0</span>] == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets?[<span style="color:#6897bb;">0</span>] == <span style="color:#6a8759;">'cat'  </span><span style="color:#808080;">// safe indexing returns null if pets was null instead of NPE<br></span><span style="color:#cc7832;">assert </span>pets.first() == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets.head() == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets[-<span style="color:#6897bb;">1</span>] == <span style="color:#6a8759;">'gerbil'<br></span><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">3</span>] == [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'fish'</span>]<br><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">3</span>..<span style="color:#6897bb;">1</span>] == [<span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'canary'</span>]  <span style="color:#808080;">// reverse range<br></span><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">3</span>] == [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'fish'</span>]  <span style="color:#808080;">// arbitrary collection<br></span><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">1</span>, [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">3</span>]] == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'fish'</span>]  <span style="color:#808080;">// nested collections<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].count(<span style="color:#6897bb;">1</span>) == <span style="color:#6897bb;">2<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].min() == <span style="color:#6897bb;">1<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].max() == <span style="color:#6897bb;">4<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].sum() == <span style="color:#6897bb;">10<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].average() == <span style="color:#6897bb;">2.5<br></span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].eachWithIndex<span style="font-weight:bold;">{ </span>val, idx <span style="font-weight:bold;">-> </span><span style="color:#cc7832;">assert </span>val == idx + <span style="color:#6897bb;">1 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">def </span>cpets = pets[<span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>cpets == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>]<br><span style="color:#cc7832;">assert </span>pets.findAll <span style="font-weight:bold;">{ </span>it =~ <span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">c.*</span><span style="color:#6a8759;">/ </span><span style="font-weight:bold;">} </span>== cpets<br><span style="color:#cc7832;">assert </span>pets.find <span style="font-weight:bold;">{ </span>it =~ <span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">c.*</span><span style="color:#6a8759;">/ </span><span style="font-weight:bold;">} </span>== cpets[<span style="color:#6897bb;">0</span>]<br><span style="color:#cc7832;">assert </span>pets.grep(~<span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">c.*</span><span style="color:#6a8759;">/</span>) == cpets<br><span style="color:#cc7832;">assert </span>cpets.min <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6a8759;">'cat'  </span><span style="color:#808080;">// cpet with smallest size name<br></span><span style="color:#cc7832;">assert </span>cpets.max <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6a8759;">'canary'  </span><span style="color:#808080;">// cpet with largest name<br></span><span style="color:#cc7832;">assert </span>pets.groupBy <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>: [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'dog'</span>], <span style="color:#6897bb;">4</span>: [<span style="color:#6a8759;">'fish'</span>], <span style="color:#6897bb;">6</span>: [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'gerbil'</span>]]<br><span style="color:#cc7832;">assert </span>pets.countBy <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>: <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>: <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">6</span>: <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>pets.sum<span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">22  </span><span style="color:#808080;">// total size of all pet names<br></span><span style="color:#cc7832;">assert </span>pets.average<span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">4.4  </span><span style="color:#808080;">// average size of pet names<br></span><span style="color:#cc7832;">assert </span>pets.<span style="color:#9876aa;">indices </span>== <span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">4<br></span><span style="color:#cc7832;">assert </span>pets.findIndexValues <span style="font-weight:bold;">{ </span>it.size() == <span style="color:#6897bb;">6 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>cpets.indexed() == [<span style="color:#6897bb;">0</span>: <span style="color:#6a8759;">'cat'</span>, <span style="color:#6897bb;">1</span>: <span style="color:#6a8759;">'canary'</span>]<br><span style="color:#cc7832;">assert </span>cpets.withIndex()*.toList() == [[<span style="color:#6a8759;">'cat'</span>, <span style="color:#6897bb;">0</span>], [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6897bb;">1</span>]]</pre>
<h3>Modifying mutable lists</h3>
<p>Methods from Java for modifying lists:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">pets.remove(<span style="color:#6897bb;">2</span>);                        <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// remove by index<br></span>pets.remove(<span style="color:#6a8759;">'fish'</span>);                   <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// remove by element<br></span>pets.removeIf(p -> p.startsWith(<span style="color:#6a8759;">"c"</span>)); <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// remove by condition<br></span>pets.clear();                          <span style="color:#cc7832;">assert </span>pets.isEmpty()  <span style="color:#808080;">// make empty<br></span>pets.add(<span style="color:#6a8759;">"kangaroo"</span>);                  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'kangaroo'</span>]  <span style="color:#808080;">// add element<br></span>pets.add(<span style="color:#6897bb;">0</span>, <span style="color:#6a8759;">"koala"</span>);                  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'kangaroo'</span>]  <span style="color:#808080;">// add element at index position<br></span>pets.addAll([<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'bee'</span>]);           <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'kangaroo'</span>, <span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// add collection<br></span>pets.addAll(<span style="color:#6897bb;">1</span>, [<span style="color:#6a8759;">'ant'</span>]);               <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'kangaroo'</span>, <span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// add collection at index<br></span>pets.removeAll([<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'flea'</span>]);       <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'kangaroo'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// remove from collection<br></span>pets.retainAll([<span style="color:#6a8759;">'bee'</span>, <span style="color:#6a8759;">'koala'</span>]);      <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// retain from collection<br></span>pets.set(<span style="color:#6897bb;">0</span>, <span style="color:#6a8759;">"zebra"</span>);                  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'zebra'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// set element at index<br></span>pets.replaceAll(String::toUpperCase);  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'BEE'</span>]  <span style="color:#808080;">// replace elements by unary operator<br></span>pets.sort(Comparator.<span style="color:#9876aa;font-style:italic;">naturalOrder</span>());  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>]  <span style="color:#808080;">// sort<br></span></pre>
<p>Groovy extensions for modifying lists:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">pets << <span style="color:#6a8759;">'rock'</span>;                        <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rock'</span>]  <span style="color:#808080;">// leftShift append<br></span>pets += [<span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>];    <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>]  <span style="color:#808080;">// append collection<br></span>pets.unique();                         <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'hare'</span>]  <span style="color:#808080;">// remove duplicates<br></span>pets.sort<span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">}</span>;                <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// sort by size<br></span>pets[<span style="color:#6897bb;">0</span>] = <span style="color:#6a8759;">'ant'</span>;                       <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// replace element by index<br></span>pets[<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">3</span>] = [<span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'SNAKE'</span>];       <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'SNAKE'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// replace range of elements<br></span>pets.unique<span style="font-weight:bold;">{</span>it.toLowerCase() <span style="font-weight:bold;">}</span>;        <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// remove duplicates ignoring case<br></span>pets.reverse(<span style="color:#cc7832;">true</span>);                    <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'ant'</span>]  <span style="color:#808080;">// flip<br></span>pets.shuffle();                        <span style="color:#cc7832;">assert </span>pets.size() == <span style="color:#6897bb;">3</span>;  <span style="color:#808080;">// shuffle elements; resulting order will vary<br></span><span style="color:#cc7832;">def </span>dice = [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br>dice.removeAt(<span style="color:#6897bb;">2</span>);                      <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br>dice.removeElement(<span style="color:#6897bb;">2</span>);                 <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br>dice.removeLast();                     <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>]<br>dice.swap(<span style="color:#6897bb;">0</span>, <span style="color:#6897bb;">2</span>);                       <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">1</span>]</pre>
<h3>Additional list functionality</h3>
<p>Methods and operators which return new lists or values:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>] + [<span style="color:#6897bb;">1</span>] == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>] - [<span style="color:#6897bb;">1</span>] == [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>] * <span style="color:#6897bb;">2 </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]].flatten() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].disjoint([<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>])<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].intersect([<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>]) == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].collect <span style="font-weight:bold;">{ </span>it + <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].collect <span style="font-weight:bold;">{ </span><span style="color:#6897bb;">1 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>].findAll <span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span>== <span style="color:#6897bb;">0 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].take(<span style="color:#6897bb;">3</span>) == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].takeRight(<span style="color:#6897bb;">3</span>) == [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].takeWhile<span style="font-weight:bold;">{ </span>it < <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].drop(<span style="color:#6897bb;">2</span>) == [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].dropRight(<span style="color:#6897bb;">2</span>) == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].dropWhile<span style="font-weight:bold;">{</span>it < <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].join(<span style="color:#6a8759;">'-'</span>) == <span style="color:#6a8759;">'1-2-3-4'<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].tail() == [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].init() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].tails() == [[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">4</span>], []]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].inits() == [[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">1</span>], []]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].reverse() == [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].toUnique() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].toSorted() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].collect <span style="font-weight:bold;">{ </span>it * <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">6</span>, <span style="color:#6897bb;">8</span>]<br><span style="color:#cc7832;">assert </span>[[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]].collectNested <span style="font-weight:bold;">{ </span>it * <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [[<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">6</span>, <span style="color:#6897bb;">8</span>]]<br><span style="color:#cc7832;">def </span>squaresAndCubesOfEvens = <span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span>? [] : [it**<span style="color:#6897bb;">2</span>, it**<span style="color:#6897bb;">3</span>] <span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].collectMany(squaresAndCubesOfEvens) == [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">16</span>, <span style="color:#6897bb;">64</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].any <span style="font-weight:bold;">{ </span>it > <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].every <span style="font-weight:bold;">{ </span>it < <span style="color:#6897bb;">5 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>![<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].every <span style="font-weight:bold;">{ </span>it > <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].find <span style="font-weight:bold;">{ </span>it > <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">3<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].findAll <span style="font-weight:bold;">{ </span>it > <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].findIndexOf <span style="font-weight:bold;">{ </span>it > <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">2<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].findLastIndexOf <span style="font-weight:bold;">{ </span>it > <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">2<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].inject <span style="font-weight:bold;">{ </span>acc, i <span style="font-weight:bold;">-> </span>acc + i <span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">10<br></span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">10</span>).collate(<span style="color:#6897bb;">3</span>)  == [[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>], [<span style="color:#6897bb;">7</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">9</span>], [<span style="color:#6897bb;">10</span>]]<br><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">10</span>).chop(<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, -<span style="color:#6897bb;">1</span>)  == [[<span style="color:#6897bb;">1</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>], [<span style="color:#6897bb;">7</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">10</span>]]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>,<span style="color:#6897bb;">2</span>,<span style="color:#6897bb;">3</span>].permutations().toList() == [<br>        [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>]<br>]<br><span style="color:#cc7832;">def </span>matrix = [[<span style="color:#6a8759;">'a'</span>, <span style="color:#6a8759;">'b'</span>], [ <span style="color:#6897bb;">1 </span>,  <span style="color:#6897bb;">2 </span>]]<br><span style="color:#cc7832;">assert </span>matrix.transpose()    == [ [<span style="color:#6a8759;">'a'</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6a8759;">'b'</span>, <span style="color:#6897bb;">2</span>] ]<br><span style="color:#cc7832;">assert </span>matrix.combinations() == [ [<span style="color:#6a8759;">'a'</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6a8759;">'b'</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6a8759;">'a'</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6a8759;">'b'</span>, <span style="color:#6897bb;">2</span>] ]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].subsequences()*.toList() == [[<span style="color:#6897bb;">1</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>]]<br><span style="color:#cc7832;">def </span>answers = [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].withDefault<span style="font-weight:bold;">{ </span><span style="color:#6897bb;">42 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>answers[<span style="color:#6897bb;">2</span>] == <span style="color:#6897bb;">3 </span>&amp;&amp; answers[<span style="color:#6897bb;">99</span>] == <span style="color:#6897bb;">42</span></pre>
<h3>GINQ processing</h3>
<p>Groovy also supports language integrated query support to process lists:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#808080;">// squares of odd numbers between 1 and 5<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>] == <span style="color:#9876aa;font-style:italic;">GQL </span>{<br>    <span style="color:#cc7832;">from </span>n <span style="color:#cc7832;">in </span><span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5 </span><span style="color:#cc7832;">where </span>n % <span style="color:#6897bb;">2 </span>!= <span style="color:#6897bb;">0 </span><span style="color:#cc7832;">select </span>n ** <span style="color:#6897bb;">2<br></span>}<br><br><span style="color:#808080;">// group pets by name size<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6a8759;">"3:[cat, dog]"</span>, <span style="color:#6a8759;">"4:[fish]"</span>, <span style="color:#6a8759;">"6:[canary, gerbil]"</span>] == <span style="color:#9876aa;font-style:italic;">GQL </span>{<br>    <span style="color:#cc7832;">from </span>p <span style="color:#cc7832;">in </span>pets<br>    <span style="color:#cc7832;">groupby </span>p.size() <span style="color:#cc7832;">as </span>size<br>    <span style="color:#cc7832;">select </span>size, agg(p) <span style="color:#cc7832;">as </span>names<br>}*.with<span style="font-weight:bold;">{ </span><span style="color:#6a8759;">"</span>$it.size<span style="color:#6a8759;">:</span>$it.<span style="color:#9876aa;">names</span><span style="color:#6a8759;">" </span><span style="font-weight:bold;">}</span></pre>
<h3>Stream methods</h3>
<p>Useful stream methods (it is worthwhile comparing some of the examples to earlier non-stream variants):</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">pets = [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'gerbil'</span>]<br><span style="color:#cc7832;">assert </span>pets.stream().filter(p -> p.size() == <span style="color:#6897bb;">3</span>).map(String::toUpperCase).toList() == [<span style="color:#6a8759;">'CAT'</span>, <span style="color:#6a8759;">'DOG'</span>]<br><span style="color:#cc7832;">assert </span>pets.stream().map(p -> p.size()).distinct().sorted().toList() == [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">6</span>]  <span style="color:#808080;">// ordered pet name sizes<br></span><span style="color:#cc7832;">assert </span>nums.stream().reduce<span style="font-weight:bold;">{ </span>a, b <span style="font-weight:bold;">-> </span>a + b <span style="font-weight:bold;">}</span>.get() == <span style="color:#6897bb;">10<br></span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">10</span>).stream().skip(<span style="color:#6897bb;">3</span>).limit(<span style="color:#6897bb;">5</span>).filter(i -> i % <span style="color:#6897bb;">2 </span>== <span style="color:#6897bb;">0</span>).map(i -> i ** <span style="color:#6897bb;">2</span>).toList() == [<span style="color:#6897bb;">16</span>, <span style="color:#6897bb;">36</span>, <span style="color:#6897bb;">64</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].stream().flatMap(i -> i % <span style="color:#6897bb;">2 </span>? Stream.<span style="color:#9876aa;font-style:italic;">empty</span>() : Stream.<span style="color:#9876aa;font-style:italic;">of</span>(i**<span style="color:#6897bb;">2</span>, i**<span style="color:#6897bb;">3</span>)).toList() == [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">16</span>, <span style="color:#6897bb;">64</span>]<br><span style="color:#cc7832;">assert </span>pets.stream().collect(Collectors.<span style="color:#9876aa;font-style:italic;">groupingBy</span>(p -> p.size())) == [<span style="color:#6897bb;">3</span>:[<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'dog'</span>], <span style="color:#6897bb;">4</span>:[<span style="color:#6a8759;">'fish'</span>], <span style="color:#6897bb;">6</span>:[<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'gerbil'</span>]]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].stream().map(Integer::toString).collect(Collectors.<span style="color:#9876aa;font-style:italic;">joining</span>(<span style="color:#6a8759;">'-'</span>)) == <span style="color:#6a8759;">'1-2-3-4'<br></span>Arrays.<span style="color:#9876aa;font-style:italic;">stream</span>(<span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">9 </span><span style="color:#cc7832;">as int</span>[]).summaryStatistics().with <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">assert </span><span style="color:#9876aa;">sum </span>== <span style="color:#6897bb;">45 </span>&amp;&amp; <span style="color:#9876aa;">min </span>== <span style="color:#6897bb;">0 </span>&amp;&amp; <span style="color:#9876aa;">max </span>== <span style="color:#6897bb;">9 </span>&amp;&amp; <span style="color:#9876aa;">average </span>== <span style="color:#6897bb;">4.5 </span>&amp;&amp; <span style="color:#9876aa;">count </span>== <span style="color:#6897bb;">10<br></span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>pets.stream().allMatch(w -> w ==~ <span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">.*[aeiou].*</span><span style="color:#6a8759;">/</span>)  <span style="color:#808080;">// all pet names contain a vowel</span></pre>
<h3>GPars</h3>
<p>Before looking at <a href="http://gpars.org/" target="_blank">GPars</a>, it is worth looking at parallel stream processing:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#808080;">// calculate squares of odd numbers from input list<br></span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).parallelStream().filter<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span>!= <span style="color:#6897bb;">0 </span><span style="font-weight:bold;">}</span>.map(n -> n ** <span style="color:#6897bb;">2</span>).toList() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]</pre>
<p>GPars was designed to provide similar functionality long before streams processing was available. It still has some useful features.</p>
<p>Groovy has several tricks for removing the outer "withPool" clauses but we'll do the longhand here. Two GPars variations of above streams example:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">GParsPool.<span style="color:#9876aa;font-style:italic;">withPool </span><span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).findAllParallel<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.collectParallel<span style="font-weight:bold;">{ </span>it ** <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]<br>    <span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).parallel.filter<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.map<span style="font-weight:bold;">{ </span>it ** <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.collection == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]<br><span style="font-weight:bold;">}<br></span></pre>
<p>Or using (<a href="https://openjdk.java.net/jeps/425" target="_blank">JEP 425</a>) virtual threads:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">GParsExecutorsPool.<span style="color:#9876aa;font-style:italic;">withExistingPool</span>(Executors.newVirtualThreadPerTaskExecutor()) <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).findAllParallel<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.collectParallel<span style="font-weight:bold;">{ </span>it ** <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]<br><span style="font-weight:bold;">}<br></span></pre>
<h3>Other libraries</h3>
<p>There are numerous list-related libraries on the JVM. We'll look at just a few.</p>
<h4>Eclipse collections</h4>
<p><a href="https://www.eclipse.org/collections/" target="_blank">Eclipse collections</a> comes with many container types including immutable collections, primitive collections, bimaps, multimaps and bags as well as numerous utility methods. It focuses on reduced memory footprint and efficient containers. It might be particularly of interest if you need primitive collections, immutable collections or some more exotic collection types like bag or bidirectional maps. Here are just a few examples:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>certainties = Lists.<span style="color:#9876aa;font-style:italic;">immutable</span>.of(<span style="color:#6a8759;">'death'</span>, <span style="color:#6a8759;">'taxes'</span>)<br><span style="color:#cc7832;">assert </span>certainties.reduce<span style="font-weight:bold;">{ </span>a, b <span style="font-weight:bold;">-> </span><span style="color:#6a8759;">"</span>$a<span style="color:#6a8759;"> &amp; </span>$b<span style="color:#6a8759;">" </span><span style="font-weight:bold;">}</span>.get() == <span style="color:#6a8759;">'death &amp; taxes'<br></span><span style="color:#cc7832;">var </span>numBag = Bags.<span style="color:#9876aa;font-style:italic;">immutable</span>.with(<span style="color:#6a8759;">'One'</span>, <span style="color:#6a8759;">'One'</span>, <span style="color:#6a8759;">'Two'</span>, <span style="color:#6a8759;">'Three'</span>)<br><span style="color:#cc7832;">assert </span>numBag.toMapOfItemToCount() == [<span style="color:#6a8759;">One</span>:<span style="color:#6897bb;">2</span>, <span style="color:#6a8759;">Two</span>:<span style="color:#6897bb;">1</span>, <span style="color:#6a8759;">Three</span>:<span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">var </span>biMap = BiMaps.<span style="color:#9876aa;font-style:italic;">immutable</span>.with(<span style="color:#6897bb;">6</span>, <span style="color:#6a8759;">"six"</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6a8759;">"two"</span>)<br><span style="color:#cc7832;">assert </span>biMap.inverse().six == <span style="color:#6897bb;">6</span></pre>
<h4>Guava</h4>
<p><a href="https://github.com/google/guava/wiki" target="_blank">Guava</a> provides a number of extensions to the JDK collections ecosystem. In particular, it has immutable collections, new collection types like multisets and bidirectional maps and various powerful extensions and utilities. Here are a few examples:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>set = TreeMultiset.<span style="color:#9876aa;font-style:italic;">create</span>([<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>])<br><span style="color:#cc7832;">assert </span>set == TreeMultiset.<span style="color:#9876aa;font-style:italic;">create</span>([<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>])<br>set.addAll([<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">5</span>])<br><span style="color:#cc7832;">assert </span>set.size() == <span style="color:#6897bb;">6 </span>&amp;&amp; set.elementSet().size() == <span style="color:#6897bb;">4<br></span><span style="color:#cc7832;">assert </span>set.toList() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">5</span>]<br><span style="color:#cc7832;">var </span>bimap = HashBiMap.<span style="color:#9876aa;font-style:italic;">create</span>()<br>bimap.<span style="color:#6a8759;">five </span>= <span style="color:#6897bb;">5<br></span><span style="color:#cc7832;">assert </span>bimap.inverse()[<span style="color:#6897bb;">5</span>] == <span style="color:#6a8759;">'five'</span></pre>
<h4>Apache Commons Collections</h4>
<p>The <a href="https://commons.apache.org/proper/commons-collections/" target="_blank">Apache Commons Collections</a> library extends upon the JDK collections framework adding some new types like bidirectional maps and bags as well as providing many comparator and iterator implementations. The library was designed to fill gaps in the JDK offerings and while some of those gaps in the JDK have now been filled by the JDK itself, Commons Collections still contains much useful functionality. Here are a few examples:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>six = <span style="color:#e8bf6a;font-weight:bold;">[</span><span style="color:#6a8759;">six</span>: <span style="color:#6897bb;">6</span><span style="color:#e8bf6a;font-weight:bold;">] </span><span style="color:#cc7832;">as </span>TreeBidiMap<br><span style="color:#cc7832;">assert </span>six.inverseBidiMap() == [<span style="color:#6897bb;">6</span>: <span style="color:#6a8759;">'six'</span>]<br><span style="color:#cc7832;">var </span>bag = <span style="color:#cc7832;">new </span>HashBag([<span style="color:#6a8759;">'one'</span>] * <span style="color:#6897bb;">6</span>)<br>bag.remove(<span style="color:#6a8759;">'one'</span>, <span style="color:#6897bb;">2</span>)<br><span style="color:#cc7832;">assert </span>bag.getCount(<span style="color:#6a8759;">'one'</span>) == <span style="color:#6897bb;">4</span></pre>
<h3>Further Information</h3>
<ul>
<li>GPars (<a href="http://gpars.org/" target="_blank">website</a>)</li>
<li>Eclipse Collections (<a href="https://www.eclipse.org/collections/" target="_blank">website</a> and <a href="https://github.com/eclipse/eclipse-collections" target="_blank">github site</a>)</li>
<li>Guava (<a href="https://github.com/google/guava/wiki" target="_blank">user guide</a>)</li>
<li>Apache Commons Collections (<a href="https://commons.apache.org/proper/commons-collections/" target="_blank">website</a>)</li>
<li><a href="https://www.manning.com/books/groovy-in-action-second-edition" target="_blank">Groovy in Action</a> (Appendix D has cheat sheets for Lists, GStrings, Closures, Regular expressions and GPath expressions)</li>
<li><a href="https://blog.mrhaki.com/2009/10/groovy-goodness-getting-tail-of-list.html" target="_blank">Groovy Goodness: Getting the Tail of a List</a></li>
<li><a href="https://blog.mrhaki.com/2011/09/groovy-goodness-take-and-drop-items.html" target="_blank">Groovy Goodness: Take and Drop Items from a List</a></li>
<li><a href="https://blog.mrhaki.com/2015/01/groovy-goodness-take-or-drop-last-items.html" target="_blank">Groovy Goodness: Take Or Drop Last Items From a Collection</a></li>
<li><a href="https://blog.mrhaki.com/2020/03/groovy-goodness-safe-index-based-access.html" target="_blank">Groovy Goodness: Safe Index Based Access For Lists, Arrays and Maps</a></li>
<li><a href="https://blog.mrhaki.com/2015/01/groovy-goodness-pop-and-push-items-in.html" target="_blank">Groovy Goodness: Pop And Push Items In a List</a><br></li>
<li><a href="https://www.baeldung.com/groovy-lists" target="_blank">Lists in Groovy</a><br></li>
</ul>
<h3>Conclusion</h3>
<p>We have looked at the more common methods for list processing with Groovy and a few other useful libraries.</p>
<p><br></p>

  </div><a class="u-url" href="/groovy/entry/groovy-list-processing-cheat-sheet" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
