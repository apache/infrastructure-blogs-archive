---
layout: post
status: PUBLISHED
published: true
title: Apache CloudStack registerUserKeys authorization vulnerability
author:
  display_name: John Kinsella
  login: jlk
  email: 'jlk@apache.org '
author_login: jlk
author_email: 'jlk@apache.org '
id: 8ed11187-ab1a-4a47-bda8-93b4b74a3889
date: '2016-10-27 14:41:06 -0400'
categories:
- Announcements
tags:
- cloudstack
- security
comments:
- id: 0
  author: carlogos
  author_email: likebo@gmail.com
  author_url: http://car-logos.com
  date: '2017-05-17 09:37:56 -0400'
  content: works now.
- id: 0
  author: SebastienP
  author_email: sebastien@pittet.org
  author_url: http://https://sebastien.pittet.org/blog
  date: '2016-10-30 20:24:45 -0400'
  content: "Congrats for the finding, Marc-Aur&egrave;le! Thanks for the contribution.\r\n\r\nI'm
    happy to see that SECURITY in not just a marketing argument from my Swiss Cloud
    provider.\r\n\r\nexoscale.ch is taking care of my data : this is very important
    to me.\r\n\r\nMoreover, you are contributing to improve products : that is a good
    point for your company."
- id: 0
  author: 'camera 360 '
  author_email: appsforsys@gmail.com
  author_url: http://appsforsys.com/camera360-appcamera-360-ultimate-camera-c360-kamera-360app-camera-360-free360-camera-app/
  date: '2016-11-01 08:26:21 -0400'
  content: "Hi,\r\n    It is very ice post, your blog is looking good. Keep going
    on."
- id: 0
  author: javascript obfuscator
  author_email: spanishtoenglish01@gmail.com
  author_url: https://javascript-obfuscator.org/
  date: '2017-07-03 04:02:16 -0400'
  content: Fixed
- id: 0
  author: satta matka
  author_email: ramukaka@gmail.com
  author_url: http://sattamatkamarket.in
  date: '2018-01-13 15:38:38 -0500'
  content: Your blog website provided us with useful information to execute with.
    Each & every recommendations of your website are awesome. Thanks a lot for talking
    about.
- id: 15
  author: Sadhu
  author_email: mailtosadhu@gmail.com
  author_url: ''
  date: '2016-11-16 09:43:49 -0500'
  content: Nice catch Marc-Aur&egrave;le Brothier and thanks for sharing and keep
    going on .
- id: 54
  author: shiju
  author_email: pbijuchandra@gmail.com
  author_url: ''
  date: '2017-01-24 05:13:13 -0500'
  content: apache cloud secondary storage not working
- id: 57
  author: Jio TV
  author_email: jiorel@pwc.com
  author_url: http://www.jiotvapp.com/
  date: '2017-01-20 03:32:39 -0500'
  content: This was solved and that's great. thanks for your information.
permalink: cloudstack/entry/apache_cloudstack_registeruserkeys_authorization_vulnerability
---
<p>The <a href="http://cloudstack.apache.org/security.html">CloudStack security team</a> recently received notice of a significant vulnerability in a CloudStack API call - registerUserKeys. The original intention for this call was for it to only be exposed for integration work - eg not to the public network in general. A weakness in the API call's implementation allows a malicious user to reset the API keys for other users on the system, thus accessing resources and services available to that user. We have released CloudStack versions 4.8.1.1 and 4.9.0.1 with patches for this issue. More details about the release can be read on the <a href="https://s.apache.org/qV5l">official announcement post</a>.</p>
<p>Some users may be protected from this weakness already, if they have configured their commands.properties file to limit access to this api call from the integration API port, instead of general API port. This can be accomplished by setting registerUserKeys to 1.</p>
<p>Users of Apache CloudStack version 4.9 whom are using the dynamic roles feature can delete the "Allow" rule for "registerUserKeys" for each non-administrator role under the Roles/Rules section of the user interface.</p>
<p>Credit:<br><br />
This vulnerability was reported by Marc-Aur&egrave;le Brothier from Exoscale.<br></p>
