<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Adventures with GroovyFX | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Adventures with GroovyFX" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This blog looks at a GroovyFX version of a ToDo application originally written in JavaFX. First we start with a ToDoCategory enum of our ToDo categories: We will have a ToDoItem class containing the todo task, the previously mentioned category and the due date. @Canonical@JsonIncludeProperties([&#39;task&#39;, &#39;category&#39;, &#39;date&#39;])@FXBindableclass ToDoItem { String task ToDoCategory category LocalDate date} It&#39;s annotated with @JsonIncludeProperties to allow easy serialization to/from JSON format, to provide easy persistence, and @FXBindable&nbsp;which eliminates the boilerplate required to define JavaFX properties. Next, we&#39;ll define some helper variables: var file = &#39;todolist.json&#39; as Filevar mapper = new ObjectMapper().registerModule(new JavaTimeModule())var open = { mapper.readValue(it, new TypeReference&lt;List&gt;() {}) }var init = file.exists() ? open(file) : []var items = FXCollections.observableList(init)var close = { mapper.writeValue(file, items) }var table, task, category, date, images = [:]var urls = ToDoCategory.values().collectEntries { [it, &quot;emoji/${Integer.toHexString(it.emoji.codePointAt(0))}.png&quot;]}&lt;/pre&gt; Here, mapper serializes and deserializes our top-level domain object (the ToDo list) into JSON using the Jackson library. The&nbsp;open and close&nbsp;Closures do the reading and writing respectively. For a bit of fun and only slightly more complexity, we have included some slightly nicer images in our application. JavaFX&#39;s default emoji font rendering is a little sketchy on some platforms and it&#39;s not much work to have nice multi-colored images. This is achieved using the icons from&nbsp;&lt;span style=&quot;background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px;&quot;&gt;https://github.com/pavlobu/emoji-text-flow-javafx.&lt;/span&gt;&nbsp;The application is perfectly functional without them (and the approximately 20 lines for the&nbsp;cellFactory and cellValueFactory definitions could be elided) but is prettier with the nicer images. We shrunk them to 1/3 their original size but we could certainly make them larger if we felt inclined. Our application will have a combo box for selecting a ToDo item&#39;s category. We&#39;ll create a factory for the combo box so that each selection will be a label with both graphic and text components. def graphicLabelFactory = { new ListCell() { void updateItem(ToDoCategory cat, boolean empty) { super.updateItem(cat, empty) if (!empty) { graphic = new Label(cat.name()).tap { graphic = new ImageView(images[cat]) } } } }}&lt;/pre&gt; When displaying our ToDo list, we&#39;ll use a table view. So, let&#39;s create a factory for table cells that will use the pretty images as a centered graphic. def graphicCellFactory = { new TableCell&lt;ToDoItem, ToDoItem&gt;() { void updateItem(ToDoItem item, boolean empty) { graphic = empty ? null : new ImageView(images[item.category]) alignment = Pos.CENTER } }} Finally, with these definitions out of the way, we can define our GroovyFX application for manipulating our ToDo list: start { stage(title: &#39;GroovyFX ToDo Demo&#39;, show: true, onCloseRequest: close) { urls.each { k, v -&gt; images[k] = image(url: v, width: 24, height: 24) } scene { gridPane(hgap: 10, vgap: 10, padding: 20) { columnConstraints(minWidth: 80, halignment: &#39;right&#39;) columnConstraints(prefWidth: 250) label(&#39;Task:&#39;, row: 1, column: 0) task = textField(row: 1, column: 1, hgrow: &#39;always&#39;) label(&#39;Category:&#39;, row: 2, column: 0) category = comboBox(items: ToDoCategory.values().toList(), cellFactory: graphicLabelFactory, row: 2, column: 1) label(&#39;Date:&#39;, row: 3, column: 0) date = datePicker(row: 3, column: 1) table = tableView(items: items, row: 4, columnSpan: REMAINING, onMouseClicked: { var item = items[table.selectionModel.selectedIndex.value] task.text = item.task category.value = item.category date.value = item.date }) { tableColumn(property: &#39;task&#39;, text: &#39;Task&#39;, prefWidth: 200) tableColumn(property: &#39;category&#39;, text: &#39;Category&#39;, prefWidth: 80, cellValueFactory: { new ReadOnlyObjectWrapper(it.value) }, cellFactory: graphicCellFactory) tableColumn(property: &#39;date&#39;, text: &#39;Date&#39;, prefWidth: 90, type: Date) } hbox(row: 5, columnSpan: REMAINING, alignment: CENTER, spacing: 10) { button(&#39;Add&#39;, onAction: { if (task.text &amp;&amp; category.value &amp;&amp; date.value) { items &lt;&lt; new ToDoItem(task.text, category.value, date.value) } }) button(&#39;Update&#39;, onAction: { if (task.text &amp;&amp; category.value &amp;&amp; date.value &amp;&amp; !table.selectionModel.empty) { var item = items[table.selectionModel.selectedIndex.value] item.task = task.text item.category = category.value item.date = date.value } }) button(&#39;Remove&#39;, onAction: { if (!table.selectionModel.empty) items.removeAt(table.selectionModel.selectedIndex.value) }) } } } }} We could have somewhat separated the concerns of application logic and display logic by placing the GUI part of this app in an&nbsp;fxml file. For our purposes however, we&#39;ll keep the whole application in one source file and use Groovy&#39;s declarative builder style. Here is the application in use: Further information The code for this application can be found here:&nbsp;https://github.com/paulk-asert/groovyfx-todo. It&#39;s a Groovy 3 and JDK 8 application but see this blog if you want to see Jackson deserialization of classes and records (and Groovy&#39;s emulated records) from CSV files using the most recent Groovy and JDK versions." />
<meta property="og:description" content="This blog looks at a GroovyFX version of a ToDo application originally written in JavaFX. First we start with a ToDoCategory enum of our ToDo categories: We will have a ToDoItem class containing the todo task, the previously mentioned category and the due date. @Canonical@JsonIncludeProperties([&#39;task&#39;, &#39;category&#39;, &#39;date&#39;])@FXBindableclass ToDoItem { String task ToDoCategory category LocalDate date} It&#39;s annotated with @JsonIncludeProperties to allow easy serialization to/from JSON format, to provide easy persistence, and @FXBindable&nbsp;which eliminates the boilerplate required to define JavaFX properties. Next, we&#39;ll define some helper variables: var file = &#39;todolist.json&#39; as Filevar mapper = new ObjectMapper().registerModule(new JavaTimeModule())var open = { mapper.readValue(it, new TypeReference&lt;List&gt;() {}) }var init = file.exists() ? open(file) : []var items = FXCollections.observableList(init)var close = { mapper.writeValue(file, items) }var table, task, category, date, images = [:]var urls = ToDoCategory.values().collectEntries { [it, &quot;emoji/${Integer.toHexString(it.emoji.codePointAt(0))}.png&quot;]}&lt;/pre&gt; Here, mapper serializes and deserializes our top-level domain object (the ToDo list) into JSON using the Jackson library. The&nbsp;open and close&nbsp;Closures do the reading and writing respectively. For a bit of fun and only slightly more complexity, we have included some slightly nicer images in our application. JavaFX&#39;s default emoji font rendering is a little sketchy on some platforms and it&#39;s not much work to have nice multi-colored images. This is achieved using the icons from&nbsp;&lt;span style=&quot;background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px;&quot;&gt;https://github.com/pavlobu/emoji-text-flow-javafx.&lt;/span&gt;&nbsp;The application is perfectly functional without them (and the approximately 20 lines for the&nbsp;cellFactory and cellValueFactory definitions could be elided) but is prettier with the nicer images. We shrunk them to 1/3 their original size but we could certainly make them larger if we felt inclined. Our application will have a combo box for selecting a ToDo item&#39;s category. We&#39;ll create a factory for the combo box so that each selection will be a label with both graphic and text components. def graphicLabelFactory = { new ListCell() { void updateItem(ToDoCategory cat, boolean empty) { super.updateItem(cat, empty) if (!empty) { graphic = new Label(cat.name()).tap { graphic = new ImageView(images[cat]) } } } }}&lt;/pre&gt; When displaying our ToDo list, we&#39;ll use a table view. So, let&#39;s create a factory for table cells that will use the pretty images as a centered graphic. def graphicCellFactory = { new TableCell&lt;ToDoItem, ToDoItem&gt;() { void updateItem(ToDoItem item, boolean empty) { graphic = empty ? null : new ImageView(images[item.category]) alignment = Pos.CENTER } }} Finally, with these definitions out of the way, we can define our GroovyFX application for manipulating our ToDo list: start { stage(title: &#39;GroovyFX ToDo Demo&#39;, show: true, onCloseRequest: close) { urls.each { k, v -&gt; images[k] = image(url: v, width: 24, height: 24) } scene { gridPane(hgap: 10, vgap: 10, padding: 20) { columnConstraints(minWidth: 80, halignment: &#39;right&#39;) columnConstraints(prefWidth: 250) label(&#39;Task:&#39;, row: 1, column: 0) task = textField(row: 1, column: 1, hgrow: &#39;always&#39;) label(&#39;Category:&#39;, row: 2, column: 0) category = comboBox(items: ToDoCategory.values().toList(), cellFactory: graphicLabelFactory, row: 2, column: 1) label(&#39;Date:&#39;, row: 3, column: 0) date = datePicker(row: 3, column: 1) table = tableView(items: items, row: 4, columnSpan: REMAINING, onMouseClicked: { var item = items[table.selectionModel.selectedIndex.value] task.text = item.task category.value = item.category date.value = item.date }) { tableColumn(property: &#39;task&#39;, text: &#39;Task&#39;, prefWidth: 200) tableColumn(property: &#39;category&#39;, text: &#39;Category&#39;, prefWidth: 80, cellValueFactory: { new ReadOnlyObjectWrapper(it.value) }, cellFactory: graphicCellFactory) tableColumn(property: &#39;date&#39;, text: &#39;Date&#39;, prefWidth: 90, type: Date) } hbox(row: 5, columnSpan: REMAINING, alignment: CENTER, spacing: 10) { button(&#39;Add&#39;, onAction: { if (task.text &amp;&amp; category.value &amp;&amp; date.value) { items &lt;&lt; new ToDoItem(task.text, category.value, date.value) } }) button(&#39;Update&#39;, onAction: { if (task.text &amp;&amp; category.value &amp;&amp; date.value &amp;&amp; !table.selectionModel.empty) { var item = items[table.selectionModel.selectedIndex.value] item.task = task.text item.category = category.value item.date = date.value } }) button(&#39;Remove&#39;, onAction: { if (!table.selectionModel.empty) items.removeAt(table.selectionModel.selectedIndex.value) }) } } } }} We could have somewhat separated the concerns of application logic and display logic by placing the GUI part of this app in an&nbsp;fxml file. For our purposes however, we&#39;ll keep the whole application in one source file and use Groovy&#39;s declarative builder style. Here is the application in use: Further information The code for this application can be found here:&nbsp;https://github.com/paulk-asert/groovyfx-todo. It&#39;s a Groovy 3 and JDK 8 application but see this blog if you want to see Jackson deserialization of classes and records (and Groovy&#39;s emulated records) from CSV files using the most recent Groovy and JDK versions." />
<link rel="canonical" href="http://localhost:4000/groovy/entry/adventures-with-groovyfx" />
<meta property="og:url" content="http://localhost:4000/groovy/entry/adventures-with-groovyfx" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-12-13T06:44:34-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Adventures with GroovyFX" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-13T06:44:34-05:00","datePublished":"2022-12-13T06:44:34-05:00","description":"This blog looks at a GroovyFX version of a ToDo application originally written in JavaFX. First we start with a ToDoCategory enum of our ToDo categories: We will have a ToDoItem class containing the todo task, the previously mentioned category and the due date. @Canonical@JsonIncludeProperties([&#39;task&#39;, &#39;category&#39;, &#39;date&#39;])@FXBindableclass ToDoItem { String task ToDoCategory category LocalDate date} It&#39;s annotated with @JsonIncludeProperties to allow easy serialization to/from JSON format, to provide easy persistence, and @FXBindable&nbsp;which eliminates the boilerplate required to define JavaFX properties. Next, we&#39;ll define some helper variables: var file = &#39;todolist.json&#39; as Filevar mapper = new ObjectMapper().registerModule(new JavaTimeModule())var open = { mapper.readValue(it, new TypeReference&lt;List&gt;() {}) }var init = file.exists() ? open(file) : []var items = FXCollections.observableList(init)var close = { mapper.writeValue(file, items) }var table, task, category, date, images = [:]var urls = ToDoCategory.values().collectEntries { [it, &quot;emoji/${Integer.toHexString(it.emoji.codePointAt(0))}.png&quot;]}&lt;/pre&gt; Here, mapper serializes and deserializes our top-level domain object (the ToDo list) into JSON using the Jackson library. The&nbsp;open and close&nbsp;Closures do the reading and writing respectively. For a bit of fun and only slightly more complexity, we have included some slightly nicer images in our application. JavaFX&#39;s default emoji font rendering is a little sketchy on some platforms and it&#39;s not much work to have nice multi-colored images. This is achieved using the icons from&nbsp;&lt;span style=&quot;background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px;&quot;&gt;https://github.com/pavlobu/emoji-text-flow-javafx.&lt;/span&gt;&nbsp;The application is perfectly functional without them (and the approximately 20 lines for the&nbsp;cellFactory and cellValueFactory definitions could be elided) but is prettier with the nicer images. We shrunk them to 1/3 their original size but we could certainly make them larger if we felt inclined. Our application will have a combo box for selecting a ToDo item&#39;s category. We&#39;ll create a factory for the combo box so that each selection will be a label with both graphic and text components. def graphicLabelFactory = { new ListCell() { void updateItem(ToDoCategory cat, boolean empty) { super.updateItem(cat, empty) if (!empty) { graphic = new Label(cat.name()).tap { graphic = new ImageView(images[cat]) } } } }}&lt;/pre&gt; When displaying our ToDo list, we&#39;ll use a table view. So, let&#39;s create a factory for table cells that will use the pretty images as a centered graphic. def graphicCellFactory = { new TableCell&lt;ToDoItem, ToDoItem&gt;() { void updateItem(ToDoItem item, boolean empty) { graphic = empty ? null : new ImageView(images[item.category]) alignment = Pos.CENTER } }} Finally, with these definitions out of the way, we can define our GroovyFX application for manipulating our ToDo list: start { stage(title: &#39;GroovyFX ToDo Demo&#39;, show: true, onCloseRequest: close) { urls.each { k, v -&gt; images[k] = image(url: v, width: 24, height: 24) } scene { gridPane(hgap: 10, vgap: 10, padding: 20) { columnConstraints(minWidth: 80, halignment: &#39;right&#39;) columnConstraints(prefWidth: 250) label(&#39;Task:&#39;, row: 1, column: 0) task = textField(row: 1, column: 1, hgrow: &#39;always&#39;) label(&#39;Category:&#39;, row: 2, column: 0) category = comboBox(items: ToDoCategory.values().toList(), cellFactory: graphicLabelFactory, row: 2, column: 1) label(&#39;Date:&#39;, row: 3, column: 0) date = datePicker(row: 3, column: 1) table = tableView(items: items, row: 4, columnSpan: REMAINING, onMouseClicked: { var item = items[table.selectionModel.selectedIndex.value] task.text = item.task category.value = item.category date.value = item.date }) { tableColumn(property: &#39;task&#39;, text: &#39;Task&#39;, prefWidth: 200) tableColumn(property: &#39;category&#39;, text: &#39;Category&#39;, prefWidth: 80, cellValueFactory: { new ReadOnlyObjectWrapper(it.value) }, cellFactory: graphicCellFactory) tableColumn(property: &#39;date&#39;, text: &#39;Date&#39;, prefWidth: 90, type: Date) } hbox(row: 5, columnSpan: REMAINING, alignment: CENTER, spacing: 10) { button(&#39;Add&#39;, onAction: { if (task.text &amp;&amp; category.value &amp;&amp; date.value) { items &lt;&lt; new ToDoItem(task.text, category.value, date.value) } }) button(&#39;Update&#39;, onAction: { if (task.text &amp;&amp; category.value &amp;&amp; date.value &amp;&amp; !table.selectionModel.empty) { var item = items[table.selectionModel.selectedIndex.value] item.task = task.text item.category = category.value item.date = date.value } }) button(&#39;Remove&#39;, onAction: { if (!table.selectionModel.empty) items.removeAt(table.selectionModel.selectedIndex.value) }) } } } }} We could have somewhat separated the concerns of application logic and display logic by placing the GUI part of this app in an&nbsp;fxml file. For our purposes however, we&#39;ll keep the whole application in one source file and use Groovy&#39;s declarative builder style. Here is the application in use: Further information The code for this application can be found here:&nbsp;https://github.com/paulk-asert/groovyfx-todo. It&#39;s a Groovy 3 and JDK 8 application but see this blog if you want to see Jackson deserialization of classes and records (and Groovy&#39;s emulated records) from CSV files using the most recent Groovy and JDK versions.","headline":"Adventures with GroovyFX","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/groovy/entry/adventures-with-groovyfx"},"url":"http://localhost:4000/groovy/entry/adventures-with-groovyfx"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Adventures with GroovyFX</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-12-13T06:44:34-05:00" itemprop="datePublished">Dec 13, 2022
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Paul King", "login"=>"paulk", "email"=>"paulk@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>This blog looks at a <a href="http://groovyfx.org/" target="_blank">GroovyFX</a> version of a <a href="https://donraab.medium.com/my-weird-and-wonderful-first-adventures-with-javafx-6efe3b1923c8" target="_blank">ToDo application originally written in JavaFX</a>. First we start with a <code>ToDoCategory</code> enum of our ToDo categories:</p>
<p><img src="https://blogs.apache.org/groovy/mediaresource/453d4f49-c4f0-4f77-977e-863d2f8c47d2" alt="TodoEnum.png"></p>
<p>We will have a <code>ToDoItem</code> class containing the todo task, the previously mentioned category and the due date.</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:11pt;"><span style="color:#bbb529;">@Canonical<br></span><span style="color:#bbb529;">@JsonIncludeProperties</span>([<span style="color:#6a8759;">'task'</span>, <span style="color:#6a8759;">'category'</span>, <span style="color:#6a8759;">'date'</span>])<br><span style="color:#bbb529;">@FXBindable<br></span><span style="color:#cc7832;">class </span>ToDoItem {<br>    String <span style="color:#9876aa;">task<br></span><span style="color:#9876aa;">    </span>ToDoCategory <span style="color:#9876aa;">category<br></span><span style="color:#9876aa;">    </span>LocalDate <span style="color:#9876aa;">date<br></span>}<br></pre>
<p>It's annotated with <code>@JsonIncludeProperties</code> to allow easy serialization to/from JSON format, to provide easy persistence, and <code>@FXBindable</code>&nbsp;which eliminates the boilerplate required to define JavaFX properties.</p>
<p>Next, we'll define some helper variables:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:11pt;"><span style="color:#cc7832;">var </span>file = <span style="color:#6a8759;">'todolist.json' </span><span style="color:#cc7832;">as </span>File<br><span style="color:#cc7832;">var </span>mapper = <span style="color:#cc7832;">new </span>ObjectMapper().registerModule(<span style="color:#cc7832;">new </span>JavaTimeModule())<br><span style="color:#cc7832;">var </span>open = <span style="font-weight:bold;">{ </span>mapper.readValue(it, <span style="color:#cc7832;">new </span>TypeReference<List<ToDoItem>>() {}) <span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">var </span>init = file.exists() ? open(file) : []<br><span style="color:#cc7832;">var </span>items = FXCollections.<span style="color:#9876aa;font-style:italic;">observableList</span>(init)<br><span style="color:#cc7832;">var </span>close = <span style="font-weight:bold;">{ </span>mapper.writeValue(file, items) <span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">var </span>table, task, category, date, images = [:]<br><span style="color:#cc7832;">var </span>urls = ToDoCategory.<span style="color:#9876aa;font-style:italic;">values</span>().collectEntries <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span>[it, <span style="color:#6a8759;">"emoji/</span>$<span style="font-weight:bold;">{</span>Integer.<span style="color:#9876aa;font-style:italic;">toHexString</span>(it.<span style="color:#9876aa;">emoji</span>.codePointAt(<span style="color:#6897bb;">0</span>))<span style="font-weight:bold;">}</span><span style="color:#6a8759;">.png"</span>]<br><span style="font-weight:bold;">}<br></span></pre>
<p>Here, <code>mapper</code> serializes and deserializes our top-level domain object (the ToDo list) into JSON using the <a href="https://github.com/FasterXML/jackson" target="_blank">Jackson library</a>. The&nbsp;<code>open</code> and <code>close</code>&nbsp;Closures do the reading and writing respectively.</p>
<p>For a bit of fun and only slightly more complexity, we have included some slightly nicer images in our application. JavaFX's default emoji font rendering is a little sketchy on some platforms and it's not much work to have nice multi-colored images. This is achieved using the icons from&nbsp;<span style="background-color: rgb(245, 245, 245); color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 13px;"><a href="https://github.com/pavlobu/emoji-text-flow-javafx" target="_blank">https://github.com/pavlobu/emoji-text-flow-javafx</a>.</span>&nbsp;The application is perfectly functional without them (and the approximately 20 lines for the&nbsp;<code>cellFactory</code> and <code>cellValueFactory</code> definitions could be elided) but is prettier with the nicer images. We shrunk them to 1/3 their original size but we could certainly make them larger if we felt inclined.</p>
<p>Our application will have a combo box for selecting a ToDo item's category. We'll create a factory for the combo box so that each selection will be a label with both graphic and text components.</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:11pt;"><span style="color:#cc7832;">def </span>graphicLabelFactory = <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">new </span>ListCell<ToDoCategory>() {<br>        <span style="color:#cc7832;">void </span>updateItem(ToDoCategory cat, <span style="color:#cc7832;">boolean </span>empty) {<br>            <span style="color:#cc7832;">super</span>.updateItem(cat, empty)<br>            <span style="color:#cc7832;">if </span>(!empty) {<br>                <span style="color:#9876aa;">graphic </span>= <span style="color:#cc7832;">new </span>Label(cat.name()).tap <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">                    </span><span style="color:#9876aa;">graphic </span>= <span style="color:#cc7832;">new </span>ImageView(images[cat])<br>                <span style="font-weight:bold;">}<br></span><span style="font-weight:bold;">            </span>}<br>        }<br>    }<br><span style="font-weight:bold;">}<br></span></pre>
<p>When displaying our ToDo list, we'll use a table view. So, let's create a factory for table cells that will use the pretty images as a centered graphic.</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:11pt;"><span style="color:#cc7832;">def </span>graphicCellFactory = <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">new </span>TableCell<ToDoItem, ToDoItem>() {<br>        <span style="color:#cc7832;">void </span>updateItem(ToDoItem item, <span style="color:#cc7832;">boolean </span>empty) {<br>            <span style="color:#9876aa;">graphic </span>= empty ? <span style="color:#cc7832;">null </span>: <span style="color:#cc7832;">new </span>ImageView(images[item.<span style="color:#9876aa;">category</span>])<br>            <span style="color:#9876aa;">alignment </span>= Pos.<span style="color:#9876aa;font-style:italic;">CENTER<br></span><span style="color:#9876aa;font-style:italic;">        </span>}<br>    }<br><span style="font-weight:bold;">}<br></span></pre>
<p>Finally, with these definitions out of the way, we can define our GroovyFX application for manipulating our ToDo list:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:11pt;"><span style="color:#9876aa;font-style:italic;">start </span><span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span>stage(<span style="color:#6a8759;">title</span>: <span style="color:#6a8759;">'GroovyFX ToDo Demo'</span>, <span style="color:#6a8759;">show</span>: <span style="color:#cc7832;">true</span>, <span style="color:#6a8759;">onCloseRequest</span>: close) <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">        </span>urls.each <span style="font-weight:bold;">{ </span>k, v <span style="font-weight:bold;">-> </span>images[k] = image(<span style="color:#6a8759;">url</span>: v, <span style="color:#6a8759;">width</span>: <span style="color:#6897bb;">24</span>, <span style="color:#6a8759;">height</span>: <span style="color:#6897bb;">24</span>) <span style="font-weight:bold;">}<br></span><span style="font-weight:bold;">        </span>scene <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">            </span>gridPane(<span style="color:#6a8759;">hgap</span>: <span style="color:#6897bb;">10</span>, <span style="color:#6a8759;">vgap</span>: <span style="color:#6897bb;">10</span>, <span style="color:#6a8759;">padding</span>: <span style="color:#6897bb;">20</span>) <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">                </span>columnConstraints(<span style="color:#6a8759;">minWidth</span>: <span style="color:#6897bb;">80</span>, <span style="color:#6a8759;">halignment</span>: <span style="color:#6a8759;">'right'</span>)<br>                columnConstraints(<span style="color:#6a8759;">prefWidth</span>: <span style="color:#6897bb;">250</span>)<br><br>                label(<span style="color:#6a8759;">'Task:'</span>, <span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">1</span>, <span style="color:#6a8759;">column</span>: <span style="color:#6897bb;">0</span>)<br>                task = textField(<span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">1</span>, <span style="color:#6a8759;">column</span>: <span style="color:#6897bb;">1</span>, <span style="color:#6a8759;">hgrow</span>: <span style="color:#6a8759;">'always'</span>)<br><br>                label(<span style="color:#6a8759;">'Category:'</span>, <span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">2</span>, <span style="color:#6a8759;">column</span>: <span style="color:#6897bb;">0</span>)<br>                category = comboBox(<span style="color:#6a8759;">items</span>: ToDoCategory.<span style="color:#9876aa;font-style:italic;">values</span>().toList(),<br>                        <span style="color:#6a8759;">cellFactory</span>: graphicLabelFactory, <span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">2</span>, <span style="color:#6a8759;">column</span>: <span style="color:#6897bb;">1</span>)<br><br>                label(<span style="color:#6a8759;">'Date:'</span>, <span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">3</span>, <span style="color:#6a8759;">column</span>: <span style="color:#6897bb;">0</span>)<br>                date = datePicker(<span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">3</span>, <span style="color:#6a8759;">column</span>: <span style="color:#6897bb;">1</span>)<br><br>                table = tableView(<span style="color:#6a8759;">items</span>: items, <span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">4</span>, <span style="color:#6a8759;">columnSpan</span>: <span style="color:#9876aa;font-style:italic;">REMAINING</span>,<br>                        <span style="color:#6a8759;">onMouseClicked</span>: <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">                            </span><span style="color:#cc7832;">var </span>item = items[table.selectionModel.selectedIndex.value]<br>                            task.text = item.task<br>                            category.value = item.category<br>                            date.value = item.date<br>                        <span style="font-weight:bold;">}</span>) <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">                    </span>tableColumn(<span style="color:#6a8759;">property</span>: <span style="color:#6a8759;">'task'</span>, <span style="color:#6a8759;">text</span>: <span style="color:#6a8759;">'Task'</span>, <span style="color:#6a8759;">prefWidth</span>: <span style="color:#6897bb;">200</span>)<br>                    tableColumn(<span style="color:#6a8759;">property</span>: <span style="color:#6a8759;">'category'</span>, <span style="color:#6a8759;">text</span>: <span style="color:#6a8759;">'Category'</span>, <span style="color:#6a8759;">prefWidth</span>: <span style="color:#6897bb;">80</span>,<br>                            <span style="color:#6a8759;">cellValueFactory</span>: <span style="font-weight:bold;">{ </span><span style="color:#cc7832;">new </span>ReadOnlyObjectWrapper(it.value) <span style="font-weight:bold;">}</span>,<br>                            <span style="color:#6a8759;">cellFactory</span>: graphicCellFactory)<br>                    tableColumn(<span style="color:#6a8759;">property</span>: <span style="color:#6a8759;">'date'</span>, <span style="color:#6a8759;">text</span>: <span style="color:#6a8759;">'Date'</span>, <span style="color:#6a8759;">prefWidth</span>: <span style="color:#6897bb;">90</span>, <span style="color:#6a8759;">type</span>: Date)<br>                <span style="font-weight:bold;">}<br></span><span style="font-weight:bold;"><br></span><span style="font-weight:bold;">                </span>hbox(<span style="color:#6a8759;">row</span>: <span style="color:#6897bb;">5</span>, <span style="color:#6a8759;">columnSpan</span>: <span style="color:#9876aa;font-style:italic;">REMAINING</span>, <span style="color:#6a8759;">alignment</span>: CENTER, <span style="color:#6a8759;">spacing</span>: <span style="color:#6897bb;">10</span>) <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">                    </span>button(<span style="color:#6a8759;">'Add'</span>, <span style="color:#6a8759;">onAction</span>: <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">                        </span><span style="color:#cc7832;">if </span>(task.text &amp;&amp; category.value &amp;&amp; date.value) {<br>                            items << <span style="color:#cc7832;">new </span>ToDoItem(task.text, category.value, date.value)<br>                        }<br>                    <span style="font-weight:bold;">}</span>)<br>                    button(<span style="color:#6a8759;">'Update'</span>, <span style="color:#6a8759;">onAction</span>: <span style="font-weight:bold;">{</span>
                        <span style="color:#cc7832;">if </span>(task.text &amp;&amp; category.value &amp;&amp; date.value 
                                &amp;&amp; !table.selectionModel.empty) {
                            <span style="color:#cc7832;">var </span>item = items[table.selectionModel.selectedIndex.value]<br>                            item.task = task.text<br>                            item.category = category.value<br>                            item.date = date.value<br>                        }<br>                    <span style="font-weight:bold;">}</span>)<br>                    button(<span style="color:#6a8759;">'Remove'</span>, <span style="color:#6a8759;">onAction</span>: <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">                        </span><span style="color:#cc7832;">if </span>(!table.selectionModel.empty)<br>                            items.removeAt(table.selectionModel.selectedIndex.value)<br>                    <span style="font-weight:bold;">}</span>)<br>                <span style="font-weight:bold;">}<br></span><span style="font-weight:bold;">            }<br></span><span style="font-weight:bold;">        }<br></span><span style="font-weight:bold;">    }<br></span><span style="font-weight:bold;">}<br></span></pre>
<p>We could have somewhat separated the concerns of application logic and display logic by placing the GUI part of this app in an&nbsp;<code>fxml</code> file. For our purposes however, we'll keep the whole application in one source file and use Groovy's declarative builder style.</p>
<p>Here is the application in use:</p>
<p><img src="https://blogs.apache.org/groovy/mediaresource/62c91bfb-6594-4858-8368-e17e518b7c26" alt="TodoScreenshot.png"><br></p>
<h3>Further information</h3>
<p>The code for this application can be found here:&nbsp;<a href="https://github.com/paulk-asert/groovyfx-todo" target="_blank">https://github.com/paulk-asert/groovyfx-todo</a>.</p>
<p>It's a Groovy 3 and JDK 8 application but see this <a href="https://blogs.apache.org/groovy/entry/reading-and-writing-csv-files" target="_blank">blog</a> if you want to see Jackson deserialization of classes and records (and Groovy's emulated records) from CSV files using the most recent Groovy and JDK versions.</p>

  </div><a class="u-url" href="/groovy/entry/adventures-with-groovyfx" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
