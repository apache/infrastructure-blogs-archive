<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Dnsmasq Vulnerabilities Advisory for CloudStack | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Dnsmasq Vulnerabilities Advisory for CloudStack" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Recently, a number of security flaws were recently found in the DNSMasq tool. This tool is used by many systems to provide DNS and DHCP services, including by the CloudStack System VMs. According to Google&rsquo;s investigation into the software, out of seven issues, three &mdash; CVE-2017-14491, CVE-2017-14492, and CVE-2017-14493 &mdash; are remote code execution flaws caused by heap buffer overflow and stack buffer overflow errors through DHCP and DNS vectors. Another issue, CVE-2017-14494, can be exploited to bypass the Address space layout randomization (ASLR) memory protection function, leading to information leaks. In addition, three more bugs, CVE-2017-14495, CVE-2017-14496, and CVE-2017-13704, can lead to denial-of-service (DoS) attacks caused by invalid boundary checks, bug collision, and a coding issue. Affect On CloudStack CloudStack&rsquo;s System VMs use DNSMasq to provide DNS and DHCP services to the guest VMs from the virtual routers. These services are only exposed on the internal guest interface(s) of the virtual routers. Therefore a malicious user could compromise a virtual router to which they have a guest instance attached. The Fix On 9th October, an updated version of DNSMasq was released by the authors of DNSMasq for the Debian Wheezy Operating System which the CloudStack System VMs use. We have created new versions of the System VM templates which should be used to replace your existing System VMs using the procedure described below. A short-term fix for currently running System VMs (if they have internet access) is to log into the System VMs and run: apt-get update apt-get upgrade dnsmasq -y For information on logging into System VMs please see: http://docs.cloudstack.apache.org/en/latest/administration_guide.html?#accessing-system-vms The above procedure will patch existing virtual routers, but should a virtual router be destroyed and recreated or a new virtual router created, the subsequent virtual router will no longer be patched. The full fix is to replace the existing System VM template(s) with the latest patched versions as well as recreating or patch existing virtual routers. System VM Patching Procedure New System VM templates with updated DNSMasq for major CloudStack versions for XenServer, VMware and KVM hypervisors have been built. We advise CloudStack users to upgrade to the appropriate System VM template and either; Patch all existing virtual routers using the procedure above or recreate all virtual routers using the procedure detailed in the link for updating system VM templates (below) For ACS 4.10+: http://download.cloudstack.org/systemvm/4.10/dnsmasq/ For ACS 4.6-4.9: http://download.cloudstack.org/systemvm/4.6/dnsmasq/ The procedure for updating the system VM templates can be found at http://docs.cloudstack.apache.org/projects/cloudstack-administration/en/latest/systemvm.html#enhanced-upgrade-for-virtual-routers." />
<meta property="og:description" content="Recently, a number of security flaws were recently found in the DNSMasq tool. This tool is used by many systems to provide DNS and DHCP services, including by the CloudStack System VMs. According to Google&rsquo;s investigation into the software, out of seven issues, three &mdash; CVE-2017-14491, CVE-2017-14492, and CVE-2017-14493 &mdash; are remote code execution flaws caused by heap buffer overflow and stack buffer overflow errors through DHCP and DNS vectors. Another issue, CVE-2017-14494, can be exploited to bypass the Address space layout randomization (ASLR) memory protection function, leading to information leaks. In addition, three more bugs, CVE-2017-14495, CVE-2017-14496, and CVE-2017-13704, can lead to denial-of-service (DoS) attacks caused by invalid boundary checks, bug collision, and a coding issue. Affect On CloudStack CloudStack&rsquo;s System VMs use DNSMasq to provide DNS and DHCP services to the guest VMs from the virtual routers. These services are only exposed on the internal guest interface(s) of the virtual routers. Therefore a malicious user could compromise a virtual router to which they have a guest instance attached. The Fix On 9th October, an updated version of DNSMasq was released by the authors of DNSMasq for the Debian Wheezy Operating System which the CloudStack System VMs use. We have created new versions of the System VM templates which should be used to replace your existing System VMs using the procedure described below. A short-term fix for currently running System VMs (if they have internet access) is to log into the System VMs and run: apt-get update apt-get upgrade dnsmasq -y For information on logging into System VMs please see: http://docs.cloudstack.apache.org/en/latest/administration_guide.html?#accessing-system-vms The above procedure will patch existing virtual routers, but should a virtual router be destroyed and recreated or a new virtual router created, the subsequent virtual router will no longer be patched. The full fix is to replace the existing System VM template(s) with the latest patched versions as well as recreating or patch existing virtual routers. System VM Patching Procedure New System VM templates with updated DNSMasq for major CloudStack versions for XenServer, VMware and KVM hypervisors have been built. We advise CloudStack users to upgrade to the appropriate System VM template and either; Patch all existing virtual routers using the procedure above or recreate all virtual routers using the procedure detailed in the link for updating system VM templates (below) For ACS 4.10+: http://download.cloudstack.org/systemvm/4.10/dnsmasq/ For ACS 4.6-4.9: http://download.cloudstack.org/systemvm/4.6/dnsmasq/ The procedure for updating the system VM templates can be found at http://docs.cloudstack.apache.org/projects/cloudstack-administration/en/latest/systemvm.html#enhanced-upgrade-for-virtual-routers." />
<link rel="canonical" href="http://localhost:4000/cloudstack/entry/dnsmasq-vulnerabilities-advisory-for-cloudstack" />
<meta property="og:url" content="http://localhost:4000/cloudstack/entry/dnsmasq-vulnerabilities-advisory-for-cloudstack" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-10-13T06:51:12-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Dnsmasq Vulnerabilities Advisory for CloudStack" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2017-10-13T06:51:12-04:00","datePublished":"2017-10-13T06:51:12-04:00","description":"Recently, a number of security flaws were recently found in the DNSMasq tool. This tool is used by many systems to provide DNS and DHCP services, including by the CloudStack System VMs. According to Google&rsquo;s investigation into the software, out of seven issues, three &mdash; CVE-2017-14491, CVE-2017-14492, and CVE-2017-14493 &mdash; are remote code execution flaws caused by heap buffer overflow and stack buffer overflow errors through DHCP and DNS vectors. Another issue, CVE-2017-14494, can be exploited to bypass the Address space layout randomization (ASLR) memory protection function, leading to information leaks. In addition, three more bugs, CVE-2017-14495, CVE-2017-14496, and CVE-2017-13704, can lead to denial-of-service (DoS) attacks caused by invalid boundary checks, bug collision, and a coding issue. Affect On CloudStack CloudStack&rsquo;s System VMs use DNSMasq to provide DNS and DHCP services to the guest VMs from the virtual routers. These services are only exposed on the internal guest interface(s) of the virtual routers. Therefore a malicious user could compromise a virtual router to which they have a guest instance attached. The Fix On 9th October, an updated version of DNSMasq was released by the authors of DNSMasq for the Debian Wheezy Operating System which the CloudStack System VMs use. We have created new versions of the System VM templates which should be used to replace your existing System VMs using the procedure described below. A short-term fix for currently running System VMs (if they have internet access) is to log into the System VMs and run: apt-get update apt-get upgrade dnsmasq -y For information on logging into System VMs please see: http://docs.cloudstack.apache.org/en/latest/administration_guide.html?#accessing-system-vms The above procedure will patch existing virtual routers, but should a virtual router be destroyed and recreated or a new virtual router created, the subsequent virtual router will no longer be patched. The full fix is to replace the existing System VM template(s) with the latest patched versions as well as recreating or patch existing virtual routers. System VM Patching Procedure New System VM templates with updated DNSMasq for major CloudStack versions for XenServer, VMware and KVM hypervisors have been built. We advise CloudStack users to upgrade to the appropriate System VM template and either; Patch all existing virtual routers using the procedure above or recreate all virtual routers using the procedure detailed in the link for updating system VM templates (below) For ACS 4.10+: http://download.cloudstack.org/systemvm/4.10/dnsmasq/ For ACS 4.6-4.9: http://download.cloudstack.org/systemvm/4.6/dnsmasq/ The procedure for updating the system VM templates can be found at http://docs.cloudstack.apache.org/projects/cloudstack-administration/en/latest/systemvm.html#enhanced-upgrade-for-virtual-routers.","headline":"Dnsmasq Vulnerabilities Advisory for CloudStack","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/cloudstack/entry/dnsmasq-vulnerabilities-advisory-for-cloudstack"},"url":"http://localhost:4000/cloudstack/entry/dnsmasq-vulnerabilities-advisory-for-cloudstack"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Dnsmasq Vulnerabilities Advisory for CloudStack</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2017-10-13T06:51:12-04:00" itemprop="datePublished">Oct 13, 2017
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Rohit Yadav", "login"=>"bhaisaab", "email"=>"bhaisaab@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Recently, a number of security flaws were recently found in the DNSMasq tool. This tool is used by many systems to provide DNS and DHCP services, including by the CloudStack System VMs.</p>
<p>According to Google&rsquo;s investigation into the software, out of seven issues, three &mdash; CVE-2017-14491, CVE-2017-14492, and CVE-2017-14493 &mdash; are remote code execution flaws caused by heap buffer overflow and stack buffer overflow errors through DHCP and DNS vectors.</p>
<p>Another issue, CVE-2017-14494, can be exploited to bypass the Address space layout randomization (ASLR) memory protection function, leading to information leaks.</p>
<p>In addition, three more bugs, CVE-2017-14495, CVE-2017-14496, and CVE-2017-13704, can lead to denial-of-service (DoS) attacks caused by invalid boundary checks, bug collision, and a coding issue.</p>
<h2>Affect On CloudStack</h2>
<p>CloudStack&rsquo;s System VMs use DNSMasq to provide DNS and DHCP services to the guest VMs from the virtual routers.  These services are only exposed on the internal guest interface(s) of the virtual routers. Therefore a malicious user could compromise a virtual router to which they have a guest instance attached.</p>
<h2>The Fix</h2>
<p>On 9th October, an updated version of DNSMasq was released by the authors of DNSMasq for the Debian Wheezy Operating System which the CloudStack System VMs use.  We have created new versions of the System VM templates which should be used to replace your existing System VMs using the procedure described below.</p>
<p>A short-term fix for currently running System VMs (if they have internet access) is to log into the System VMs and run:</p>
<p><code><br />
apt-get update <br><br />
apt-get upgrade dnsmasq -y<br />
</code></p>
<p>For information on logging into System VMs please see: http://docs.cloudstack.apache.org/en/latest/administration_guide.html?#accessing-system-vms</p>
<p>The above procedure will patch existing virtual routers, but should a virtual router be destroyed and recreated or a new virtual router created, the subsequent virtual router will no longer be patched.</p>
<p>The full fix is to replace the existing System VM template(s) with the latest patched versions as well as recreating or patch existing virtual routers.</p>
<h2>System VM Patching Procedure</h2>
<p>New System VM templates with updated DNSMasq for major CloudStack versions for XenServer, VMware and KVM hypervisors have been built. We advise CloudStack users to upgrade to the appropriate System VM template and either;</p>
<p>Patch all existing virtual routers using the procedure above or recreate all virtual routers using the procedure detailed in the link for updating system VM templates (below)<br><br />
For ACS 4.10+: http://download.cloudstack.org/systemvm/4.10/dnsmasq/<br><br />
For ACS 4.6-4.9: http://download.cloudstack.org/systemvm/4.6/dnsmasq/</p>
<p>The procedure for updating the system VM templates can be found at http://docs.cloudstack.apache.org/projects/cloudstack-administration/en/latest/systemvm.html#enhanced-upgrade-for-virtual-routers.</p>

  </div><a class="u-url" href="/cloudstack/entry/dnsmasq-vulnerabilities-advisory-for-cloudstack" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
