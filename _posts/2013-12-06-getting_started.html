---
layout: post
status: PUBLISHED
published: true
title: Getting Started with Sentry in Hive
author:
  display_name: Sravya Tirukkovalur
  login: sravya
  email: sravya@apache.org
author_login: sravya
author_email: sravya@apache.org
id: c0ec44d5-dd04-4662-8df6-19d667901e60
date: '2013-12-06 00:57:16 -0500'
categories:
- General
tags: []
comments:
- id: 0
  author: niranjan
  author_email: niranjan.kulkarni@db.com
  author_url: ''
  date: '2014-01-31 17:59:07 -0500'
  content: I can not see the video. Do you have it posted somewhere else too?
- id: 0
  author: ''
  author_email: ''
  author_url: ''
  date: '2015-02-10 07:28:06 -0500'
  content: I can not see the video.Why？？
- id: 0
  author: Worthgram
  author_email: nivivih440@fxmail.ws
  author_url: https://worthgram.com/to-whom-it-may-concern/
  date: '2020-01-02 07:50:38 -0500'
  content: To whom it may concern, this article is written eloquently!
- id: 0
  author: Jassica
  author_email: jassica@gmail.com
  author_url: ''
  date: '2019-05-09 07:19:50 -0400'
  content: I am curious about getting start with Sentry in Hive which has been released
    now and will amaze my friends with this update. Well, I stay updated about such
    news with the help of https://bestwritingclues.com/reviews/assignmentmasters-co-uk-review/
    source which guide me about different tech subjects around the clock.
- id: 0
  author: charlie
  author_email: besafico@4easyemail.com
  author_url: https://styleup365.net/watchcartoononline/
  date: '2020-01-06 10:01:08 -0500'
  content: hgxysaf usagsau hsgdauu vsaaugx hsvhsav vxgavxv vvxav jhsvxh https://styleup365.net/watchcartoononline/
- id: 0
  author: 'gasha '
  author_email: cejoto5665@mail3.top
  author_url: ''
  date: '2020-01-07 10:07:50 -0500'
  content: "security tool can help to prevent the unwanted access to the database.
    But, database monitoring is very important for the database security.<a href=\"https://techleem.com/the-devil-is-a-pa...-season-2/
    \">The devil is a part timer season 2</a>\t"
- id: 0
  author: 192.168.0.1 login
  author_email: alfredmorr@evxmail.net
  author_url: https://192-168-1-254.site/192-168-0-1/
  date: '2019-10-14 05:49:45 -0400'
  content: Nice information and thanks for sharing this to us.
- id: 0
  author: deanal Paul
  author_email: saleenavictor22@gmail.com
  author_url: ''
  date: '2019-11-21 10:36:46 -0500'
  content: when a role is granted to a hive view that has filters in the where clause,
    how does it restrict data in the underlying unix folders? https://essayontime.com.au/can-i-pay-someone-to-do-my-assignment-in-australia
    is the platform where you can find a lot of such great ideas. It is very helpful
    especially for students
- id: 0
  author: read more
  author_email: ru0k0c942x@montokop.pw
  author_url: https://bestappsclub.com/android/freebie-apps/free-instagram-followers
  date: '2019-12-07 14:15:38 -0500'
  content: thanks for this ultimate blog post.
- id: 6
  author: eddie007
  author_email: yadavtheddie007@gmail.com
  author_url: ''
  date: '2019-01-16 06:34:27 -0500'
  content: 'Hi guys if you have any doubt and you think your  instagram account has
    been hacked here http://instahacker.xyz you check your account has been or not
    hack you can also learn how to hack instagram account thank you '
- id: 8
  author: cslovak
  author_email: charles.c.slovak@wellsfargo.com
  author_url: ''
  date: '2014-02-01 18:22:25 -0500'
  content: Will the sentry application work with any other hadoop  distribution
- id: 9
  author: Levi Brereton
  author_email: datasunrise492@gmail.com
  author_url: https://www.datasunrise.com/firewall/hive/
  date: '2017-04-26 05:51:06 -0400'
  content: Thanks for writing this nice blog.Hive Security tool can help to prevent
    the unwanted access to the database. But, database monitoring is very important
    for the database security.
- id: 43
  author: film izle
  author_email: dadadada@gmail.com
  author_url: https://altyazilifilm.live
  date: '2019-06-29 21:00:11 -0400'
  content: "For more information on how to report problems, and to get involved,\r\n"
- id: 50
  author: martin
  author_email: sohime@simplemail.top
  author_url: ''
  date: '2020-01-22 10:17:58 -0500'
  content: <a href="https://buzznor.com/loudtronix-review/">loudtronix</a>
- id: 87
  author: sham
  author_email: sd05162992@softenger.com
  author_url: ''
  date: '2016-08-02 16:49:53 -0400'
  content: "Can I use Apache sentry with Apache Hadoop without cloudera ?\r\n"
- id: 77088300
  author: view private instagram
  author_email: ru0k0c942x@montokop.pw
  author_url: https://crooksandliars.com/user/choochi14
  date: '2020-02-17 03:58:35 -0500'
  content: whom it may concern, this article is written eloquently!
- id: 88007238
  author: trial packs
  author_email: adgelideem1978@gmail.com
  author_url: https://pharmachemicalsonline.com/erectile-dysfunction/trial-packs.html
  date: '2019-07-19 20:22:01 -0400'
  content: love that you took the Stranger Things inspiration and completely made
    it your own. gorgeous stuff This looks really nice!
permalink: sentry/entry/getting_started
---
<p><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> </p>
<p><a href="http://incubator.apache.org/projects/sentry.html">Apache Sentry</a> (incubating) is a highly modular system for providing fine-grained role based authorization to both data and metadata stored on an Apache Hadoop cluster. It currently works out of the box with Apache Hive and Cloudera Impala. In this blog post, you will learn how to use Sentry with Hive.</p>
<p>Sentry uses a policy provider to define the access control to Hive. Sentry currently ships with a file-based policy provider, see below for an example. A single global policy file can be used to control access to an entire HiveServer2 instance, and multiple dependent per database policy files can be linked to the global one. Lets look at the structure of policy file with an example.
  </p>
<p>Global policy file:</p>
<pre>[groups]
admin_group = admin_role
dep1_admin = uri_role

[roles]
admin_role = server=server1
uri_role = hdfs:///ha-nn-uri/data

[databases]
db1 = hdfs://ha-nn-uri/user/hive/sentry/db1.ini
</pre>
<p>Per db policy file: (at hdfs://ha-nn-uri/user/hive/sentry/db1.ini)</p>
<pre>[groups]
dep1_admin = db1_admin_role
dep1_analyst = db1_read_role

[roles]
db1_admin_role = server=server1->db=db1
db1_read_role = server=server1->db=db1->table=*->action=select
</pre>
<p>As you can see above, there are usually three sections in the global policy file:</p>
<ul>
<li>A [groups] section that provides group-to-role mapping</li>
<li>A [roles] section that provides role-to-privileges mapping</li>
<li>A [databases] (optional) section that provides database-to-per-database policy file mapping. This allows for maintaining per-database privileges separately. </li>
</ul>
<p>Sentry provides authorization through a hook in HiveServer2. When a user makes a connection to HiveServer2, it authenticates the connecting user and persists the user information for the session. For the subsequent operations that user performs, Sentry authorizes the operation by mapping the user to the groups he/she belongs to and determining whether the group(s) have necessary privileges on the relevant objects.</p>
<h4> Hive security landscape with Sentry </h4>
<p>Next, lets look at how Sentry fits into the security landscape of Hive. The below infographic shows how different authentication and authorization pieces fit together.</p>
<p> <a href="https://blogs.apache.org/sentry/mediaresource/1554e24d-1365-4feb-9d0d-5832ecb90628"><img src="https://blogs.apache.org/sentry/mediaresource/1554e24d-1365-4feb-9d0d-5832ecb90628" alt="sentry-blog.png" width="339" height="241" align="middle" /></a> <br />
Here are the main points to take away:</p>
<ul>
<li>Sentry requires that HiveServer2 be configured to use strong authentication. HiveServer2 supports Kerberos as well as LDAP (and AD) authentication mechanisms. </li>
<li>At the Sentry authorization level, there are two supported forms of user-group mappings:</li>
<ul>
<li>HadoopGroup mapping, which uses the underlying <a href="http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html#Group_Mapping">Hadoop groups</a></li>
<ul>
<li>Hadoop groups in turn support Shell-based mapping as well as LDAP group mapping. Please note that in case of Sentry with Hive, the mapping of users to groups is performed on the HiveServer2 host</li>
</ul>
<li>LocalGroups, where the users and groups can be defined locally in the policy file using [users] section (for testing purposes only)</li>
</ul>
</ul>
<h4>Demo</h4>
<p>
In this demo, we will be using Kerberos authentication for HiveServer2 with HadoopGroups as the Sentry group provider, which by default uses Shell mapping. We briefly go over Sentry and see how to configure and use it in this configuration. (Note: Cloudera Manager 4.7 and CDH 4.4 are shown here; for future versions, the steps will be similar.)</p>
<p><a href="http://vimeo.com/79936560" target="_blank"><img src="https://blogs.apache.org/sentry/mediaresource/3f01af71-91f4-48a8-9b37-997ecaed2c1b" alt="video_snapshot.png" height="330" width="660" /></a> </p>
<h4>Conclusion</h4>
<p>Sentry brings in fine-grained authorization support for both data and metadata in a Hadoop cluster. It is already being used in production systems to secure the data and provide fine-grained access to its users. It is also integrated with the version of Hive shipping in CDH (upstream contribution is pending), Cloudera Impala, and Cloudera Search. Also, here is a <a href="http://gethue.tumblr.com/post/64916325309/hadoop-tutorial-hive-query-editor-with-hiveserver2-and">short demo</a> if you are interested in using it with Hue.&nbsp;<a href="http://gethue.tumblr.com/post/64916325309/hadoop-tutorial-hive-query-editor-with-hiveserver2-and"></a></p>
