---
layout: post
title: HBase 0.96.0 Released
date: '2013-10-22T00:00:00+00:00'
categories: hbase
---
<span id="docs-internal-guid-71f08d6a-e122-2f0d-0605-944419d8ff99"> 
    <p><i><span style="background-color: transparent; vertical-align: baseline;">by Stack, the 0.96.0 Release Manager</span></i></p> 
    <p><span style="background-color: transparent; font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">Here are some notes on our recent </span><a href="http://www.apache.org/dyn/closer.cgi/hbase/" style="line-height: 1.15;"><span style="font-size: 15px; font-family: Arial; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">hbase-0.96.0 release</span></a><span style="background-color: transparent; font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> (For the complete list of over 2k issues addressed in 0.96.0, see </span><a href="http://goo.gl/NKoDqp" style="line-height: 1.15;"><span style="font-size: 15px; font-family: Arial; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Apache JIRA Release Notes</span></a><span style="line-height: 1.15; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">).</span></p><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">hbase-0.96.0 was more than a year in the making. &nbsp;&nbsp;</span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">It was heralded by three </span><a href="http://hbase.apache.org/book.html#hbase.development.series"><span style="font-family: Arial; color: #1155cc; font-style: italic; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">developer releases</span></a><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> -- 0.95.0, 0.95.1 and 0.95.2 -- and it went through six release candidates before we arrived at our final assembly released on Friday, October 18th, 2013.</span><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span></p><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">The big themes that drove this release gleaned of rough survey of users and our experience with HBase deploys were:</span></p><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <ul style="margin-top: 0pt; margin-bottom: 0pt;"> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Improved stability: A new suite of integration cluster tests (</span><a href="https://issues.apache.org/jira/browse/HBASE-6241"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-6241</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"> </span><a href="https://issues.apache.org/jira/browse/HBASE-6201"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-6201</span></a><span style="vertical-align: baseline; white-space: pre-wrap;">), configurable by node count, data sizing, duration, and “chaos” quotient, turned up loads of bugs around assignment and data views when scanning and fetching. &nbsp;These we fixed in hbase-0.96.0. &nbsp;Table locks added for cross-cluster alterations and cross-row transaction support, enabled on our system tables by default, now have us wide-berth whole classes of problematic states.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Scaling: HBase is being deployed on larger clusters. &nbsp;How we kept schema in the filesystem or our archiving a WAL file at a time when done replicating worked fine on clusters of hundreds of nodes but made for significant friction when we moved to the next scaling level up.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Mean Time To Recovery (MTTR): A sustained effort in HBase and in our substrate, HDFS, narrowed the amount of time data is offline after node outage.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Operability: Many new tools were added to help operators of hbase clusters: from a radical redo of the metrics emissions, through a new UI &nbsp;and exposed hooks for health scripts. &nbsp;It is now possible to trace lagging calls down through the HBase stack (</span><a href="https://issues.apache.org/jira/browse/HBASE-9121"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-9121 Update HTrace to 2.00 and add new example usage</span></a><span style="vertical-align: baseline; white-space: pre-wrap;">) to figure where time is spent and soon, through </span><a href="https://issues.apache.org/jira/browse/HDFS-5274"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HDFS itself</span></a><span style="vertical-align: baseline; white-space: pre-wrap;">, with support for pretty visualizations in </span><a href="https://github.com/twitter/zipkin"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Twitter Zipkin</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"> (See </span><a href="http://files.meetup.com/1350427/HBase%20Meetup%20-%20Zipkin.pptx"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBase Tracing</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"> from a recent meetup).</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Freedom to Evolve: We redid how we persisted everywhere, whether in the filesystem or up into zookeeper, but also how we carry queries and data back and forth over RPC. &nbsp;Where serialization was hand-crafted when we were on Hadoop Writables, we now use generated Google </span><a href="https://code.google.com/p/protobuf/"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">protobufs</span></a><span style="vertical-align: baseline; white-space: pre-wrap;">. &nbsp;Standardizing serialization on protobufs, with well-defined schemas, will make it easier evolving versions of the client and servers independently of each other in a compatible manner without having to take a cluster restart going forward.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Support for hadoop1 and hadoop2: hbase-0.96.0 will run on either. &nbsp;We do not ship a universal binary. &nbsp;Rather you must pick your poison; hbase-0.96.0-hadoop1 or hbase-0.96.0-hadoop2 (Differences in APIs between the two versions of Hadoop forced this delivery format). &nbsp;hadoop2 is far superior to hadoop1 so we encourage you move to it. &nbsp;hadoop2 has improvements that make HBase operation run smoother, facilitates better performance -- e.g. </span><a href="http://archive.cloudera.com/cdh4/cdh/4/hadoop/hadoop-project-dist/hadoop-hdfs/ShortCircuitLocalReads.html"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">secure short-circuit reads</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"> -- as well as fixes that help our MTTR story.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Minimal disturbance to the API: Downstream projects should just work. &nbsp;The API has been cleaned up and divided into user vs developer APIs and all has been annotated using Hadoop’s system for denoting APIs stable, evolving, or private. &nbsp;That said, a load of work was invested making it so APIs were retained. Radical changes in API that were present in the last developer release were undone in late release candidates because of downstreamer feedback.</span></p> 
      </li> 
    </ul><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">Below we dig in on a few of the themes and features shipped in 0.96.0.</span></p><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">Mean Time To Recovery</span></h1> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">HBase guarantees a consistent view by having a single server at a time solely responsible for data. If this server crashes, data is ‘offline’ until another server assumes responsibility. &nbsp;When we talk of improving Mean Time To Recovery in HBase, we mean narrowing the time during which data is offline after a node crash. &nbsp;This offline period is made up of phases: a detection phase, a repair phase, reassignment, and finally, clients noticing the data available in its new location. &nbsp;A fleet of fixes to shrink all of these distinct phases have gone into hbase-0.96.0.</span></p><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">In the detection phase, the default zookeeper session period has been shrunk and a sample watcher script will intercede on server outage and delete the regionservers ephemeral node so the master notices the crashed server missing sooner (</span><a href="https://issues.apache.org/jira/browse/HBASE-5844"><span style="font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-5844 Delete the region servers znode after a regions server crash</span></a><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">)</span><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">. The same goes for the master (</span><a href="https://issues.apache.org/jira/browse/HBASE-5926"><span style="font-size: 15px; font-family: Arial; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-5926 &nbsp;Delete the master znode after a master crash</span></a><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">). At repair time, a running tally makes it so we replay fewer edits cutting replay time (</span><a href="https://issues.apache.org/jira/browse/HBASE-6659"><span style="font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-6659 Port HBASE-6508 Filter out edits at log split time</span></a><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">). &nbsp;A new replay mechanism has also been added (</span><a href="https://issues.apache.org/jira/browse/HBASE-7006"><span style="font-size: 15px; font-family: Arial; color: #1155cc; background-color: #f5f5f5; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7006</span><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"> Distributed log replay</span></a>&nbsp;-- disabled by default<span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">) that speeds recovery by skipping having to persist intermediate files in HDFS. &nbsp;The HBase system table now has its own dedicated WAL, so this critical table can come back before all others (See </span><a href="https://issues.apache.org/jira/browse/HBASE-7213"><span style="font-size: 15px; font-family: Arial; color: #3b73af; background-color: #f5f5f5; vertical-align: baseline; white-space: pre-wrap;">HBASE-7213</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> /</span><a href="https://issues.apache.org/jira/browse/HBASE-8631"><span style="font-size: 15px; font-family: Arial; color: #000000; vertical-align: baseline; white-space: pre-wrap;"> </span><span style="font-size: 15px; font-family: Arial; color: #3b73af; background-color: #f5f5f5; vertical-align: baseline; white-space: pre-wrap;">HBASE-8631</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">). &nbsp;Assignment all around has been speeded up by bulking up operations, removing synchronizations, and multi-threading so operations can run in parallel.</span></p><br /><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">In HDFS, a new notion of ‘staleness’ was introduced (</span><a href="https://issues.apache.org/jira/browse/HDFS-3703"><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HDFS-3703</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">, </span><a href="https://issues.apache.org/jira/browse/HDFS-3912"><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HDFS-3712</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">). &nbsp;On recovery, the namenode will avoid including stale datanodes saving on our having to first timeout against dead nodes before we can make progress (Related, HBase avoids writing a local replica when writing the WAL instead writing all replicas remote out on the cluster; the replica that was on the dead datanode is of no use come recovery time. See </span><a href="https://issues.apache.org/jira/browse/HBASE-6435"><span style="font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-6435 Reading WAL files after a recovery leads to time lost in HDFS timeouts when using dead datanodes</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">). &nbsp;Other fixes, such as </span><a href="https://issues.apache.org/jira/browse/HDFS-4721"><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HDFS-4721 Speed up lease/block recovery when DN fails and a block goes into recovery</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> shorten the time involved assuming ownership of the last, unclosed WAL on server crash.</span></p><br /><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">And there is more to come inside the 0.96.x timeline: e.g. bringing regions online immediately for writes, retained locality when regions come up on the new server because we write replicas using the ‘</span><a href="https://issues.apache.org/jira/browse/HBASE-4755"><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Favored Nodes</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">’ feature, etc.</span></p><br /><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">Be sure to visit the </span><a href="http://hbase.apache.org/book.html#mttr"><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Reference Guide</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> for configurations that enable and tighten MTTR; for instance, ‘staleness’ detection in HDFS needs to be enabled on the HDFS-side. &nbsp;See the Reference Guide for how.</span></p><br /><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-5305"><span style="font-family: 'Trebuchet MS'; color: #1155cc; background-color: transparent; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-5305 Improve cross-version compatibility &amp; upgradeability</span></a><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"></span></h1> 
    <h2 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><span style="font-size: 17px; font-family: 'Trebuchet MS'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Freedom to Evolve</span></h2> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Rather than continue to hand-write serializations as is required when using Hadoop Writables, our serialization means up through hbase-0.94.x, in hbase-0.96.0 we moved the whole shebang over to </span><a href="https://code.google.com/p/protobuf/"><span style="font-size: 15px; font-family: Arial; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">protobufs</span></a><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">. &nbsp;Everywhere HBase persists we now use protobuf serializations whether writing zookeeper znodes, files in HDFS, and whenever we send data over the wire when RPC’ing.</span></p><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Protobufs support evolving types, if careful, making it so we can amend Interfaces in a compatible way going forward, a freedom we were sorely missing -- or to be more precise, was painful to do -- when all serialization was by hand in Hadoop Writables. &nbsp;</span><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">This change breaks compatibility with previous versions.</span><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span></p><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Our RPC is also now described using protobuf Service definitions. &nbsp;Generated stubs are hooked up to a derivative, stripped down version of the Hadoop RPC transport. &nbsp;Our RPC now has a specification. &nbsp;See the Appendix in the Reference Guide.</span></p><br /><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-8015"><span style="font-family: 'Trebuchet MS'; color: #1155cc; background-color: transparent; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-8015</span></a><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"> Support for Namespaces</span></h1> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Our brothers and sisters over at Yahoo! contributed table namespaces, a means of grouping tables similar to mysql’s notion of </span><span style="font-size: 15px; font-family: Arial; background-color: transparent; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">database</span><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">, so they can better manage their multi-tenant deploys. &nbsp;To follow in short order will be quota, resource allocation, and security all by namespace.</span></p><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-4050"><span style="font-family: 'Trebuchet MS'; color: #1155cc; background-color: transparent; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-4050</span></a><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"> Rationalize metrics, metric2 framework implementation</span></h1><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">New metrics have been added and the whole plethora given a radical edit, better categorization, naming and typing; patterns were enforced so the myriad metrics are navigable and look pretty up in JMX. &nbsp;Metrics have been moved up on to the Hadoop 2 Metrics 2 Interfaces. &nbsp;See </span><a href="https://blogs.apache.org/hbase/entry/migration_to_the_new_metrics"><span style="font-size: 15px; font-family: Arial; color: #1155cc; background-color: #f9f7ed; font-weight: bold; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Migration to the New Metrics Hotness – Metrics2</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> for detail.</span></p><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">New Region Balancer</span></h1><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">A new balancer using an algorithm similar to</span><a href="http://en.wikipedia.org/wiki/Simulated_annealing"><span style="font-size: 15px; font-family: Arial; color: #000000; vertical-align: baseline; white-space: pre-wrap;"> </span><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Simulated annealing</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> or</span><a href="http://en.wikipedia.org/wiki/Hill_climbing"><span style="font-size: 15px; font-family: Arial; color: #000000; vertical-align: baseline; white-space: pre-wrap;"> </span><span style="font-size: 15px; font-family: Arial; color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Greedy Hillclimbing</span></a><span style="font-size: 15px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"> factors in not only region count, the only attribute considered by the old balancer, but also region read/write load, locality, among other attributes, coming up with a balance decision.</span><a href="https://issues.apache.org/jira/browse/HBASE-7898"><span style="font-size: 15px; font-family: Arial; color: #3b73af; background-color: #f5f5f5; vertical-align: baseline; white-space: pre-wrap;"></span></a></p> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">Cell</span></h1><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">In hbase-0.96.0, we began work on a long-time effort to move off of our base </span><a href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/KeyValue.html"><span style="font-size: 15px; font-family: Arial; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">KeyValue</span></a><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> type and move instead to use a </span><a href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/Cell.html"><span style="font-size: 15px; font-family: Arial; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Cell</span></a><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> Interface throughout the system. &nbsp;The intent is to open up the way to try different implementations of the base type; different encodings, compressions, and layouts of content to better align with how the machine works. The move, though not yet complete, has already yielded performance gains. &nbsp;The Cell Interface shows through in our hbase-0.96.0 API with the KeyValue references deprecated in 0.96.0. &nbsp;All further work should be internal-only and transparent to the user.</span><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span></p> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">Incompatible changes</span></h1><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <ul style="margin-top: 0pt; margin-bottom: 0pt;"> 
      <li dir="ltr" style="list-style-type: disc; font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-3171"><span style="color: #1155cc; background-color: #f5f5f5; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-3171</span><span style="color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"> ROOT table removed</span></a><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-6706"><span style="color: #1155cc; background-color: #f5f5f5; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-6706</span><span style="color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"> Remove total order partitioner</span></a><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-4451"><span style="color: #1155cc; background-color: #f5f5f5; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-4451</span><span style="color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"> improved zk node naming</span></a><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> (0.96.0 namings are not compat with 0.94)</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Protobuf wire and durable data encoding.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">New directory layout to support namespaces.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-7660"><span style="color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7660 removed support for HFile V1</span></a><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-6553"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-6553 Removed Avro Gateway</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-7315"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7315 HBASE-7263 Remove support for client-side RowLocks</span></a><span style="vertical-align: baseline; white-space: pre-wrap;">. &nbsp;It was a bad idea.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-4336"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-4336 Convert source tree into maven modules.</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"> Downstream projects can use hbase-client and hbase-testing-utility artifacts independent of the rest of HBase.</span></p> 
      </li> 
    </ul><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <h1 dir="ltr" style="line-height: 1.15; margin-top: 10pt; margin-bottom: 0pt;"><span style="font-family: 'Trebuchet MS'; background-color: transparent; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">Miscellaneous</span></h1><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <ul style="margin-top: 0pt; margin-bottom: 0pt;"> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">You can specify permissions to a finer granularity. &nbsp;For example, see </span><a href="https://issues.apache.org/jira/browse/HBASE-7331"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7331 Add access control for region open and close, row locking, and stopping the regionserver</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Similarly, coprocessors can influence a wider expanse of HBase behaviors with added API for interjection.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">A bunch of work was done on compactions and flushes to make them pluggable and the triggers which set them off were made smarter. &nbsp;&nbsp;For example, see:</span></p> 
      </li> 
      <ul style="margin-top: 0pt; margin-bottom: 0pt;"> 
        <li dir="ltr" style="list-style-type: circle; font-family: Arial; vertical-align: baseline;"> 
          <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;"> </span><a href="https://issues.apache.org/jira/browse/HBASE-7678"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7678 HBASE-7667 make storefile management pluggable, together with compaction</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
        </li> 
        <li dir="ltr" style="list-style-type: circle; font-family: Arial; vertical-align: baseline;"> 
          <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-7110"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7110 refactor the compaction selection and config code similarly to 0.89-fb changes</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
        </li> 
        <li dir="ltr" style="list-style-type: circle; font-family: Arial; vertical-align: baseline;"> 
          <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-7603"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7603 HBASE-7519 refactor storefile management in HStore in order to support things like LevelDB-style compactions</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
        </li> 
        <li dir="ltr" style="list-style-type: circle; font-family: Arial; vertical-align: baseline;"> 
          <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-7842"><span style="font-size: 15px; color: #1155cc; background-color: #f5f5f5; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7842</span><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"> Exploring compactor</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
        </li> 
      </ul> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">HBase now runs on Windows</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Default configurations have had an extensive edit so the out-of-the-box experience should be much improved.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">You are encouraged to make use of HDFS short-circuit reads -- it makes for a big speedup in random reads -- and to make use of checksums in HBase. &nbsp;See the reference guide for how to enable.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Replication has been hardened and been made more efficient as more and more users have come to depend upon its operation.</span><span style="font-size: 15px; background-color: transparent; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;Bugs in </span><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Master/master replication have been fixed.</span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Table snapshots, a useful primitive for taking backups for working with the HBase data offline, are available in hbase-0.96.0 (They were also backported to hbase-0.94.x)</span><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">A new client-side library was added to HBase to facilitate common serialization strategies for common types preserving sort-order</span></p> 
      </li> 
      <ul style="margin-top: 0pt; margin-bottom: 0pt;"> 
        <li dir="ltr" style="list-style-type: circle; font-family: Arial; vertical-align: baseline;"> 
          <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-8089"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-8693 HBASE-8089 DataType: provide extensible type API</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
        </li> 
        <li dir="ltr" style="list-style-type: circle; font-family: Arial; vertical-align: baseline;"> 
          <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-8201"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-8201 HBASE-8089 OrderedBytes: an ordered encoding strategy</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
        </li> 
      </ul> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">Support for online region merging: </span><a href="https://issues.apache.org/jira/browse/HBASE-8219"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-8219 Align Offline Merge with Online Merge</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><a href="https://issues.apache.org/jira/browse/HBASE-4391"><span style="color: #1155cc; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-4391 Add ability to start RS as root and call mlockall</span></a><span style="vertical-align: baseline; white-space: pre-wrap;"></span></p> 
      </li> 
      <li dir="ltr" style="list-style-type: disc; font-family: Arial; vertical-align: baseline;"> 
        <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="vertical-align: baseline; white-space: pre-wrap;">An experimental </span><a href="https://issues.apache.org/jira/browse/HBASE-7404"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HBASE-7404 Bucket Cache:A solution about CMS, Heap Fragment and Big Cache on HBASE</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> was added,</span></p> 
      </li> 
    </ul><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">You will need to restart your cluster to come up on hbase-0.96.0. &nbsp;After deploying the binaries, run a checker script that will look for the existence of old format HFiles no longer supported in hbase-0.96.0. &nbsp;The script will warn you of their presence and will ask you to compact them away. &nbsp;This can be done without disturbing current serving. &nbsp;Once all have been purged, stop your cluster, and run a small migration script. The HBase migration script will upgrade the content of zookeeper and rearrange the content of the filesystem to support the new table namespaces feature. &nbsp;The migration should take a few minutes at most. &nbsp;Restart. &nbsp;See </span><a href="http://hbase.apache.org/book/upgrade0.96.html"><span style="font-size: 15px; font-family: Arial; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Upgrading from 0.94.x to 0.96.x</span></a><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> for details.</span></p><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">From here on out, 0.96.x point releases with bug fixes only will start showing up on a roughly monthly basis after the model established in our hbase-0.94 line. &nbsp;hbase-0.98.0, our next major version, is scheduled to follow in short order (months). &nbsp;You will be able to do a rolling restart off 0.96.x and up onto 0.98.0. &nbsp;Guaranteed.</span></p><br /><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span> 
    <p dir="ltr" style="line-height: 1.15; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">A big thanks goes out to all who helped make hbase-0.96.0 possible.</span><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span></p> 
    <p><br /><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"></span><span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;">This release is dedicated to Shaneal Manek, HBase contributor.</span></p></span> 
  <p>Download your hbase-0.96.0 <a href="http://www.apache.org/dyn/closer.cgi/hbase/">here</a>.</p>
