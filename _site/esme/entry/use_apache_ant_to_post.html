<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Use Apache Ant to post to Apache ESME | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Use Apache Ant to post to Apache ESME" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Apache ESME has an integration with&nbsp;Apache Ant. It is now possible to send messages to Apache ESME that describe the progress of your build steps. This is especially useful when Apache ESME is being used in development projects where individual developers can be made aware of the status of various-build related actions. For example, a development team could be informed that a build is broken or if it is successful. &nbsp; Setup Install Apache Ant Install Apache Maven Download the Apache Commons packages&nbsp;&quot;Codec&quot;&nbsp;and&nbsp;Logger.&nbsp;We also need&nbsp;Apache &quot;Httpclient&quot;&nbsp;. Please note that we are currently using the legacy 3.1&nbsp;version of the HTTP Client.&nbsp; Check-out the ESME java client:&nbsp;https://svn.apache.org/repos/asf/esme/trunk/esme-java-client Perform a maven build in this directory with the following command &quot;mvn compile package -Dmaven.test.skip=true&quot; . This will create a jar file &quot;esme-rest-api-0.1.jar&quot; in the target directory.&nbsp; Create lib directory and copy &quot;rest-api-0.1-SNAPSHOT.jar&quot;, &quot;commons-codec-1.2.jar&quot;, &quot;commons-httpclient-3.1.jar&quot; and &quot;commons-logging-1.1.1.jar&quot; into this directory.&nbsp; Create&nbsp;src&nbsp;directory and copy the &quot;EsmeAntTask.java&quot; file to this directory Change the build.xml file to point to the appropriate directories Change the token in the &quot;esme&quot; target in the build.xml file to a correct token. Change the proxy in the &quot;esme&quot; target in the build.xml file to a correct proxy. call&nbsp;ant dist esme&nbsp;to test the application Here is what the result looks like: &lt;/p&gt; Note: We wrote a version of this blog two years ago on our old blog. I&#39;ve updated it and added an image plus more details.&nbsp; &lt;/a&gt; &lt;/p&gt;&lt;/div&gt; Build.xml &lt;project name=&quot;EsmeViaAnt&quot; default=&quot;dist&quot; basedir=&quot;.&quot;&gt; &lt;property name=&quot;src&quot; location=&quot;src&quot;/&gt; &lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt; &lt;property name=&quot;dist&quot; location=&quot;dist&quot;/&gt; &lt;path id=&quot;project.class.path&quot;&gt; &lt;pathelement path=&quot;./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar&quot;/&gt; &lt;/path&gt; &lt;target name=&quot;init&quot;&gt; &lt;mkdir dir=&quot;${build}&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile the source &quot; &gt; &lt;javac srcdir=&quot;${src}&quot; destdir=&quot;${build}&quot;&gt; &lt;classpath refid=&quot;project.class.path&quot;/&gt; &lt;/javac&gt; &lt;/target&gt; &lt;target name=&quot;dist&quot; depends=&quot;compile&quot; description=&quot;generate the distribution&quot; &gt; &lt;mkdir dir=&quot;${dist}/lib&quot;/&gt; &lt;jar jarfile=&quot;${dist}/lib/EsmeViaAnt.jar&quot; basedir=&quot;${build}&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;esme&quot; description=&quot;Send Esme&quot; &gt; &lt;java fork=&quot;true&quot; classname=&quot;EsmeAntTask&quot;&gt; &lt;arg value=&quot;http://esmecloudserverapache.dickhirsch.staxapps.net/api&quot;/&gt; &lt;arg value=&quot;31EL0R0M15NTD2LSOS0BKC5Y0P5JOVAZ6&quot;/&gt; &lt;arg value=&quot;myproxy:81&quot;/&gt; &lt;arg value=&quot;A message from the ant build process&quot;/&gt; &lt;/span&gt; &lt;pathelement path=&quot;./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar&quot;/&gt; &lt;/classpath&gt; &lt;/java&gt; &lt;/target&gt; &lt;/project&gt; EsmeAntTask java classimport org.apache.esme.api.EsmeRestApi; import org.apache.esme.model.Message; public class EsmeAntTask { public static void main (String[] args) { String apiUrl; String authToken; String localProxy; String message; EsmeRestApi esme; apiUrl = args[0]; authToken = args[1]; localProxy = args[2]; message = args[3]; try { esme = new EsmeRestApi(apiUrl); if ((localProxy != null) &amp;&amp; !(&quot;&quot;.equals(localProxy))) { // Split proxyHost:port into two parts String[] proxy = localProxy.split(&quot;:&quot;); esme.setProxy(proxy[0], Integer.parseInt(proxy[1])); } esme.login(authToken); Message esmeMsg = new Message(); esmeMsg.setBody(message); String[] tags = new String[1]; tags[0] = &quot;Ant Task&quot;; esmeMsg.setTags(tags); esmeMsg.setSource(&quot;Ant&quot;); esme.sendMsg(esmeMsg); } catch (Exception e) {} } &lt;/span&gt; }&nbsp; &nbsp; &lt;/div&gt;" />
<meta property="og:description" content="Apache ESME has an integration with&nbsp;Apache Ant. It is now possible to send messages to Apache ESME that describe the progress of your build steps. This is especially useful when Apache ESME is being used in development projects where individual developers can be made aware of the status of various-build related actions. For example, a development team could be informed that a build is broken or if it is successful. &nbsp; Setup Install Apache Ant Install Apache Maven Download the Apache Commons packages&nbsp;&quot;Codec&quot;&nbsp;and&nbsp;Logger.&nbsp;We also need&nbsp;Apache &quot;Httpclient&quot;&nbsp;. Please note that we are currently using the legacy 3.1&nbsp;version of the HTTP Client.&nbsp; Check-out the ESME java client:&nbsp;https://svn.apache.org/repos/asf/esme/trunk/esme-java-client Perform a maven build in this directory with the following command &quot;mvn compile package -Dmaven.test.skip=true&quot; . This will create a jar file &quot;esme-rest-api-0.1.jar&quot; in the target directory.&nbsp; Create lib directory and copy &quot;rest-api-0.1-SNAPSHOT.jar&quot;, &quot;commons-codec-1.2.jar&quot;, &quot;commons-httpclient-3.1.jar&quot; and &quot;commons-logging-1.1.1.jar&quot; into this directory.&nbsp; Create&nbsp;src&nbsp;directory and copy the &quot;EsmeAntTask.java&quot; file to this directory Change the build.xml file to point to the appropriate directories Change the token in the &quot;esme&quot; target in the build.xml file to a correct token. Change the proxy in the &quot;esme&quot; target in the build.xml file to a correct proxy. call&nbsp;ant dist esme&nbsp;to test the application Here is what the result looks like: &lt;/p&gt; Note: We wrote a version of this blog two years ago on our old blog. I&#39;ve updated it and added an image plus more details.&nbsp; &lt;/a&gt; &lt;/p&gt;&lt;/div&gt; Build.xml &lt;project name=&quot;EsmeViaAnt&quot; default=&quot;dist&quot; basedir=&quot;.&quot;&gt; &lt;property name=&quot;src&quot; location=&quot;src&quot;/&gt; &lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt; &lt;property name=&quot;dist&quot; location=&quot;dist&quot;/&gt; &lt;path id=&quot;project.class.path&quot;&gt; &lt;pathelement path=&quot;./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar&quot;/&gt; &lt;/path&gt; &lt;target name=&quot;init&quot;&gt; &lt;mkdir dir=&quot;${build}&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile the source &quot; &gt; &lt;javac srcdir=&quot;${src}&quot; destdir=&quot;${build}&quot;&gt; &lt;classpath refid=&quot;project.class.path&quot;/&gt; &lt;/javac&gt; &lt;/target&gt; &lt;target name=&quot;dist&quot; depends=&quot;compile&quot; description=&quot;generate the distribution&quot; &gt; &lt;mkdir dir=&quot;${dist}/lib&quot;/&gt; &lt;jar jarfile=&quot;${dist}/lib/EsmeViaAnt.jar&quot; basedir=&quot;${build}&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;esme&quot; description=&quot;Send Esme&quot; &gt; &lt;java fork=&quot;true&quot; classname=&quot;EsmeAntTask&quot;&gt; &lt;arg value=&quot;http://esmecloudserverapache.dickhirsch.staxapps.net/api&quot;/&gt; &lt;arg value=&quot;31EL0R0M15NTD2LSOS0BKC5Y0P5JOVAZ6&quot;/&gt; &lt;arg value=&quot;myproxy:81&quot;/&gt; &lt;arg value=&quot;A message from the ant build process&quot;/&gt; &lt;/span&gt; &lt;pathelement path=&quot;./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar&quot;/&gt; &lt;/classpath&gt; &lt;/java&gt; &lt;/target&gt; &lt;/project&gt; EsmeAntTask java classimport org.apache.esme.api.EsmeRestApi; import org.apache.esme.model.Message; public class EsmeAntTask { public static void main (String[] args) { String apiUrl; String authToken; String localProxy; String message; EsmeRestApi esme; apiUrl = args[0]; authToken = args[1]; localProxy = args[2]; message = args[3]; try { esme = new EsmeRestApi(apiUrl); if ((localProxy != null) &amp;&amp; !(&quot;&quot;.equals(localProxy))) { // Split proxyHost:port into two parts String[] proxy = localProxy.split(&quot;:&quot;); esme.setProxy(proxy[0], Integer.parseInt(proxy[1])); } esme.login(authToken); Message esmeMsg = new Message(); esmeMsg.setBody(message); String[] tags = new String[1]; tags[0] = &quot;Ant Task&quot;; esmeMsg.setTags(tags); esmeMsg.setSource(&quot;Ant&quot;); esme.sendMsg(esmeMsg); } catch (Exception e) {} } &lt;/span&gt; }&nbsp; &nbsp; &lt;/div&gt;" />
<link rel="canonical" href="http://localhost:4000/esme/entry/use_apache_ant_to_post" />
<meta property="og:url" content="http://localhost:4000/esme/entry/use_apache_ant_to_post" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-01-18T11:34:31-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Use Apache Ant to post to Apache ESME" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2011-01-18T11:34:31-05:00","datePublished":"2011-01-18T11:34:31-05:00","description":"Apache ESME has an integration with&nbsp;Apache Ant. It is now possible to send messages to Apache ESME that describe the progress of your build steps. This is especially useful when Apache ESME is being used in development projects where individual developers can be made aware of the status of various-build related actions. For example, a development team could be informed that a build is broken or if it is successful. &nbsp; Setup Install Apache Ant Install Apache Maven Download the Apache Commons packages&nbsp;&quot;Codec&quot;&nbsp;and&nbsp;Logger.&nbsp;We also need&nbsp;Apache &quot;Httpclient&quot;&nbsp;. Please note that we are currently using the legacy 3.1&nbsp;version of the HTTP Client.&nbsp; Check-out the ESME java client:&nbsp;https://svn.apache.org/repos/asf/esme/trunk/esme-java-client Perform a maven build in this directory with the following command &quot;mvn compile package -Dmaven.test.skip=true&quot; . This will create a jar file &quot;esme-rest-api-0.1.jar&quot; in the target directory.&nbsp; Create lib directory and copy &quot;rest-api-0.1-SNAPSHOT.jar&quot;, &quot;commons-codec-1.2.jar&quot;, &quot;commons-httpclient-3.1.jar&quot; and &quot;commons-logging-1.1.1.jar&quot; into this directory.&nbsp; Create&nbsp;src&nbsp;directory and copy the &quot;EsmeAntTask.java&quot; file to this directory Change the build.xml file to point to the appropriate directories Change the token in the &quot;esme&quot; target in the build.xml file to a correct token. Change the proxy in the &quot;esme&quot; target in the build.xml file to a correct proxy. call&nbsp;ant dist esme&nbsp;to test the application Here is what the result looks like: &lt;/p&gt; Note: We wrote a version of this blog two years ago on our old blog. I&#39;ve updated it and added an image plus more details.&nbsp; &lt;/a&gt; &lt;/p&gt;&lt;/div&gt; Build.xml &lt;project name=&quot;EsmeViaAnt&quot; default=&quot;dist&quot; basedir=&quot;.&quot;&gt; &lt;property name=&quot;src&quot; location=&quot;src&quot;/&gt; &lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt; &lt;property name=&quot;dist&quot; location=&quot;dist&quot;/&gt; &lt;path id=&quot;project.class.path&quot;&gt; &lt;pathelement path=&quot;./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar&quot;/&gt; &lt;/path&gt; &lt;target name=&quot;init&quot;&gt; &lt;mkdir dir=&quot;${build}&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile the source &quot; &gt; &lt;javac srcdir=&quot;${src}&quot; destdir=&quot;${build}&quot;&gt; &lt;classpath refid=&quot;project.class.path&quot;/&gt; &lt;/javac&gt; &lt;/target&gt; &lt;target name=&quot;dist&quot; depends=&quot;compile&quot; description=&quot;generate the distribution&quot; &gt; &lt;mkdir dir=&quot;${dist}/lib&quot;/&gt; &lt;jar jarfile=&quot;${dist}/lib/EsmeViaAnt.jar&quot; basedir=&quot;${build}&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;esme&quot; description=&quot;Send Esme&quot; &gt; &lt;java fork=&quot;true&quot; classname=&quot;EsmeAntTask&quot;&gt; &lt;arg value=&quot;http://esmecloudserverapache.dickhirsch.staxapps.net/api&quot;/&gt; &lt;arg value=&quot;31EL0R0M15NTD2LSOS0BKC5Y0P5JOVAZ6&quot;/&gt; &lt;arg value=&quot;myproxy:81&quot;/&gt; &lt;arg value=&quot;A message from the ant build process&quot;/&gt; &lt;/span&gt; &lt;pathelement path=&quot;./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar&quot;/&gt; &lt;/classpath&gt; &lt;/java&gt; &lt;/target&gt; &lt;/project&gt; EsmeAntTask java classimport org.apache.esme.api.EsmeRestApi; import org.apache.esme.model.Message; public class EsmeAntTask { public static void main (String[] args) { String apiUrl; String authToken; String localProxy; String message; EsmeRestApi esme; apiUrl = args[0]; authToken = args[1]; localProxy = args[2]; message = args[3]; try { esme = new EsmeRestApi(apiUrl); if ((localProxy != null) &amp;&amp; !(&quot;&quot;.equals(localProxy))) { // Split proxyHost:port into two parts String[] proxy = localProxy.split(&quot;:&quot;); esme.setProxy(proxy[0], Integer.parseInt(proxy[1])); } esme.login(authToken); Message esmeMsg = new Message(); esmeMsg.setBody(message); String[] tags = new String[1]; tags[0] = &quot;Ant Task&quot;; esmeMsg.setTags(tags); esmeMsg.setSource(&quot;Ant&quot;); esme.sendMsg(esmeMsg); } catch (Exception e) {} } &lt;/span&gt; }&nbsp; &nbsp; &lt;/div&gt;","headline":"Use Apache Ant to post to Apache ESME","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/esme/entry/use_apache_ant_to_post"},"url":"http://localhost:4000/esme/entry/use_apache_ant_to_post"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Use Apache Ant to post to Apache ESME</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2011-01-18T11:34:31-05:00" itemprop="datePublished">Jan 18, 2011
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Richard Hirsch", "login"=>"rhirsch", "email"=>"rhirsch@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p style="line-height: 13pt; margin-top: 10px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; "><span style="font-weight: normal; ">Apache ESME has an integration with&nbsp;<a href="http://ant.apache.org/" class="external-link" rel="nofollow">Apache Ant</a>. It is now possible to send messages to Apache ESME that describe the progress of your build steps. This is especially useful when Apache ESME is being used in development projects where </span><b>individual </b>developers can be made aware of the status of various-build related actions. For example, a development team could be informed that a build is broken or if it is successful. &nbsp;</p>
<h2>Setup</h2>
<h4 style="line-height: normal; font-weight: bold; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 25px; margin-right: 0px; margin-bottom: 4px; margin-left: 0px; "><a name="AntClient-Setup"></a></h4>
<ol style="line-height: 13pt; list-style-type: decimal; ">
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Install Apache Ant</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Install Apache Maven</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Download the Apache Commons packages&nbsp;<a href="http://commons.apache.org/codec/" class="external-link" rel="nofollow">"Codec"</a>&nbsp;and&nbsp;<a href="http://commons.apache.org/logging/download_logging.cgi" class="external-link" rel="nofollow">Logger</a>.&nbsp;We also need&nbsp;<a href="http://hc.apache.org/" class="external-link" rel="nofollow">Apache "Httpclient</a>"&nbsp;. Please note that we are currently using the legacy 3.1&nbsp;version of the HTTP Client.&nbsp;</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Check-out the ESME java client:&nbsp;<a href="https://svn.apache.org/repos/asf/esme/trunk/esme-java-client_" class="external-link" rel="nofollow">https://svn.apache.org/repos/asf/esme/trunk/esme-java-client</a></li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Perform a maven build in this directory with the following command "<em>mvn compile package -Dmaven.test.skip=true</em>" . This will create a jar file "esme-rest-api-0.1.jar" in the target directory.&nbsp;</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Create <i>lib </i>directory and copy "rest-api-0.1-SNAPSHOT.jar", "commons-codec-1.2.jar", "commons-httpclient-3.1.jar" and "commons-logging-1.1.1.jar" into this directory.&nbsp;</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Create&nbsp;<em>src</em>&nbsp;directory and copy the "EsmeAntTask.java" file to this directory</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Change the build.xml file to point to the appropriate directories</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Change the token in the "esme" target in the build.xml file to a correct token.</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">Change the proxy in the "esme" target in the build.xml file to a correct proxy.</li>
<li style="line-height: 13pt; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ">call&nbsp;<em>ant dist esme</em>&nbsp;to test the application</li>
</ol>
<div>
<p><span style="line-height: 17px; ">Here is what the result looks like:</span></p>
<p><a href="https://blogs.apache.org/esme/mediaresource/d4d6de99-366b-49f3-ad5b-4bbbb35949c3"><img src="https://blogs.apache.org/esme/mediaresource/d4d6de99-366b-49f3-ad5b-4bbbb35949c3?t=true" alt="ant blog.jpg" /></a></p>
<p><a href="https://blogs.apache.org/esme/mediaresource/d4d6de99-366b-49f3-ad5b-4bbbb35949c3"> </p>
<p><b>Note</b>: We wrote a version of this blog two years ago on our old blog. I've updated it and added an image plus more details.&nbsp;</p>
<p></a> </p>
</p></div>
<h2><span style="line-height: 17px; ">Build.xml</span></h2>
<div>
<pre class="code-xml" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; text-align: left; overflow-x: auto; overflow-y: auto; direction: ltr; "><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><project name=<span class="code-quote" style=" background-color: inherit; ">"EsmeViaAnt"</span> default=<span class="code-quote" style=" background-color: inherit; ">"dist"</span> basedir=<span class="code-quote" style=" background-color: inherit; ">"."</span>></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><span class="code-comment" style=" background-color: inherit; "><!-- set global properties for this build --></span></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><property name=<span class="code-quote" style=" background-color: inherit; ">"src"</span> location=<span class="code-quote" style=" background-color: inherit; ">"src"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><property name=<span class="code-quote" style=" background-color: inherit; ">"build"</span> location=<span class="code-quote" style=" background-color: inherit; ">"build"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><property name=<span class="code-quote" style=" background-color: inherit; ">"dist"</span>  location=<span class="code-quote" style=" background-color: inherit; ">"dist"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">

    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><path id=<span class="code-quote" style=" background-color: inherit; ">"project.class.path"</span>></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><pathelement path=<span class="code-quote" style=" background-color: inherit; ">"./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></path></span><span class="Apple-style-span" style="line-height: 1.3;">


  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><target name=<span class="code-quote" style=" background-color: inherit; ">"init"</span>></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><span class="code-comment" style=" background-color: inherit; "><!-- Create the time stamp --></span></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><tstamp/></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><span class="code-comment" style=" background-color: inherit; "><!-- Create the build directory structure used by compile --></span></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><mkdir dir=<span class="code-quote" style=" background-color: inherit; ">"${build}"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></target></span><span class="Apple-style-span" style="line-height: 1.3;">

  <target name=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"compile"</span><span class="Apple-style-span" style="line-height: 1.3;"> depends=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"init"</span><span class="Apple-style-span" style="line-height: 1.3;">
        description=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"compile the source "</span><span class="Apple-style-span" style="line-height: 1.3;"> >
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><span class="code-comment" style=" background-color: inherit; "><!-- Compile the java code from ${src} into ${build} --></span></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><javac srcdir=<span class="code-quote" style=" background-color: inherit; ">"${src}"</span> destdir=<span class="code-quote" style=" background-color: inherit; ">"${build}"</span>></span><span class="Apple-style-span" style="line-height: 1.3;">
       </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><classpath refid=<span class="code-quote" style=" background-color: inherit; ">"project.class.path"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></javac></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></target></span><span class="Apple-style-span" style="line-height: 1.3;">

  <target name=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"dist"</span><span class="Apple-style-span" style="line-height: 1.3;"> depends=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"compile"</span><span class="Apple-style-span" style="line-height: 1.3;">
        description=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"generate the distribution"</span><span class="Apple-style-span" style="line-height: 1.3;"> >
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><span class="code-comment" style=" background-color: inherit; "><!-- Create the distribution directory --></span></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><mkdir dir=<span class="code-quote" style=" background-color: inherit; ">"${dist}/lib"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">

    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><span class="code-comment" style=" background-color: inherit; "><!-- Put everything in ${build} into the jar file --></span></span><span class="Apple-style-span" style="line-height: 1.3;">
    </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><jar jarfile=<span class="code-quote" style=" background-color: inherit; ">"${dist}/lib/EsmeViaAnt.jar"</span> basedir=<span class="code-quote" style=" background-color: inherit; ">"${build}"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></target></span><span class="Apple-style-span" style="line-height: 1.3;">

  <target name=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"esme"</span><span class="Apple-style-span" style="line-height: 1.3;">
        description=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"Send Esme"</span><span class="Apple-style-span" style="line-height: 1.3;"> >
        <java fork=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"true"</span><span class="Apple-style-span" style="line-height: 1.3;">
         classname=</span><span class="code-quote" style="background-color: inherit; line-height: 1.3; ">"EsmeAntTask"</span><span class="Apple-style-span" style="line-height: 1.3;">>
         </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><arg value=<span class="code-quote" style=" background-color: inherit; ">"http://esmecloudserverapache.dickhirsch.staxapps.net/api"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
         </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><arg value=<span class="code-quote" style=" background-color: inherit; ">"31EL0R0M15NTD2LSOS0BKC5Y0P5JOVAZ6"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
         </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><arg value=<span class="code-quote" style=" background-color: inherit; ">"myproxy:81"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
         </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><arg value=<span class="code-quote" style=" background-color: inherit; ">"A message from the ant build process"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
         </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><classpath></span><span class="Apple-style-span" style="line-height: 1.3;">
           </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "><pathelement path=<span class="code-quote" style=" background-color: inherit; ">"./dist/lib/EsmeViaAnt.jar:./lib/esme-rest-api-0.1.jar:./lib/commons-codec-1.4.jar:./lib/commons-logging-1.1.1.jar:./lib/commons-httpclient-3.1.jar"</span>/></span><span class="Apple-style-span" style="line-height: 1.3;">
         </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></classpath></span><span class="Apple-style-span" style="line-height: 1.3;">

       </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></java></span><span class="Apple-style-span" style="line-height: 1.3;">
  </span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></target></span><span class="Apple-style-span" style="line-height: 1.3;">

</span><span class="code-tag" style="background-color: inherit; line-height: 1.3; "></project></span><span class="Apple-style-span" style="line-height: 1.3;">
</span><h2><span class="Apple-style-span" style="line-height: 17px; white-space: normal;">EsmeAntTask java class</span></h2><span class="Apple-style-span" style="line-height: 17px; white-space: normal; "><pre class="code-java" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; text-align: left; overflow-x: auto; overflow-y: auto; 'Courier New', Courier, monospace; line-height: 1.3; "><span class="code-keyword" style=" background-color: inherit; ">import</span> org.apache.esme.api.EsmeRestApi;
<span class="code-keyword" style=" background-color: inherit; ">import</span> org.apache.esme.model.Message;

<span class="code-keyword" style=" background-color: inherit; ">public</span> class EsmeAntTask
{

<span class="code-keyword" style=" background-color: inherit; ">public</span> <span class="code-keyword" style=" background-color: inherit; ">static</span> void main (<span class="code-object" style=" background-color: inherit; ">String</span>[] args) {

 <span class="code-object" style=" background-color: inherit; ">String</span> apiUrl;
 <span class="code-object" style=" background-color: inherit; ">String</span> authToken;
 <span class="code-object" style=" background-color: inherit; ">String</span> localProxy;
 <span class="code-object" style=" background-color: inherit; ">String</span> message;
 EsmeRestApi esme;

 apiUrl = args[0];
 authToken = args[1];
 localProxy = args[2];
 message = args[3];

 <span class="code-keyword" style=" background-color: inherit; ">try</span> {

         esme = <span class="code-keyword" style=" background-color: inherit; ">new</span> EsmeRestApi(apiUrl);

         <span class="code-keyword" style=" background-color: inherit; ">if</span> ((localProxy != <span class="code-keyword" style=" background-color: inherit; ">null</span>) &amp;&amp; !("".equals(localProxy)))
         {
                <span class="code-comment" style=" background-color: inherit; ">// Split proxyHost:port into two parts
</span>                <span class="code-object" style=" background-color: inherit; ">String</span>[] proxy = localProxy.split(<span class="code-quote" style=" background-color: inherit; ">":"</span>);
                esme.setProxy(proxy[0], <span class="code-object" style=" background-color: inherit; ">Integer</span>.parseInt(proxy[1]));
         }

         esme.login(authToken);

         Message esmeMsg = <span class="code-keyword" style=" background-color: inherit; ">new</span> Message();

         esmeMsg.setBody(message);

         <span class="code-object" style=" background-color: inherit; ">String</span>[] tags = <span class="code-keyword" style=" background-color: inherit; ">new</span> <span class="code-object" style=" background-color: inherit; ">String</span>[1];
         tags[0] = <span class="code-quote" style=" background-color: inherit; ">"Ant Task"</span>;

         esmeMsg.setTags(tags);

         esmeMsg.setSource(<span class="code-quote" style=" background-color: inherit; ">"Ant"</span>);

         esme.sendMsg(esmeMsg);
 }
 <span class="code-keyword" style=" background-color: inherit; ">catch</span> (Exception e) {}
 }
</pre>
<p></span>
<p style="line-height: 1.3; "><span class="Apple-style-span" style="'Courier New', Courier, monospace; ">}</span>&nbsp;</p>
<p>&nbsp;</p>
<p><b><br />
</b></p>
</p></div>

  </div><a class="u-url" href="/esme/entry/use_apache_ant_to_post" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
