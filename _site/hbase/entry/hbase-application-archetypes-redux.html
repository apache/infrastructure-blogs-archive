<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>HBASE APPLICATION ARCHETYPES REDUX (Part 1 of 2) | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="HBASE APPLICATION ARCHETYPES REDUX (Part 1 of 2)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="by Robert Yokota, HBase Contributor &lt;/p&gt; (This post originally appeared on Robert&#39;s personal blog. It is reposted here as a two-parter. The second-part can be found here.) &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;At Yammer, we&rsquo;ve transitioned away from&nbsp;polyglot persistence to persistence consolidation. In a microservice architecture, the principle that each microservice should be responsible for its own data had led to a proliferation of different types of data stores at Yammer. This in turn led to multiple efforts to make sure that each data store could be easily used, monitored, operationalized, and maintained. In the end, we decided it would be more efficient, both architecturally and organizationally, to reduce the number of data store types in use at Yammer to as few as possible.&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Today HBase is the primary data store for non-relational data at Yammer (we use PostgreSQL for relational data). &nbsp;Microservices are still responsible for their own data, but the data is segregated by cluster boundaries or mechanisms within the data store itself (such as HBase namespaces or PostgreSQL schemas).&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;HBase was chosen for a number of reasons, including its performance, scalability, reliability, its support for strong consistency, and its ability to support a wide variety of data models. &nbsp;At Yammer we have a number of services that rely on HBase for persistence in production:&lt;/p&gt; &lt;ul style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em 3em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; list-style-position: initial; list-style-image: initial; color: #333333;&quot;&gt; Feedie, a feeds service RoyalMail, an inbox service Ocular, for tracking messages that a user has viewed Streamie, for storing activity streams Prankie, a ranking service with time-based decay Authlog, for authorization audit trails Spammie, for spam monitoring and blocking Graphene, a generic graph modeling service &lt;/ul&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;HBase is able to satisfy the persistence needs of several very different domains. Of course, there are some use cases for which HBase is not recommended, for example, when using raw HDFS would be more efficient, or when ad-hoc querying via SQL is preferred (although projects like Apache Phoenix can provide SQL on top of HBase).&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Previously, Lars George and Jonathan Hsieh from Cloudera attempted to survey the most commonly occurring use cases for HBase, which they referred to as application archetypes. &nbsp;In their presentation, they categorized archetypes as either &ldquo;good&rdquo;, &ldquo;bad&rdquo;, or &ldquo;maybe&rdquo; when used with HBase. Below I present an augmented listing of their &ldquo;good&rdquo; archetypes, along with pointers to projects that implement them.&lt;/p&gt; &lt;h4 style=&quot;font-family: &quot;Open Sans Condensed&quot;, Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;&quot;&gt;ENTITY&lt;/h4&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;The Entity archetype is the most natural of the archetypes. &nbsp;HBase, being a wide column store, can represent the entity properties with individual columns. &nbsp;Projects like Apache Gora and HEntityDB support this archetype.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;property 1 name&gt; Column: &lt;property 2 name&gt; &hellip; &lt;/td&gt; &nbsp; &lt;property 1 value&gt; &lt;property 2 value&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Entities can be also stored in the same manner as with a key-value store. &nbsp;In this case the entity would be serialized as a binary or JSON value in a single column.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: body &lt;/td&gt; &nbsp;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;h4 style=&quot;font-family: &quot;Open Sans Condensed&quot;, Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;&quot;&gt;SORTED COLLECTION&lt;/h4&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;The Sorted Collection archetype is a generalization of the original Messaging archetype that was presented. &nbsp;In this archetype the entities are stored as binary or JSON values, with the column qualifier being the value of the sort key to use. &nbsp;For example, in a messaging feed, the column qualifier would be a timestamp or a monotonically increasing counter of some sort. &nbsp;The column qualifier can also be &ldquo;inverted&rdquo; (such as by subtracting a numeric ID from the maximum possible value) so that entities are stored in descending order.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;sort key 1 value&gt; Column: &lt;sort key 2 value&gt; &hellip; &lt;/td&gt; &nbsp;&lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Alternatively, each entity can be stored as a set of properties. &nbsp;This is similar to how Cassandra implements CQL. &nbsp;HEntityDB supports storing entity collections in this manner.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;sort key 1 value + property 1 name&gt; Column: &lt;sort key 1 value + property 2 name&gt; &hellip; Column: &lt;sort key 2 value + property 1 name&gt; Column: &lt;sort key 2 value + property 2 name&gt; &hellip; &lt;/td&gt; &lt;property 1 of entity 1&gt; &lt;property 2 of entity 1&gt; &hellip; &lt;property 1 of entity 2&gt; &lt;property 2 of entity 2&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;In order to access entities by some other value than the sort key, additional column families representing indices can be used.&lt;/p&gt; Column&nbsp;Family: sorted Column&nbsp;Family: index Row Key Column: &lt;sort key 1 value&gt; Column: &lt;sort key 2 value&gt; &hellip; Column: &lt;index 1 value&gt; Column: &lt;index 2 value&gt; &hellip; &lt;/td&gt; &nbsp;&lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;To prevent the collection from growing unbounded, a coprocessor can be used to trim the sorted collection during compactions. &nbsp;If index column families are used, the coprocessor would also remove corresponding entries from the index column families when trimming the sorted collection. &nbsp;At Yammer, both the Feedie and RoyalMail services use this technique. &nbsp;Both services also use server-side filters for efficient pagination of the sorted collection during queries.&lt;/p&gt; Continued here... &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;&lt;/p&gt; &lt;/p&gt;&lt;/div&gt;" />
<meta property="og:description" content="by Robert Yokota, HBase Contributor &lt;/p&gt; (This post originally appeared on Robert&#39;s personal blog. It is reposted here as a two-parter. The second-part can be found here.) &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;At Yammer, we&rsquo;ve transitioned away from&nbsp;polyglot persistence to persistence consolidation. In a microservice architecture, the principle that each microservice should be responsible for its own data had led to a proliferation of different types of data stores at Yammer. This in turn led to multiple efforts to make sure that each data store could be easily used, monitored, operationalized, and maintained. In the end, we decided it would be more efficient, both architecturally and organizationally, to reduce the number of data store types in use at Yammer to as few as possible.&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Today HBase is the primary data store for non-relational data at Yammer (we use PostgreSQL for relational data). &nbsp;Microservices are still responsible for their own data, but the data is segregated by cluster boundaries or mechanisms within the data store itself (such as HBase namespaces or PostgreSQL schemas).&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;HBase was chosen for a number of reasons, including its performance, scalability, reliability, its support for strong consistency, and its ability to support a wide variety of data models. &nbsp;At Yammer we have a number of services that rely on HBase for persistence in production:&lt;/p&gt; &lt;ul style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em 3em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; list-style-position: initial; list-style-image: initial; color: #333333;&quot;&gt; Feedie, a feeds service RoyalMail, an inbox service Ocular, for tracking messages that a user has viewed Streamie, for storing activity streams Prankie, a ranking service with time-based decay Authlog, for authorization audit trails Spammie, for spam monitoring and blocking Graphene, a generic graph modeling service &lt;/ul&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;HBase is able to satisfy the persistence needs of several very different domains. Of course, there are some use cases for which HBase is not recommended, for example, when using raw HDFS would be more efficient, or when ad-hoc querying via SQL is preferred (although projects like Apache Phoenix can provide SQL on top of HBase).&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Previously, Lars George and Jonathan Hsieh from Cloudera attempted to survey the most commonly occurring use cases for HBase, which they referred to as application archetypes. &nbsp;In their presentation, they categorized archetypes as either &ldquo;good&rdquo;, &ldquo;bad&rdquo;, or &ldquo;maybe&rdquo; when used with HBase. Below I present an augmented listing of their &ldquo;good&rdquo; archetypes, along with pointers to projects that implement them.&lt;/p&gt; &lt;h4 style=&quot;font-family: &quot;Open Sans Condensed&quot;, Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;&quot;&gt;ENTITY&lt;/h4&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;The Entity archetype is the most natural of the archetypes. &nbsp;HBase, being a wide column store, can represent the entity properties with individual columns. &nbsp;Projects like Apache Gora and HEntityDB support this archetype.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;property 1 name&gt; Column: &lt;property 2 name&gt; &hellip; &lt;/td&gt; &nbsp; &lt;property 1 value&gt; &lt;property 2 value&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Entities can be also stored in the same manner as with a key-value store. &nbsp;In this case the entity would be serialized as a binary or JSON value in a single column.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: body &lt;/td&gt; &nbsp;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;h4 style=&quot;font-family: &quot;Open Sans Condensed&quot;, Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;&quot;&gt;SORTED COLLECTION&lt;/h4&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;The Sorted Collection archetype is a generalization of the original Messaging archetype that was presented. &nbsp;In this archetype the entities are stored as binary or JSON values, with the column qualifier being the value of the sort key to use. &nbsp;For example, in a messaging feed, the column qualifier would be a timestamp or a monotonically increasing counter of some sort. &nbsp;The column qualifier can also be &ldquo;inverted&rdquo; (such as by subtracting a numeric ID from the maximum possible value) so that entities are stored in descending order.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;sort key 1 value&gt; Column: &lt;sort key 2 value&gt; &hellip; &lt;/td&gt; &nbsp;&lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Alternatively, each entity can be stored as a set of properties. &nbsp;This is similar to how Cassandra implements CQL. &nbsp;HEntityDB supports storing entity collections in this manner.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;sort key 1 value + property 1 name&gt; Column: &lt;sort key 1 value + property 2 name&gt; &hellip; Column: &lt;sort key 2 value + property 1 name&gt; Column: &lt;sort key 2 value + property 2 name&gt; &hellip; &lt;/td&gt; &lt;property 1 of entity 1&gt; &lt;property 2 of entity 1&gt; &hellip; &lt;property 1 of entity 2&gt; &lt;property 2 of entity 2&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;In order to access entities by some other value than the sort key, additional column families representing indices can be used.&lt;/p&gt; Column&nbsp;Family: sorted Column&nbsp;Family: index Row Key Column: &lt;sort key 1 value&gt; Column: &lt;sort key 2 value&gt; &hellip; Column: &lt;index 1 value&gt; Column: &lt;index 2 value&gt; &hellip; &lt;/td&gt; &nbsp;&lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;To prevent the collection from growing unbounded, a coprocessor can be used to trim the sorted collection during compactions. &nbsp;If index column families are used, the coprocessor would also remove corresponding entries from the index column families when trimming the sorted collection. &nbsp;At Yammer, both the Feedie and RoyalMail services use this technique. &nbsp;Both services also use server-side filters for efficient pagination of the sorted collection during queries.&lt;/p&gt; Continued here... &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;&lt;/p&gt; &lt;/p&gt;&lt;/div&gt;" />
<link rel="canonical" href="http://localhost:4000/hbase/entry/hbase-application-archetypes-redux" />
<meta property="og:url" content="http://localhost:4000/hbase/entry/hbase-application-archetypes-redux" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-02T21:41:10-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="HBASE APPLICATION ARCHETYPES REDUX (Part 1 of 2)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-03-02T21:41:10-05:00","datePublished":"2019-03-02T21:41:10-05:00","description":"by Robert Yokota, HBase Contributor &lt;/p&gt; (This post originally appeared on Robert&#39;s personal blog. It is reposted here as a two-parter. The second-part can be found here.) &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;At Yammer, we&rsquo;ve transitioned away from&nbsp;polyglot persistence to persistence consolidation. In a microservice architecture, the principle that each microservice should be responsible for its own data had led to a proliferation of different types of data stores at Yammer. This in turn led to multiple efforts to make sure that each data store could be easily used, monitored, operationalized, and maintained. In the end, we decided it would be more efficient, both architecturally and organizationally, to reduce the number of data store types in use at Yammer to as few as possible.&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Today HBase is the primary data store for non-relational data at Yammer (we use PostgreSQL for relational data). &nbsp;Microservices are still responsible for their own data, but the data is segregated by cluster boundaries or mechanisms within the data store itself (such as HBase namespaces or PostgreSQL schemas).&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;HBase was chosen for a number of reasons, including its performance, scalability, reliability, its support for strong consistency, and its ability to support a wide variety of data models. &nbsp;At Yammer we have a number of services that rely on HBase for persistence in production:&lt;/p&gt; &lt;ul style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em 3em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; list-style-position: initial; list-style-image: initial; color: #333333;&quot;&gt; Feedie, a feeds service RoyalMail, an inbox service Ocular, for tracking messages that a user has viewed Streamie, for storing activity streams Prankie, a ranking service with time-based decay Authlog, for authorization audit trails Spammie, for spam monitoring and blocking Graphene, a generic graph modeling service &lt;/ul&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;HBase is able to satisfy the persistence needs of several very different domains. Of course, there are some use cases for which HBase is not recommended, for example, when using raw HDFS would be more efficient, or when ad-hoc querying via SQL is preferred (although projects like Apache Phoenix can provide SQL on top of HBase).&lt;/p&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Previously, Lars George and Jonathan Hsieh from Cloudera attempted to survey the most commonly occurring use cases for HBase, which they referred to as application archetypes. &nbsp;In their presentation, they categorized archetypes as either &ldquo;good&rdquo;, &ldquo;bad&rdquo;, or &ldquo;maybe&rdquo; when used with HBase. Below I present an augmented listing of their &ldquo;good&rdquo; archetypes, along with pointers to projects that implement them.&lt;/p&gt; &lt;h4 style=&quot;font-family: &quot;Open Sans Condensed&quot;, Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;&quot;&gt;ENTITY&lt;/h4&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;The Entity archetype is the most natural of the archetypes. &nbsp;HBase, being a wide column store, can represent the entity properties with individual columns. &nbsp;Projects like Apache Gora and HEntityDB support this archetype.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;property 1 name&gt; Column: &lt;property 2 name&gt; &hellip; &lt;/td&gt; &nbsp; &lt;property 1 value&gt; &lt;property 2 value&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Entities can be also stored in the same manner as with a key-value store. &nbsp;In this case the entity would be serialized as a binary or JSON value in a single column.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: body &lt;/td&gt; &nbsp;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;h4 style=&quot;font-family: &quot;Open Sans Condensed&quot;, Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;&quot;&gt;SORTED COLLECTION&lt;/h4&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;The Sorted Collection archetype is a generalization of the original Messaging archetype that was presented. &nbsp;In this archetype the entities are stored as binary or JSON values, with the column qualifier being the value of the sort key to use. &nbsp;For example, in a messaging feed, the column qualifier would be a timestamp or a monotonically increasing counter of some sort. &nbsp;The column qualifier can also be &ldquo;inverted&rdquo; (such as by subtracting a numeric ID from the maximum possible value) so that entities are stored in descending order.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;sort key 1 value&gt; Column: &lt;sort key 2 value&gt; &hellip; &lt;/td&gt; &nbsp;&lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;Alternatively, each entity can be stored as a set of properties. &nbsp;This is similar to how Cassandra implements CQL. &nbsp;HEntityDB supports storing entity collections in this manner.&lt;/p&gt; Column&nbsp;Family: default Row Key Column: &lt;sort key 1 value + property 1 name&gt; Column: &lt;sort key 1 value + property 2 name&gt; &hellip; Column: &lt;sort key 2 value + property 1 name&gt; Column: &lt;sort key 2 value + property 2 name&gt; &hellip; &lt;/td&gt; &lt;property 1 of entity 1&gt; &lt;property 2 of entity 1&gt; &hellip; &lt;property 1 of entity 2&gt; &lt;property 2 of entity 2&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;In order to access entities by some other value than the sort key, additional column families representing indices can be used.&lt;/p&gt; Column&nbsp;Family: sorted Column&nbsp;Family: index Row Key Column: &lt;sort key 1 value&gt; Column: &lt;sort key 2 value&gt; &hellip; Column: &lt;index 1 value&gt; Column: &lt;index 2 value&gt; &hellip; &lt;/td&gt; &nbsp;&lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;entity 1 blob&gt; &lt;entity 2 blob&gt; &hellip; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;To prevent the collection from growing unbounded, a coprocessor can be used to trim the sorted collection during compactions. &nbsp;If index column families are used, the coprocessor would also remove corresponding entries from the index column families when trimming the sorted collection. &nbsp;At Yammer, both the Feedie and RoyalMail services use this technique. &nbsp;Both services also use server-side filters for efficient pagination of the sorted collection during queries.&lt;/p&gt; Continued here... &lt;p style=&quot;box-sizing: border-box; border: 0px none; font-family: &quot;Open Sans&quot;, Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;&quot;&gt;&lt;/p&gt; &lt;/p&gt;&lt;/div&gt;","headline":"HBASE APPLICATION ARCHETYPES REDUX (Part 1 of 2)","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/hbase/entry/hbase-application-archetypes-redux"},"url":"http://localhost:4000/hbase/entry/hbase-application-archetypes-redux"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">HBASE APPLICATION ARCHETYPES REDUX (Part 1 of 2)</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-03-02T21:41:10-05:00" itemprop="datePublished">Mar 2, 2019
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Michael Stack", "login"=>"stack", "email"=>"stack@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div>
<p>by Robert Yokota, HBase Contributor</p>
</p></div>
<div>
<p>(This post originally appeared on <a href="https://yokota.blog/2017/07/12/hbase-application-archetypes-redux/">Robert's personal blog</a>. It is reposted here as a two-parter. The second-part can be found <a href="https://blogs.apache.org/hbase/entry/hbase-application-archetypes-redux2-part">here</a>.)</p>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">At Yammer, we&rsquo;ve transitioned away from&nbsp;<em style="box-sizing: border-box; border: 0px none; font-family: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">polyglot persistence</em> to <em style="box-sizing: border-box; border: 0px none; font-family: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">persistence consolidation</em>. In a microservice architecture, the principle that each microservice should be responsible for its own data had led to a proliferation of different types of data stores at Yammer. This in turn led to multiple efforts to make sure that each data store could be easily used, monitored, operationalized, and maintained. In the end, we decided it would be more efficient, both architecturally and organizationally, to reduce the number of data store types in use at Yammer to as few as possible.</p>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">Today HBase is the primary data store for non-relational data at Yammer (we use PostgreSQL for relational data). &nbsp;Microservices are still responsible for their own data, but the data is segregated by cluster boundaries or mechanisms within the data store itself (such as HBase namespaces or PostgreSQL schemas).</p>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">HBase was chosen for a number of reasons, including its performance, scalability, reliability, its support for <a href="https://yokota.blog/2017/02/17/dont-settle-for-eventual-consistency/" style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #777777; transition: all 0.3s ease-in-out 0s;">strong consistency</a>, and its ability to support a <a href="https://yokota.blog/2016/03/17/hbase-as-a-multi-model-data-store/" style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #777777; transition: all 0.3s ease-in-out 0s;">wide variety of data models</a>. &nbsp;At Yammer we have a number of services that rely on HBase for persistence in production:</p>
<ul style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em 3em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; list-style-position: initial; list-style-image: initial; color: #333333;">
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">Feedie, a feeds service</li>
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">RoyalMail, an inbox service</li>
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">Ocular, for tracking messages that a user has viewed</li>
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">Streamie, for storing activity streams</li>
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">Prankie, a ranking service with time-based decay</li>
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">Authlog, for authorization audit trails</li>
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">Spammie, for spam monitoring and blocking</li>
<li style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">Graphene, a generic graph modeling service</li>
</ul>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">HBase is able to satisfy the persistence needs of several very different domains. Of course, there are some use cases for which HBase is not recommended, for example, when using raw HDFS would be more efficient, or when ad-hoc querying via SQL is preferred (although projects like <a href="https://phoenix.apache.org/" style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #777777; transition: all 0.3s ease-in-out 0s;">Apache Phoenix</a> can provide SQL on top of HBase).</p>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">Previously, Lars George and Jonathan Hsieh from Cloudera attempted to <a href="https://www.slideshare.net/HBaseCon/case-studies-session-7" style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #777777; transition: all 0.3s ease-in-out 0s;">survey</a> the most commonly occurring use cases for HBase, which they referred to as <em style="box-sizing: border-box; border: 0px none; font-family: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">application archetypes</em>. &nbsp;In their presentation, they categorized archetypes as either &ldquo;good&rdquo;, &ldquo;bad&rdquo;, or &ldquo;maybe&rdquo; when used with HBase. Below I present an augmented listing of their &ldquo;good&rdquo; archetypes, along with pointers to projects that implement them.</p>
<h4 style="font-family: "Open Sans Condensed", Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;">ENTITY</h4>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">The Entity archetype is the most natural of the archetypes. &nbsp;HBase, being a wide column store, can represent the entity properties with individual columns. &nbsp;Projects like <a href="http://gora.apache.org/current/gora-hbase.html" style="color: #777777; border: 0px none; box-sizing: border-box; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; transition: all 0.3s ease-in-out 0s;">Apache Gora</a> and <a href="https://github.com/rayokota/hentitydb" style="color: #777777; border: 0px none; box-sizing: border-box; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; transition: all 0.3s ease-in-out 0s;">HEntityDB</a> support this archetype.</p>
<table id="zaposphere-table-courtyard" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; box-sizing: border-box; border-width: 1px 1px 0px; border-style: solid; border-color: #bbbbbb; border-image: initial; font-family: Arial, sans-serif; font-size: 14px; margin: 20px 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; border-spacing: 0px; width: 660px; font-stretch: normal; line-height: 1.5em; color: #666666; height: 147px;">
<thead style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 167px;"> </td>
<td colspan="3" style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 1470px;">Column&nbsp;Family: default</td>
</tr>
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; background-color: #fafafa;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 167px;">Row Key</td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 564px;">Column:
<property 1 name></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 571.922px;">Column:
<property 2 name></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 334.078px;">&hellip;</td>
</tr>
</thead>
<tbody style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 167px;"><entity ID></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 564px;">&nbsp;
<property 1 value></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 571.922px;">
<property 2 value></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 334.078px;">&hellip;</td>
</tr>
</tbody>
</table>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">Entities can be also stored in the same manner as with a key-value store. &nbsp;In this case the entity would be serialized as a binary or JSON value in a single column.</p>
<table id="zaposphere-table-courtyard" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; box-sizing: border-box; border-width: 1px 1px 0px; border-style: solid; border-color: #bbbbbb; border-image: initial; font-family: Arial, sans-serif; font-size: 14px; margin: 20px 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; border-spacing: 0px; width: 660px; font-stretch: normal; line-height: 1.5em; color: #666666; height: 147px;">
<thead style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 119px;"> </td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 499.734px;">Column&nbsp;Family: default</td>
</tr>
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; background-color: #fafafa;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 119px;">Row Key</td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 499.734px;">Column: body</td>
</tr>
</thead>
<tbody style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 119px;"><entity ID></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 499.734px;">&nbsp;<entity blob></td>
</tr>
</tbody>
</table>
<h4 style="font-family: "Open Sans Condensed", Helvetica, sans-serif; letter-spacing: normal; box-sizing: border-box; border: 0px none; font-size: 20px; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; clear: both; text-transform: uppercase; color: #333333;">SORTED COLLECTION</h4>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">The Sorted Collection archetype is a generalization of the original Messaging archetype that was presented. &nbsp;In this archetype the entities are stored as binary or JSON values, with the column qualifier being the value of the sort key to use. &nbsp;For example, in a messaging feed, the column qualifier would be a timestamp or a monotonically increasing counter of some sort. &nbsp;The column qualifier can also be &ldquo;inverted&rdquo; (such as by subtracting a numeric ID from the maximum possible value) so that entities are stored in descending order.</p>
<table id="zaposphere-table-courtyard" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; box-sizing: border-box; border-width: 1px 1px 0px; border-style: solid; border-color: #bbbbbb; border-image: initial; font-family: Arial, sans-serif; font-size: 14px; margin: 20px 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; border-spacing: 0px; width: 660px; font-stretch: normal; line-height: 1.5em; color: #666666; height: 147px;">
<thead style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 195px;"> </td>
<td colspan="3" style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 1484.84px;">Column&nbsp;Family: default</td>
</tr>
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; background-color: #fafafa;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 195px;">Row Key</td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 623px;">Column: <sort key 1 value></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 629px;">Column: <sort key 2 value></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 232.844px;">&hellip;</td>
</tr>
</thead>
<tbody style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 195px;">
<collection ID></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 623px;">&nbsp;<entity 1 blob></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 629px;"><entity 2 blob></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 232.844px;">&hellip;</td>
</tr>
</tbody>
</table>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">Alternatively, each entity can be stored as a set of properties. &nbsp;This is similar to how Cassandra implements CQL. &nbsp;<a href="https://github.com/rayokota/hentitydb" style="color: #777777; border: 0px none; box-sizing: border-box; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; transition: all 0.3s ease-in-out 0s;">HEntityDB</a> supports storing entity collections in this manner.</p>
<table id="zaposphere-table-courtyard" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; box-sizing: border-box; border-width: 1px 1px 0px; border-style: solid; border-color: #bbbbbb; border-image: initial; font-family: Arial, sans-serif; font-size: 14px; margin: 20px 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; border-spacing: 0px; width: 660px; font-stretch: normal; line-height: 1.5em; color: #666666; height: 147px;">
<thead style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 195px;"> </td>
<td colspan="6" style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 2185px;">Column&nbsp;Family: default</td>
</tr>
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; background-color: #fafafa;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 195px;">Row Key</td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 330px;">Column: <sort key 1 value + property 1 name></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 330px;">Column: <sort key 1 value + property 2 name></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 438px;">&hellip;</td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 330px;">Column: <sort key 2 value + property 1 name></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 230px;">Column: <sort key 2 value + property 2 name></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 438px;">&hellip;</td>
</tr>
</thead>
<tbody style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 195px;">
<collection ID></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 330px;">
<property 1 of entity 1></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 330px;">
<property 2 of entity 1></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 438px;">&hellip;</td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 330px;">
<property 1 of entity 2></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 330px;">
<property 2 of entity 2></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 438px;">&hellip;</td>
</tr>
</tbody>
</table>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">In order to access entities by some other value than the sort key, additional column families representing indices can be used.</p>
<table id="zaposphere-table-courtyard" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; box-sizing: border-box; border-width: 1px 1px 0px; border-style: solid; border-color: #bbbbbb; border-image: initial; font-family: Arial, sans-serif; font-size: 14px; margin: 20px 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; border-spacing: 0px; width: 660px; font-stretch: normal; line-height: 1.5em; color: #666666; height: 147px;">
<thead style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 195px;"> </td>
<td colspan="3" style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 1484px;">Column&nbsp;Family: sorted</td>
<td colspan="3" style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 696px;">Column&nbsp;Family: index</td>
</tr>
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; background-color: #fafafa;">
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 195px;">Row Key</td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 623px;">Column: <sort key 1 value></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 623.312px;">Column: <sort key 2 value></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 237.688px;">&hellip;</td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 232px;">Column: <index 1 value></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 232px;">Column: <index 2 value></td>
<td style="font-weight: 600; font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; letter-spacing: 0px; background: #eeeeee none repeat scroll 0% 0%; width: 232px;">&hellip;</td>
</tr>
</thead>
<tbody style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<tr style="box-sizing: border-box; border: 0px none; font-family: inherit; font-style: inherit; font-weight: inherit; margin: 0px; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline;">
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left-style: none; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 195px;">
<collection ID></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 623px;">&nbsp;<entity 1 blob></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 623.312px;"><entity 2 blob></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 237.688px;">&hellip;</td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 232px;"><entity 1 blob></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 232px;"><entity 2 blob></td>
<td style="font-size: 14px; line-height: 1.5em; font-family: Arial, sans-serif; box-sizing: border-box; border-width: 0px 0px 1px 1px; border-top-style: initial; border-right-style: initial; border-bottom: 1px solid #bbbbbb; border-left: 1px solid #bbbbbb; border-top-color: initial; border-right-color: initial; border-image: initial; margin: 0px; outline: currentcolor none 0px; padding: 8px 12px; vertical-align: top; text-align: center; width: 232px;">&hellip;</td>
</tr>
</tbody>
</table>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;">To prevent the collection from growing unbounded, a coprocessor can be used to trim the sorted collection during compactions. &nbsp;If index column families are used, the coprocessor would also remove corresponding entries from the index column families when trimming the sorted collection. &nbsp;At Yammer, both the Feedie and RoyalMail services use this technique. &nbsp;Both services also use server-side filters for efficient pagination of the sorted collection during queries.</p>
<p>Continued <a href="https://blogs.apache.org/hbase/entry/hbase-application-archetypes-redux2-part">here...</a> </p>
<p style="box-sizing: border-box; border: 0px none; font-family: "Open Sans", Helvetica, sans-serif; font-size: 16px; margin: 0px 0px 1.5em; outline: currentcolor none 0px; padding: 0px; vertical-align: baseline; color: #333333;"></p>
</p></div>
<div> </div>

  </div><a class="u-url" href="/hbase/entry/hbase-application-archetypes-redux" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
