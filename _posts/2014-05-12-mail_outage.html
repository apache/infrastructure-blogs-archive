---
layout: post
status: PUBLISHED
published: true
title: Mail outage
author:
  display_name: David Nalley
  login: ke4qqq
  email: ke4qqq@apache.org
author_login: ke4qqq
author_email: ke4qqq@apache.org
id: a26e3b56-dac8-4604-b9b6-3cd2ff160cc7
date: '2014-05-12 16:07:17 -0400'
categories:
- Status
tags: []
comments:
- id: 0
  author: Jeff Janner
  author_email: ''
  author_url: ''
  date: '2014-05-09 17:47:54 -0400'
  content: "@Tilman: Most disk arrays can't recover from multiple disk failures at
    the same time, or at least more than 2. I don't have the details, but it sounds
    like there were probably more than 2. One wonders if alerts were not addressed
    in a timely manner."
- id: 0
  author: Hagar Delest
  author_email: hagar.delest@laposte.net
  author_url: ''
  date: '2014-05-09 21:10:55 -0400'
  content: 'For the record, it seems that is also affects the forums! see: See: https://forum.openoffice.org/en/forum/viewtopic.php?f=5&t=69640'
- id: 0
  author: Shawn Heisey
  author_email: apache@elyograg.org
  author_url: ''
  date: '2014-05-10 02:02:55 -0400'
  content: "Will it be possible to recover the queued messages, or is the array a
    total loss?\r\n\r\nStated another way: Are we going to get a major flood of email
    when the service resumes?"
- id: 0
  author: Tilman
  author_email: tilman@snafu.de
  author_url: ''
  date: '2014-05-10 16:44:56 -0400'
  content: "@ASF infra team: Thanks for all your work.\r\n\r\n@Jeff: Indeed, several
    disks getting belly up at the very same time sounds unlikely. I hope that after
    the smoke has cleared, they will found out whether either the disk array was of
    the type \"rushed to production, tests later\" or whether alarm signs were disregarded
    by some external contractors. Disk arrays are bought to prevent just the thing
    that has happened now.\r\n\r\n\r\nLuckily, JIRA and SVN still work :-)"
- id: 5
  author: Sean Busbey
  author_email: busbey@apache.org
  author_url: ''
  date: '2014-05-08 20:12:29 -0400'
  content: Thanks for all your work on this. Hang in there ASF Infra!
- id: 826
  author: Tilman
  author_email: tilman@snafu.de
  author_url: ''
  date: '2014-05-08 20:02:12 -0400'
  content: What is the point of buying / renting a disk array if it can't handle what
    it is really built for, i.e. "repair itself" after a failure?
- id: 6258
  author: Gary D. Gregory
  author_email: ggregory@apache.org
  author_url: ''
  date: '2014-05-09 01:13:12 -0400'
  content: Thank you all for working hard to resolve this critical issue. Any more
    updates?
- id: 2854121
  author: Shawn Heisey
  author_email: apache@elyograg.org
  author_url: ''
  date: '2014-05-10 04:09:27 -0400'
  content: Apparently I'm completely blind, because the mail loss thing was actually
    mentioned.  Thanks for covering all bases.  People might get the impression that
    you've been doing this a while!
permalink: infra/entry/mail_outage
---
<p>During the afternoon of May 6th we began experiencing delays in mail delivery of 1-2 hours. Initial efforts at remediation seemed to clear this up but on the morning of May 7th the problem worsened and we proactively disabled mail service to deal with the failure. The underlying hardware suffered failures on multiple disks. This outage effects all ASF mailing lists and mail forwarding. </p>
<p>&nbsp;This service is housed at <a href="http://osuosl.org">OSUOSL</a>, and we are currently waiting on smart hands to help with replacing hardware. Our expectation at this point is that we still have multiple hours worth of outage.&nbsp;</p>
<p>&nbsp;Incoming mail is currently being received and held in queue by our mail exchangers. We also have a copy of the existing queue that hasn't been processed; so we expect no mail or data loss. &nbsp;</p>
<p>ASF Infra's twitter bot will provide updates as we have them for the duration of the outage. Feel free to follow <a href="https://twitter.com/infrabot">@infrabot</a>&nbsp;on Twitter. There will be an update on this post as well as the situation progresses.</p>
<p><b><u>UPDATE 7 May 19:27 UTC </u></b>- Drives have been replaced, array is attempting to rebuild. As indicated earlier on twitter, there likely remains hours of outage. &nbsp;</p></p>
<p><b><u>UPDATE 7 May 20:44 UTC</u></b> - The disk array is still in the process of repairing. Several hundred mails were processed during a reboot, but more work remains before service is restored. &nbsp;Mail service has been disabled again as the array repair process is CPU-bound. The plan going forward is to allow the disk arrays to finish repairs. Once that is complete, we'll reenable the mail service and flush what is currently in the queue. Finally, once the queue is empty we'll begin receiving mail again.</p>
<p><b><u>UPDATE 8 May 05:00 UTC</u></b> - The disk array failed to repair itself. The disks have been replaced and a new installation has been completed. Progress continues to be made towards resolution, but nothing firm enough yet for us to predict an time for restoration.</p>
<p><u><b>UPDATE 8 May 15:45 UTC</b></u> - No material change of status has occurred. Infra worked in shifts around the clock last night and continue to do so to restore service. More updates as they become available. &nbsp;</p>
<p><u><b>UPDATE 9 May 11:20 UTC</b></u> - We are working on temporarily restoring the most essential email aliases. In the meantime, inquiries may be made to <a href="mailto:infrastructure@apache.pw">infrastructure@apache.pw</a> or on our IRC channel, #asfinfra on Freenode. The work on restoring the service in full is still ongoing.</p>
<p><b><u>UPDATE 9 May 17:20 UTC</u></b> - We've successfully restored a host from backups and will be starting testing soon. Based on the progress made in those tests we'll try and provide expectations around restoration of service timeline.</p>
<p><b><u>UPDATE 10 May 15:45 UTC</u></b> - We've started pushing live mails through the system - you'll begin to see them trickle in as we gradually open the floodgates to restore service. Expect intermittent spurts for a while.&nbsp;</p>
<p><b>UPDATE 10 May 21:55 UTC</b> - &nbsp;The floodgates have been opened. &nbsp;As we have a significant amount of backlog to catch up on, please be patient as the service does this. &nbsp;As always feel free to contact us if you have any questions. In the immediate short term (next day or so, we suggest you continue to use&nbsp;<a href="mailto:infrastructure@apache.pw">infrastructure@apache.pw</a>&nbsp;and our IRC channel, #asfinfra on Freenode. &nbsp;We would like to thank you for your patience during this extremely busy time.&nbsp;</p>
<p><b><u>UPDATE 12 May 16:04 UTC</u></b> - Clarification - we have opened the floodgates, but have a substantial amount of backlog; and with the sudden rush of mail are being throttled by various mail services. With the addition of mail thats coming through anyway; it may take us from 2-5 days to fully flush the backlog. This time is so wide because of a wide variety of factors that are largely outside of our control, such as new mail coming in and mail services individual throttling policies. &nbsp;</p>
