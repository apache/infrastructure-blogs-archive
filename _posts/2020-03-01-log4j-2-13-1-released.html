---
layout: post
status: PUBLISHED
published: true
title: LOG4J 2.13.1 released
author:
  display_name: rgoers
  login: rgoers
  email: rogers@apache.org
author_login: rgoers
author_email: rogers@apache.org
id: 13141edb-d866-40de-87ce-37e3c37087c0
date: '2020-03-01 20:07:18 -0500'
categories:
- General
tags: []
comments: []
permalink: logging/entry/log4j-2-13-1-released
---
<p>The Apache Log4j 2 team is pleased to announce the Log4j 2.13.1 release!</p>
<p>Apache Log4j is a well known framework for logging application behavior. Log4j 2 is an upgrade<br />
to Log4j that provides significant improvements over its predecessor, Log4j 1.x, and provides<br />
many other modern features such as support for Markers, lambda expressions for lazy logging,<br />
property substitution using Lookups, multiple patterns on a PatternLayout and asynchronous<br />
Loggers. Another notable Log4j 2 feature is the ability to be "garbage-free" (avoid allocating<br />
temporary objects) while logging. In addition, Log4j 2 will not lose events while reconfiguring.</p>
<p>The artifacts may be downloaded from <a href="https://logging.apache.org/log4j/2.x/download.html" rel="nofollow">https://logging.apache.org/log4j/2.x/download.html</a>.</p>
<p>This release contains bugfixes and very minor enhancements.</p>
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.<br />
log4j-slf4j-impl should be used with SLF4J 1.7.x and earlier and log4j-slf4j18-impl should be used with SLF4J 1.8.x and<br />
later.</p>
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the "timeMillis" attribute<br />
and instead have an "Instant" element with "epochSecond" and "nanoOfSecond" attributes.</p>
<p>The Log4j 2.13.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
<h2><a id="user-content-ga-release-2131" class="anchor" aria-hidden="true" href="#ga-release-2131"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
<path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GA Release 2.13.1</h2>
<p>Changes in this version include:</p>
<h3><a id="user-content-new-features" class="anchor" aria-hidden="true" href="#new-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
<path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New Features</h3>
<ul>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2748" rel="nofollow">LOG4J2-2748</a>:<br />
Implement ISO8601_PERIOD_MICROS fixed date format matching ISO8601_PERIOD with support for microsecond precision.</li>
</ul>
<h3><a id="user-content-fixed-bugs" class="anchor" aria-hidden="true" href="#fixed-bugs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
<path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixed Bugs</h3>
<ul>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2717" rel="nofollow">LOG4J2-2717</a>:<br />
Slow initialization on Windows due to accessing network interfaces.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2756" rel="nofollow">LOG4J2-2756</a>:<br />
Prevent LoggerContext from being garbage collected while being created.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2769" rel="nofollow">LOG4J2-2769</a>:<br />
Do not log an error if Files.move does not work.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2039" rel="nofollow">LOG4J2-2039</a>:<br />
Rollover fails when file matches pattern but index is too large.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2784" rel="nofollow">LOG4J2-2784</a>:<br />
Counter stuck at 10 and overwriting files when leading zeros used in the file pattern count.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2746" rel="nofollow">LOG4J2-2746</a>:<br />
ClassLoaderContextSelector was not locating the LoggerContext during shutdown.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2652" rel="nofollow">LOG4J2-2652</a>:<br />
JSON output wrong when using additonal fields.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2649" rel="nofollow">LOG4J2-2649</a>:<br />
GraalVM does not allow use of MethodHandles.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2211" rel="nofollow">LOG4J2-2211</a>:<br />
Allow Lookup keys with leading dashes by using a slash as an escape character.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2781" rel="nofollow">LOG4J2-2781</a>:<br />
ServletContainerInitializer was obtaining the StatusLogger too soon. Thanks to qxo.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2676" rel="nofollow">LOG4J2-2676</a>:<br />
PluginProcessor should use Messager instead of System.out. Thanks to Gregg Donovan.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2703" rel="nofollow">LOG4J2-2703</a>:<br />
MapMessage.getFormattedMesssage() would incorrectly format objects. Thanks to Volkan Yazici.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2760" rel="nofollow">LOG4J2-2760</a>:<br />
Always write header on a new OutputStream. Thanks to Christoph Kaser.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2776" rel="nofollow">LOG4J2-2776</a>:<br />
An error message in RollingFileAppender uses a placeholder for the name but does not specify the name<br />
argument in the logging call Thanks to Christoph Kaser.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2758" rel="nofollow">LOG4J2-2758</a>:<br />
NullPointerException when using a custom DirectFileRolloverStrategy without a file name. Thanks to Christoph Kaser.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2768" rel="nofollow">LOG4J2-2768</a>:<br />
Add mulit-parameter overloads to LogBuilder. Thanks to Marius Volkhart.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2770" rel="nofollow">LOG4J2-2770</a>:<br />
Fixed NullPointerException after reconfiguring via JMX. Thanks to Bill Kuker.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2759" rel="nofollow">LOG4J2-2759</a>:<br />
RollingFileAppender was not rolling on startup if createOnDemand was set to true.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2767" rel="nofollow">LOG4J2-2767</a>:<br />
Warn if pattern is missing on Routes element. Use default route.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2415" rel="nofollow">LOG4J2-2415</a>:<br />
Fix lock contention in the classloader using new versions of slf4j without EventData on slf4j logger creation. Thanks to Andrey Turbanov.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2677" rel="nofollow">LOG4J2-2677</a>:<br />
Rollover handles parallel file deletion gracefully.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2744" rel="nofollow">LOG4J2-2744</a>:<br />
Remove unnecessary EventLogger references from log4j-slf4j18-impl due to removal from slf4j.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2747" rel="nofollow">LOG4J2-2747</a>:<br />
Fix a memory leak using fully asynchronous logging when the queue is full using the 'discard' asynchronous queue full strategy.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2739" rel="nofollow">LOG4J2-2739</a>:<br />
Fix erroneous log4j-jul recursive logger detection resulting in some no-op JUL loggers and 'WARN Recursive call to getLogger' being reported by the status logger.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2735" rel="nofollow">LOG4J2-2735</a>:<br />
PluginCache output is reproducible allowing the annotation processor to produce deterministic results. Thanks to Andy Wilkinson.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2751" rel="nofollow">LOG4J2-2751</a>:<br />
Fix StackLocator.getCallerClass performance in cases where Reflection.getCallerClass is not accessible.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2752" rel="nofollow">LOG4J2-2752</a>:<br />
MutableLogEvent and RingBufferLogEvent avoid StringBuffer and parameter array allocation unless reusable messages are used.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2754" rel="nofollow">LOG4J2-2754</a>:<br />
LoaderUtil.getClassLoaders may discover additional loaders and no longer erroneously returns a result with a null element in some environments.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2575" rel="nofollow">LOG4J2-2575</a>:<br />
CronExpression.getBeforeTime() would sometimes return incorrect result. Thanks to Nathan Friess.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2762" rel="nofollow">LOG4J2-2762</a>:<br />
[JDBC] MS-SQL Server JDBC driver throws SQLServerException when inserting a null value for a VARBINARY column.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2770" rel="nofollow">LOG4J2-2770</a>:<br />
NullPointerException after reconfiguring via JMX. Thanks to Bill Kuker.</li>
</ul>
<h3><a id="user-content-changes" class="anchor" aria-hidden="true" href="#changes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
<path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Changes</h3>
<ul>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2789" rel="nofollow">LOG4J2-2789</a>:<br />
Conditionally perform status logging calculations in PluginRegistry. Thanks to Marius Volkhart.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2782" rel="nofollow">LOG4J2-2782</a>:<br />
Use LinkedBlockingQueue instead of synchronized collction in StatusConfiguration.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2777" rel="nofollow">LOG4J2-2777</a>:<br />
Add a retry count attribute to the KafkaAppender. Thanks to joongs4.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2745" rel="nofollow">LOG4J2-2745</a>:<br />
Update log4j-slf4j18-impl slf4j version to 1.8.0-beta4 from 1.8.0-alpha2.</li>
<li><a href="https://issues.apache.org/jira/browse/LOG4J2-2763" rel="nofollow">LOG4J2-2763</a>:<br />
Update dependencies.</li>
</ul>
<hr>
<p>Apache Log4j 2.13.1 requires a minimum of Java 8 to build and run. Log4j 2.3 was the<br />
last release that supported Java 6 and Log4j 2.11.2 is the last release to support Java 7.</p>
<p>For complete information on Apache Log4j 2, including instructions on how to submit bug<br />
reports, patches, or suggestions for improvement, see the Apache Apache Log4j 2 website:</p>
<p><a href="https://logging.apache.org/log4j/2.x/" rel="nofollow">https://logging.apache.org/log4j/2.x/</a></p>
