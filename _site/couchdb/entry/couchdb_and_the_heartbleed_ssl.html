<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>CouchDB and the Heartbleed SSL/TLS Vulnerability | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="CouchDB and the Heartbleed SSL/TLS Vulnerability" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="You may or may not have heard about the Heartbleed SSL/TLS vulnerability yet. Without much exaggeration, this is a big one. What does this mean for CouchDB? 1. If you are using CouchDB with the built-in SSL support, you are at the whim of Erlang/OTP&rsquo;s handling of SSL. Lucky for you, while they do use OpenSSL for the heavy lifting, they do the TLS/SSL handshake logic in Erlang (Source). That means you are not affected by this issue. 2. If you are using CouchDB behind a third-party proxy server you are at the whim of the SSL library it uses. For the big three Apache, nginx and HAProxy it&rsquo;s all OpenSSL. So if they are using OpenSSL 1.0.1-1.0.1f with heartbeat support (RFC6520) enabled (the default), you need to take action. As far as I can tell now: 0. Check if you are vulnerable 1. Stop your service. 2. Upgrade to OpenSSL 1.0.1g or recompile OpenSSL without heartbeat support. 3. Request new cert from your SSL cert vendor. 4. Revoke your old cert. 5. Invalidate all existing sessions by changing the CouchDB couchdb_httpd_auth/secret configuration value to a new UUID. 6. Restart your service. 7. Invalidate all your user&rsquo;s passwords and/or OAuth tokens. 8. Notify your users that any of their data and passwords are potentially compromised." />
<meta property="og:description" content="You may or may not have heard about the Heartbleed SSL/TLS vulnerability yet. Without much exaggeration, this is a big one. What does this mean for CouchDB? 1. If you are using CouchDB with the built-in SSL support, you are at the whim of Erlang/OTP&rsquo;s handling of SSL. Lucky for you, while they do use OpenSSL for the heavy lifting, they do the TLS/SSL handshake logic in Erlang (Source). That means you are not affected by this issue. 2. If you are using CouchDB behind a third-party proxy server you are at the whim of the SSL library it uses. For the big three Apache, nginx and HAProxy it&rsquo;s all OpenSSL. So if they are using OpenSSL 1.0.1-1.0.1f with heartbeat support (RFC6520) enabled (the default), you need to take action. As far as I can tell now: 0. Check if you are vulnerable 1. Stop your service. 2. Upgrade to OpenSSL 1.0.1g or recompile OpenSSL without heartbeat support. 3. Request new cert from your SSL cert vendor. 4. Revoke your old cert. 5. Invalidate all existing sessions by changing the CouchDB couchdb_httpd_auth/secret configuration value to a new UUID. 6. Restart your service. 7. Invalidate all your user&rsquo;s passwords and/or OAuth tokens. 8. Notify your users that any of their data and passwords are potentially compromised." />
<link rel="canonical" href="http://localhost:4000/couchdb/entry/couchdb_and_the_heartbleed_ssl" />
<meta property="og:url" content="http://localhost:4000/couchdb/entry/couchdb_and_the_heartbleed_ssl" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-04-08T15:53:10-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CouchDB and the Heartbleed SSL/TLS Vulnerability" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2014-04-08T15:53:10-04:00","datePublished":"2014-04-08T15:53:10-04:00","description":"You may or may not have heard about the Heartbleed SSL/TLS vulnerability yet. Without much exaggeration, this is a big one. What does this mean for CouchDB? 1. If you are using CouchDB with the built-in SSL support, you are at the whim of Erlang/OTP&rsquo;s handling of SSL. Lucky for you, while they do use OpenSSL for the heavy lifting, they do the TLS/SSL handshake logic in Erlang (Source). That means you are not affected by this issue. 2. If you are using CouchDB behind a third-party proxy server you are at the whim of the SSL library it uses. For the big three Apache, nginx and HAProxy it&rsquo;s all OpenSSL. So if they are using OpenSSL 1.0.1-1.0.1f with heartbeat support (RFC6520) enabled (the default), you need to take action. As far as I can tell now: 0. Check if you are vulnerable 1. Stop your service. 2. Upgrade to OpenSSL 1.0.1g or recompile OpenSSL without heartbeat support. 3. Request new cert from your SSL cert vendor. 4. Revoke your old cert. 5. Invalidate all existing sessions by changing the CouchDB couchdb_httpd_auth/secret configuration value to a new UUID. 6. Restart your service. 7. Invalidate all your user&rsquo;s passwords and/or OAuth tokens. 8. Notify your users that any of their data and passwords are potentially compromised.","headline":"CouchDB and the Heartbleed SSL/TLS Vulnerability","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/couchdb/entry/couchdb_and_the_heartbleed_ssl"},"url":"http://localhost:4000/couchdb/entry/couchdb_and_the_heartbleed_ssl"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">CouchDB and the Heartbleed SSL/TLS Vulnerability</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2014-04-08T15:53:10-04:00" itemprop="datePublished">Apr 8, 2014
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Jan", "login"=>"jan", "email"=>"jan@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>
You may or may not have heard about the <a href="http://heartbleed.com" title="Heartbleed Bug">Heartbleed SSL/TLS vulnerability</a> yet. Without much exaggeration, this is a big one.</p>
<p>What does this mean for CouchDB?</p>
<p>
1. If you are using CouchDB with the built-in SSL support, you are at the whim of Erlang/OTP&rsquo;s handling of SSL. Lucky for you, while they do use OpenSSL for the heavy lifting, they do the TLS/SSL handshake logic in Erlang (<a href="http://erlang.org/pipermail/erlang-questions/2014-April/078537.html" title="[erlang-questions] Does Erlang/OTP SSL app have heartbleed  vulnerability?">Source</a>). That means you are not affected by this issue.</p>
<p>
2. If you are using CouchDB behind a third-party proxy server you are at the whim of the SSL library it uses. For the big three Apache, nginx and HAProxy it&rsquo;s all OpenSSL. So if they are using OpenSSL 1.0.1-1.0.1f with heartbeat support (RFC6520) enabled (the default), you need to take action. As far as I can tell now:</p>
<ul>
<li>0. Check if you <a href="https://gist.githubusercontent.com/takeshixx/10107280/raw/8052d8479ad0c6150464748d639b0f5e877e8c37/hb-test.py">are vulnerable</a></li>
<li>1. Stop your service.</li>
<li>2. Upgrade to OpenSSL 1.0.1g or recompile OpenSSL without heartbeat support.</li>
<li>3. Request new cert from your SSL cert vendor.</li>
<li>4. Revoke your old cert.</li>
<li>5. Invalidate all existing sessions by changing the CouchDB couchdb_httpd_auth/secret configuration value to a new UUID.</li>
<li>6. Restart your service.</li>
<li>7. Invalidate all your user&rsquo;s passwords and/or OAuth tokens.</li>
<li>8. Notify your users that any of their data and passwords are potentially compromised.</li>
</ul>

  </div><a class="u-url" href="/couchdb/entry/couchdb_and_the_heartbleed_ssl" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
