<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>New in httpd 2.4: If, ElseIf, and Else | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="New in httpd 2.4: If, ElseIf, and Else" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is an archive of the Roller blogs that were previously hosted on blogs.apache.org" />
<meta property="og:description" content="This is an archive of the Roller blogs that were previously hosted on blogs.apache.org" />
<link rel="canonical" href="http://localhost:4000/httpd/entry/new_in_httpd_2_4" />
<meta property="og:url" content="http://localhost:4000/httpd/entry/new_in_httpd_2_4" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-05-06T17:37:45-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="New in httpd 2.4: If, ElseIf, and Else" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2015-05-06T17:37:45-04:00","datePublished":"2015-05-06T17:37:45-04:00","description":"This is an archive of the Roller blogs that were previously hosted on blogs.apache.org","headline":"New in httpd 2.4: If, ElseIf, and Else","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/httpd/entry/new_in_httpd_2_4"},"url":"http://localhost:4000/httpd/entry/new_in_httpd_2_4"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">New in httpd 2.4: If, ElseIf, and Else</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2015-05-06T17:37:45-04:00" itemprop="datePublished">May 6, 2015
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"rbowen", "login"=>"rbowen", "email"=>"rbowen@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Over the coming weeks, I'm going to be writing several articles about new features in Apache httpd 2.4. To me the most compelling reason to upgrade to Apache 2.4 today is the <a href="http://httpd.apache.org/docs/2.4/mod/core.html#if" title="<If>"><If></a> directive, so that's where I'll start.</p>
<p><em>Related documentation:</em> </p>
<ul>
<li><a href="http://httpd.apache.org/docs/2.4/mod/core.html#if">If</a></li>
<li><a href="http://httpd.apache.org/docs/2.4/mod/core.html#elseif">ElseIf</a></li>
<li><a href="http://httpd.apache.org/docs/2.4/mod/core.html#else">Else</a></li>
<li><a href="http://httpd.apache.org/docs/2.4/expr.html">Expressions</a></li>
</ul>
<p>This is something that people have been asking for since the very first day I was involved in Apache stuff - the ability to insert conditional statements in configuration files. And now that it's here, it's everything we wanted. Even a bit more.</p>
<p>The&nbsp;<a href="http://httpd.apache.org/docs/2.4/mod/core.html#if"><If></a>&nbsp;directive may be used in all contexts (server config, virtual host, directory, .htaccess) and is evaluated at request time to effect the behavior of the server.</p>
<p>Some of the things you might use this directive for, you've been using mod_rewrite for up until now, so one of the side-effects of this directive is that we can reduce our reliance on mod_rewrite's complex syntax for common situations. Over the coming months, more examples will be added to the documentation, and we'll have a recipe section with many of the same sorts of scenarios that are in the mod_rewrite recipe section.</p>
<p>Let's start with a few simple examples so that you can see how it might be used. Consider a case where you have a website, www.wooga.com, and you want to compel people to use the www prefix for all requests. In the distant past, you may have used mod_rewrite for this, but here it is stated more clearly with the If directive:</p>
<pre><If "req('Host') != 'www.wooga.com'">
    RedirectMatch (.*) http://www.wooga.com$1
</If>
</pre>
<p>In plain language, that says "if the host request header isn't www.wooga.com, redirect the request to www.wooga.com."</p>
<p>In fact, most of the commonest uses of mod_rewrite can now be replaced with the If directive, making them easier to read, and, therefore, less prone to error, and the redirect looping that so often plagues RewriteRule-based solutions.</p>
<p>For more complex scenarios, there's also <ElseIf> and <Else> directives, so that you can create multi-step if ... elseif ... elseif ... else logic flows in your configuration files.</p>
<p>These directives may be used in any scope - main configuration, virtual hosts, directories, or .htaccess files - and so give you significantly more power for conditional configurations than you ever had before.</p>
<p>The term in the If statement can be any request header ($req) or environment variable ($env), or many other values.&nbsp;Expressions in these comparisons can be fairly complicated, as they can use the new&nbsp;<a href="http://httpd.apache.org/docs/2.4/expr.html">expression syntax</a>&nbsp;which is another major enhancements in httpd 2.4, and an article for another day.</p>
<p>As with many <a href="http://httpd.apache.org/docs/2.4/new_features_2_4.html">features that are brand new in 2.4</a>, you can expect more detailed official documentation in the near future, complete with many examples. For now, I'd encourage you to study the expression syntax documentation, and experiment.</p>
<div class="vimiumReset vimiumHUD" style="right: 150px; display: none;"></div>

  </div><a class="u-url" href="/httpd/entry/new_in_httpd_2_4" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
