---
layout: post
status: PUBLISHED
published: true
title: Streaming data into Apache HBase using Apache Flume
author:
  display_name: hshreedharan
  login: hshreedharan
  email: hshreedharan@apache.org
author_login: hshreedharan
author_email: hshreedharan@apache.org
id: 1eed3e39-b7f4-4045-8061-813a06dfb2b3
date: '2012-11-27 21:39:20 -0500'
categories:
- General
tags:
- flume
- hbase
comments:
- id: 0
  author: Shimon
  author_email: 492341344@qq.com
  author_url: ''
  date: '2015-05-20 07:49:00 -0400'
  content: When I use this method.I found that.All the data is loaded into the hbase
    (including raw data).Rather than the incremental data.So there will be a lot of
    useless data.And I've found that source of SimpleAsyncHbaseEventSerializer class
    is the same.I don't know Whether or not my Flume  configuration is correct.please
    help me.thank you
- id: 0
  author: windows help
  author_email: renush336@gmail.com
  author_url: http://gethelpwindows10.com
  date: '2018-07-09 05:24:56 -0400'
  content: 'Microsoft windows 10 is fully featured and complex operating system made
    by Microsoft in windows history so for any issue with related windows 10 operating
    system then come this online tutorial for fast and best response.  '
- id: 0
  author: pagotayat
  author_email: pagotayat@globaleuro.net
  author_url: http://thestily.com/
  date: '2019-03-18 14:51:48 -0400'
  content: When I use this method.I found that.All the data is loaded into the hbase
    (including raw data).Rather than the incremental data.So there will be a lot of
    useless data.And I've found that source of SimpleAsyncHbaseEventSerializer class
    is the same.I don't know Whether or not my Flume configuration is correct.please
    help me.thank you  http://thestily.com/
- id: 0
  author: dgcustomerfirst
  author_email: rinod@mymailbest.com
  author_url: ''
  date: '2019-02-06 13:30:18 -0500'
  content: "Dollar General Corporation is an American chain of variety stores headquartered
    in Goodlettsville, Tennessee. As of July 2018, Dollar General operates 15,000
    stores in 45 of the 48 contiguous United States (the exceptions being three states
    in the northwest: Idaho, Montana, and Washington). https://myhoneybakedfeedback.xyz/www-dgcustomerfirst-com/\r\n"
- id: 0
  author: neureygwiden1972
  author_email: mporritemlanp1980@gmail.com
  author_url: https://blogs.apache.org/openejb/entry/user_blog_maven_openejb_and
  date: '2019-07-20 18:26:04 -0400'
  content: mexico mexico I love the asymmetric design.
- id: 0
  author: Allan
  author_email: allankeen@gmail.com
  author_url: ''
  date: '2020-01-30 01:55:19 -0500'
  content: Fabulous information blog about apache data base. Thanks for sharing it.
    http://search.bt.com/result?p=canadacloud&Location=Location&channel=Test1
- id: 0
  author: geometry dash
  author_email: ngaythamhoa110i@gmail.com
  author_url: http://geometrydash-game.com
  date: '2019-06-12 01:13:23 -0400'
  content: 'The day passed quickly and I realized I couldn''t forget '
- id: 0
  author: windows 10 help
  author_email: apkmod27@gmail.com
  author_url: http://gethelpinwindows10.com
  date: '2019-06-27 11:11:00 -0400'
  content: Microsoft Windows 10 is a full-featured and complex operating system developed
    by Microsoft in the history of Windows. For problems with the related Windows
    10 operating system, this online tutorial provides fast and optimal answers.
- id: 0
  author: nizugala1981
  author_email: ciataskontpo1979@gmail.com
  author_url: https://blogs.apache.org/usergrid/entry/usergrid_10k_part1
  date: '2019-07-20 17:54:18 -0400'
  content: Great photos, congrats! :) interesting concept-vintage look makes the mundane
    worth a second look
- id: 0
  author: fuecardcarxy1975
  author_email: greatamgareadc1981@gmail.com
  author_url: https://blogs.apache.org/incubator/entry/announcing-new-apache-incubator-logo
  date: '2019-07-21 00:26:19 -0400'
  content: These are some creative characters! Great combination of character design
    and colours! This would start a trend.
- id: 0
  author: kerihouvert1983
  author_email: goldtranesab1972@gmail.com
  author_url: https://blogs.apache.org/logging/entry/apache_log4net_needs_help
  date: '2019-07-21 01:31:03 -0400'
  content: Beautiful work! Bright but strong visual identity! Thanks so much folks!!
- id: 0
  author: denthapsrori1976
  author_email: felttassseaho1980@gmail.com
  author_url: https://blogs.apache.org/geode/entry/welcome
  date: '2019-07-21 05:25:38 -0400'
  content: Waaaa pretty awesome, I do like this artwork! Wow, congrats man, BRAVO!
- id: 0
  author: prolacusca1988
  author_email: ersiteachlay1979@gmail.com
  author_url: https://blogs.apache.org/kafka/entry/apache-kafka-supports-more-partitions
  date: '2019-07-21 06:39:34 -0400'
  content: An amazing series, Thibaud !!! Excellent work and perfect photography !
    COOL! NICE WORK
- id: 0
  author: dgcustomerfirst com
  author_email: dovas@4tmail.com
  author_url: https://dgcustomerfirst.club/
  date: '2019-12-17 10:59:45 -0500'
  content: "Dollar General conducts the survey with its customers at dgcustomerfirst.com.
    It is the official survey site of Dollar General. To participate in the survey,
    you need to go to that site.\r\n\r\nhttps://dgcustomerfirst.club/"
- id: 0
  author: diousiralro1986
  author_email: quecontihi1976@gmail.com
  author_url: https://blogs.apache.org/couchdb/entry/couchdb_weekly_news_march_27
  date: '2019-07-21 07:43:58 -0400'
  content: Smart job! Wow! :)
- id: 0
  author: chuchvathedi1971
  author_email: badsandflyber1972@gmail.com
  author_url: https://blogs.apache.org/directory/entry/apache-mavibot-history
  date: '2019-07-21 10:26:54 -0400'
  content: Woooooow I fall in love it! 厉害哦！好好看呀
- id: 0
  author: هاست وردپرس
  author_email: amirasap@gmail.com
  author_url: https://behsazanhost.com/wordpress-hosting.html
  date: '2019-07-22 12:59:05 -0400'
  content: It's a great post. Thank you.
- id: 0
  author: Anna Bean
  author_email: annabean127@gmail.com
  author_url: ''
  date: '2019-07-26 13:20:16 -0400'
  content: Apache server is one of the revolutionary server in the world. Earlier
    we were dependent on https://iloginguide.website/icloud-for-windows/ Microsoft
    IIS server but Apache has solved this dependency.
- id: 0
  author: njmcdirect
  author_email: kehu@mail-card.com
  author_url: https://njmcdirectt.xyz/
  date: '2019-08-02 04:40:54 -0400'
  content: NJMCDirect.com is the New Jersey Municipal Court Internet traffic ticket
    information and payment site. It allows you to search for a traffic ticket or
    Time Payment Order.  https://njmcdirectt.xyz/
- id: 0
  author: Dennis
  author_email: denniscarr@gmail.com
  author_url: ''
  date: '2020-02-01 23:10:47 -0500'
  content: Thank you! Everyone in Canada Drives https://canadasautoloan.ca/bad-credit-car-loans-bc/
- id: 0
  author: Smith Alfred
  author_email: smithalfred975@gmail.com
  author_url: https://geeksfortech.net/
  date: '2019-08-23 12:12:12 -0400'
  content: Nice information blog about apache data base. Thanks for sharing it. https://geeksfortech.net/
- id: 0
  author: de casinos
  author_email: belichenko_@ukr.net
  author_url: http://schweingehabt.expert/
  date: '2020-01-24 15:20:41 -0500'
  content: "Instant Withdrawal Casino: What You Need To Know\r\nIn other casinos,
    you can do withdraw instantly, while some of them take up to a few days. If you
    are part of the VIP, you only wait 2 days or 1 hour if you are using an e-wallet.
    They are the most effective and fast-paying at online casinos, and have excellent
    client support. https://neuecasinos-at.com/ Customers can reach them via live
    chat, e-mail, or telephone. The fast withdrawal casino gives the payout instantly,
    on the same day. You do not have to worry about how long you are going to wait
    because you can enjoy your cash within minutes. You will know more about them
    as you read through this article and prepare you for what to expect. "
- id: 0
  author: Merlin
  author_email: Info@merlin.cc
  author_url: https://www.brilliant-clean.at/gebaeudereinigung-innsbruck.html
  date: '2020-01-28 01:43:54 -0500'
  content: 'Can someone explain what this is? '
- id: 0
  author: Merlin
  author_email: Info@merlin.cc
  author_url: https://www.reinigungsfirma-tirol.com
  date: '2020-01-28 01:46:19 -0500'
  content: 'Yes i do now. And i like what is in my mind. '
- id: 0
  author: Kingdom of Baby
  author_email: kingdomofbaby.com@gmail.com
  author_url: https://www.kingdomofbaby.com/
  date: '2019-10-05 11:04:42 -0400'
  content: "Kingdom of Baby is your digital go-to platform for your baby&rsquo;s well-being,
    for a healthy pregnancy and for your parenthood journey for the sake of a memorable
    experience.\r\nContact us: contact@kingdomofbaby.com\r\n \r\nTo accomplish this
    we give informations and advices for parents to make them in a full knowledge
    about their baby&rsquo;s behavior.\r\nWith this in mind, we took our first steps
    to create an environment and memorable experience for all new parents.\r\nWe focus
    on every element of care, from the first day of birth of your baby with interesting
    ideas to make you ensure a healthy environment to your baby and avoid the most
    habits you should pay attention to .\r\n\r\npregnancy, kingdomofbaby.com\r\n\r\nhttps://www.kingdomofbaby.com/toddler/milestones/\r\nhttps://www.kingdomofbaby.com/the-toddler/\r\nhttps://www.kingdomofbaby.com/"
- id: 0
  author: showbox download for android
  author_email: moznej@outlok.site
  author_url: https://dlandroid.com/showbox-apk/
  date: '2020-02-15 13:15:04 -0500'
  content: "Flume has two HBase Sinks, the HBaseSink(org.apache.flume.sink.hbase.HBaseSink)
    and AsyncHBaseSink(org.apache.flume.sink.hbase.AsyncHBaseSink). These two sinks
    will eventually converge to similar functionality, but currently each has some
    advantages over the other\r\n\r\nhttps://dlandroid.com/showbox-apk/"
- id: 0
  author: Galaxy Aircon
  author_email: galaxyaircon.com@gmail.com
  author_url: https://galaxyaircon.com/locations
  date: '2020-02-16 14:38:46 -0500'
  content: "https://galaxyaircon.com/services/\r\nhttps://galaxyaircon.com/\r\nBrands
    We Service for AC Repair in Vadodara, Gujarat, India. Carrier-Service-Center-Vadodara.
    Electrolux-Service-Center-Vadodara. Haier-Service-Center-Vadodara. Hitachi-Service-Center-Vadodara.
    LG-Service-Center-Vadodara. Mitsubishi-Service-Center-Vadodara. Kelvinator-Service-Center-Vadodara.
    OGeneral-Service-Center"
- id: 0
  author: Canada
  author_email: canadab72@gmail.com
  author_url: ''
  date: '2020-02-17 19:16:57 -0500'
  content: We believe that if one of these events fails to get written successfully,
    the sink will retry the entire digital currency transaction again. https://vancouverbitcoin.com/
- id: 0
  author: 'Burnaby '
  author_email: burnaby99@gmail.com
  author_url: ''
  date: '2020-02-17 19:20:41 -0500'
  content: "From what we can see from Nanaimo, if HBase reports failure to write even
    one Put or Increment, the entire transaction is retried \r\nhttps://sharepublic.trincoll.edu/SiteDirectory/gmtestblog/Lists/Training%20Request%20Form/DispForm.aspx?ID=1558\r\nThis
    is something for everyone in Burnaby to keep in mind while using Flume to perform
    Increments. http://co60q.esa.int/Lists/ESTEC%20Co60%20Customer%20Satisfaction/DispForm.aspx?ID=1175"
- id: 0
  author: Play Bazaar
  author_email: gangacassette111@gmail.com
  author_url: https://www.lucktest.in/resultchart.php
  date: '2020-02-19 12:11:15 -0500'
  content: "Eat a well-balanced diet. Since there is no official diabetes diet, it's
    important that you handle your condition by eating a healthy diet that is high
    in fruits, vegetables and lean meats and low in fat, sugar and simple carbohydrates.
    https://www.lucktest.in/\r\nIf you eat everything in moderation and are controlling
    your diabetes through medication, you should have fairly stable blood glucose
    levels.\r\nhttps://www.lucktest.in/ResultChart.php\r\n"
- id: 1
  author: lesingnorbo1972
  author_email: dooslaupyja1989@gmail.com
  author_url: https://blogs.apache.org/openmeetings/entry/openmeetings_3_1_2_released
  date: '2019-07-20 17:36:53 -0400'
  content: Very cool @ANNA SUBANOVA thank you so much Anna!
- id: 1
  author: ali ft
  author_email: appleidbzz@gmail.com
  author_url: https://upmusics.com/
  date: '2020-01-19 00:42:51 -0500'
  content: good job!
- id: 1
  author: دانلود قسمت 14 سریال کرگدن
  author_email: 30tplas@gmail.com
  author_url: https://max1music.ir/kargadan-part-14/
  date: '2020-02-15 15:59:25 -0500'
  content: "خلاصه سریال کرگدن \r\nدانلود قسمت چهارده سریال کرگدن با لینک مستقیم"
- id: 2
  author: Geek Squad Tech Support
  author_email: email@geektechsupport.me
  author_url: https://geektechsupport.me/
  date: '2019-05-19 09:41:18 -0400'
  content: "Our Geek Squad Tech Support Agents provide repair, installation and setup
    services on all kinds of tech at more than 1,100 Best Buy Geek Squad stores &ndash;
    including computer & tablet repair, setup and support, TV & home theater repair,
    car stereo & GPS installation, cell phone repair and home appliance repair. We
    fix most makes and models, no matter where you bought them and can show you how
    to get the most out of your technology. \r\nhttps://igeeksquad.org "
- id: 2
  author: Laura  Elison
  author_email: samishleather1@gmail.com
  author_url: ''
  date: '2020-01-27 12:23:41 -0500'
  content: Apache Flume is a conveyed, dependable, and accessible framework for proficiently
    gathering, conglomerating and moving a lot of log information from a wide range
    of sources to a concentrated information store. The utilization of Apache Flume
    isn't just limited to log information accumulation.
- id: 2
  author: dgcustomer first
  author_email: daniilm@gmail.com
  author_url: https://survs.com/survey/e50zqs79mo
  date: '2019-10-27 11:51:21 -0400'
  content: Interesting post from the admin https://www.onrpg.com/boards/members/1942053-dgcustomerfirst
    and http://www.divephotoguide.com/user/dgcustomerfirst/
- id: 2
  author: Toronto
  author_email: toront@gmail.com
  author_url: ''
  date: '2020-02-17 19:09:59 -0500'
  content: 'For future event, can this serializer be configured by the following configuration:
    https://psychictoronto.ca/ '
- id: 3
  author: SarkariResult.
  author_email: rightlook4@gmail.com
  author_url: https://sarkari-result.me/
  date: '2019-10-06 16:46:12 -0400'
  content: If you want to get information about the job notification, exam and interview
    dates, and Sarkari Result. you will get many websites of the Government of India.
    You can easily find out the result for any Government examination.
- id: 4
  author: Mrsmith
  author_email: mrsmith6888@gmail.com
  author_url: https://supportsquadtech.org/geek-squad-chat/
  date: '2020-01-16 13:36:46 -0500'
  content: geek squad chat is a well-known tech service provider company in the world.
    Our experts offer support for all types of technical problems faced in computers,
    laptops and smartphones. They even provide solutions for home appliances, TV,
    smart wearable and home theatre. We help our customers in setup, installation,
    repair, uninstallation, replacement, damage and other issues. Our dedicated support
    team is always available at your service and assures you for the quick resolutions.
    Book geek squad chat today and get your device fixed without wasting much time.
- id: 5
  author: Dan Sandler
  author_email: dan@the-sandlers.com
  author_url: http://www.datadansandler.com
  date: '2013-03-23 15:31:33 -0400'
  content: "Great post, very informative.  \r\n\r\nOne quick observation.  I could
    be wrong, but I believe the following line of code in the SplittingSerializer
    class:\r\n\r\nbyte[][] columnNames = new byte[names.length][];\r\n\r\nshould be\r\n\r\ncolumnNames
    = new byte[names.length][];\r\n\r\nI mention this because columnNames is declared
    earlier as \r\n\r\nprivate byte[][] columnNames;\r\n\r\nOtherwise the columnNames
    reference below will evaluate as null:\r\n\r\n      PutRequest req = new PutRequest(table,
    currentRowKey, colFam,\r\n              columnNames[i], cols[i].getBytes());"
- id: 5
  author: riptersbobsty1973
  author_email: urtenbonim1981@gmail.com
  author_url: https://blogs.apache.org/sentry/entry/apache_sentry_1_4_0
  date: '2019-07-21 09:54:21 -0400'
  content: waiting for your next project. Good job ! keep it up
- id: 5
  author: Merlin
  author_email: Info@merlin.cc
  author_url: https://www.reinigungsfirma-innsbruck.com
  date: '2020-01-28 01:45:13 -0500'
  content: 'Now i understand this complexity. '
- id: 6
  author: nox
  author_email: noxpc@gmail.com
  author_url: ''
  date: '2019-03-18 09:41:59 -0400'
  content: "Thank you very much for all the android apps and games developers because
    I can now enjoy all latest movies and tv shows on pc using the nox android emulator.
    Download it from https://noxforpc.com/\r\n"
- id: 6
  author: Merlin
  author_email: Info@merlin.cc
  author_url: https://www.limousinen-service-innsbruck.com
  date: '2020-01-28 01:48:11 -0500'
  content: 'Can you also explain a Apache Strip down in one of your forums please. '
- id: 7
  author: reysvilcunsu1972
  author_email: longstabnana1984@gmail.com
  author_url: https://blogs.apache.org/couchdb/entry/couchdb_conf_videos
  date: '2019-07-20 23:35:58 -0400'
  content: Nice Oh boy! You&rsquo;re so talented!!
- id: 8
  author: natalia21
  author_email: zylacourtney@gmail.com
  author_url: ''
  date: '2019-07-23 10:17:07 -0400'
  content: "This is the great apache data base information.!\r\n<a href=\"https://www.crazyfigure.com/\">Crazyfigure</a>"
- id: 9
  author: matchcomdaicroon1970
  author_email: ufidcharzaps1974@gmail.com
  author_url: https://blogs.apache.org/openejb/entry/openejb_3_1_1_coming
  date: '2019-07-20 16:51:56 -0400'
  content: Enjoy your game~超喜欢 I love your illustrations very much! Excellent use
    of texture and style!
- id: 26
  author: Camellia
  author_email: fitrayik@yevme.com
  author_url: ''
  date: '2019-09-04 07:38:04 -0400'
  content: "If there are any questions then only here <a href=https://playclub-uk.com/mobile-casinos-no-deposit/>no
    deposit mobile casinos</a> \L they can be found and they will help you very much\r\n"
- id: 27
  author: jay
  author_email: hongqianli@sailvan.com
  author_url: ''
  date: '2015-07-31 07:30:43 -0400'
  content: hello, I would like to use the flume hbasesink on a not hbase node computer
    to write data to the remote flume.How to configure?
- id: 33
  author: boommusic
  author_email: amin_kariminet@yahoo.com
  author_url: https://boommusic.ir/
  date: '2020-02-17 22:39:19 -0500'
  content: "Great for your site\r\nhttps://boommusic.ir/"
- id: 56
  author: ios mark
  author_email: aleod111@gmail.com
  author_url: ''
  date: '2018-07-17 08:51:35 -0400'
  content: "Wow actually i loved your blog man..Thanks for sharing awesome content..\r\nhttps://downloadvideoderapp.com\r\nhttps://onlinenotepadplusplus.com"
- id: 60
  author: nanbirdhypank1984
  author_email: boeriarite1980@gmail.com
  author_url: https://blogs.apache.org/openejb/entry/alternate_descriptors_for_testing
  date: '2019-07-21 09:21:25 -0400'
  content: I really liked the idea with the figures The composition is as mouth watering
    as the chocolate!
- id: 63
  author: freememdapha1979
  author_email: cervprolreemee1988@gmail.com
  author_url: https://blogs.apache.org/logging/entry/welcome_gary_gregory
  date: '2019-07-21 10:59:55 -0400'
  content: Simple yet effective! !!--!!
- id: 67
  author: film izle
  author_email: dadadada@gmail.com
  author_url: https://altyazilifilm.live
  date: '2019-06-29 20:29:03 -0400'
  content: "Microsoft Windows 10 is a full-featured and complex operating system developed
    by Microsoft in the history of Windows. For problems with the related Windows
    10 operating system, this online tutorial provides fast and optimal answers.\r\n"
- id: 69
  author: clamcamesi1977
  author_email: puhommocu1986@gmail.com
  author_url: https://blogs.apache.org/tajo/entry/apache_tajo_0_2_0
  date: '2019-07-21 07:12:02 -0400'
  content: Great project out there! Great work. :)
- id: 78
  author: Edmonton
  author_email: edmontons@gmail.com
  author_url: ''
  date: '2020-02-20 17:21:44 -0500'
  content: Thanks apache! Content marketing can be an extremely efficient, low-cost
    method of growing your auto removal business  https://www.edmontoncashforjunkcars.com/
    we are always looking for new ways to spark engagement.
- id: 80
  author: Vancouver
  author_email: vancouverbc7@gmail.com
  author_url: ''
  date: '2020-02-17 19:05:40 -0500'
  content: 'This is really invaluable information about recycling technology. We concur!
    The removal program is beneficial to all  https://nobletowing.ca/scrap-car-removal-program/
    apache hbase is generally widely in use and also in our website''s cpanel i believe. '
- id: 81
  author: Christopher Marcus
  author_email: edwardme123@yahoo.com
  author_url: ''
  date: '2019-06-25 04:28:14 -0400'
  content: Fascinating data for all the Apache.org Users. The majority of us generally
    scan for stores which offer AtoZ things at one spot here is the Kroger store,
    Ans for your prerequisites. Additionally, Kroger conducts an online overview to
    take supposition from its clients and declares $5k for review victors https://kroger-feedback-survey.com/
- id: 87
  author: what is thinspo
  author_email: saavan.andre@two0aks.com
  author_url: https://theproanatips.com/thinspiration-diet/
  date: '2018-10-25 11:24:16 -0400'
  content: please use this link.
- id: 88
  author: dulgebeeni1975
  author_email: leviphoso1973@gmail.com
  author_url: https://blogs.apache.org/drill/entry/apache_drill_beta_release_see
  date: '2019-07-21 06:06:44 -0400'
  content: So cute and amazing artwork! Nice job, you style and colors this is beatiful.
- id: 92
  author: eledcawa1979
  author_email: sanddelingstar1981@gmail.com
  author_url: https://blogs.apache.org/owb/entry/welcome_romain_manni_bucau_as
  date: '2019-07-21 04:53:36 -0400'
  content: Wow.....beautiful.......... Great Job!
- id: 225
  author: ali ft
  author_email: appleidbzz@gmail.com
  author_url: https://music-fa.com/artist/%d8%b4%d9%87%d8%a7%d8%a8-%d9%85%d8%b8%d9%81%d8%b1%db%8c/
  date: '2020-01-19 00:43:28 -0500'
  content: thanks for article good
- id: 318
  author: https://savegyd.com
  author_email: admin@savegyd.com
  author_url: https://savegyd.com
  date: '2018-11-03 19:57:10 -0400'
  content: "Thanks for your article.\r\nI am a big fan of you."
- id: 544
  author: Merlin
  author_email: Info@merlin.cc
  author_url: https://www.brilliant-clean.at
  date: '2020-01-28 01:42:32 -0500'
  content: 'Very interesting codings. '
- id: 866
  author: sarkariresult.
  author_email: seotech0804@gmail.com
  author_url: https://sarkari-result.me/
  date: '2019-09-25 17:40:31 -0400'
  content: If you want to get information about the job notification, exam and interview
    dates and, you will get many websites of the Government of India. You can easily
    find out the result for any Government examination.
- id: 3774
  author: natalia21
  author_email: zylacourtney@gmail.com
  author_url: https://www.crazyfigure.com/
  date: '2019-07-05 16:02:55 -0400'
  content: This is really cool information about technology.! well apache hbase is
    really generally in use and in website cpanel
- id: 4930
  author: kroger survey link
  author_email: kroger2@gmail.com
  author_url: https://www.thekrogerfeedback.com/survey-page/
  date: '2019-04-26 10:28:43 -0400'
  content: Interesting information for all the Apache.org Users. Most of us always
    search for stores which offer AtoZ items at one place here is the Kroger store,
    Ans for your requirements. Also, Kroger conducts an online survey https://www.thekrogerfeedback.com/
    to take opinion from its customers and announces $5k for survey winners
- id: 24755
  author: mapquest driving directions
  author_email: sukaminl546@gmail.com
  author_url: https://mapquest-drivingdirections.com
  date: '2019-11-15 04:15:32 -0500'
  content: Your article makes me more experienced and impressed, I hope you will have
    more good posts in the near future to share with readers.
- id: 37699
  author: Keeley
  author_email: fitrayik@yevme.com
  author_url: ''
  date: '2019-09-04 07:40:18 -0400'
  content: "Only here you can find all the answers  https://playclub-uk.com/instant-withdrawal-casino/
    to the questions\r\n"
- id: 50411
  author: jennifer Winget
  author_email: jenniwinget606@gmail.com
  author_url: ''
  date: '2019-06-22 12:04:35 -0400'
  content: "I used Apache web server on my academic project work. Really easy to use
    it. In this article clearly explained about data streaming using Apache Flume.
    \tBefore reading this post I have no idea about data streaming But now I am happy
    to read this article to improve my knowledge level through this article. https://hostsailorservices.com/hostsailor-com-services/"
- id: 62447
  author: Nanaimo
  author_email: nanaimobc@gmail.com
  author_url: ''
  date: '2020-01-30 01:58:29 -0500'
  content: Everyone is awaiting your next project. Good job ! keep this up. https://burdenmarketing.ca/
- id: 81481
  author: Sam Antwi
  author_email: kwakusantwi@gmail.com
  author_url: https://quotehunt.co.uk/
  date: '2019-07-30 18:01:04 -0400'
  content: I alway love learning new things about apache server. Even though this
    page is old I have picked up new knowledge. https://quotehunt.co.uk
- id: 200326
  author: Johan smith
  author_email: johansmith6888@gmail.com
  author_url: https://geektechsquad.org/geek-squad-chat/
  date: '2020-01-24 16:37:47 -0500'
  content: " geek squad chat is a well-known tech service provider company in the
    world. Our experts offer support for all types of technical problems faced in
    computers, laptops and smartphones. They even provide solutions for home appliances,
    TV, smart wearable and home theatre. We help our customers in setup, installation,
    repair, uninstallation, replacement, damage and other issues. Our dedicated support
    team is always available at your service and assures you for the quick resolutions.
    Book geek squad chat today and get your device fixed without wasting much time."
- id: 7447935
  author: zain david
  author_email: omarandemad@gmail.com
  author_url: ''
  date: '2019-07-15 16:48:56 -0400'
  content: "such a great post.\r\n http://www.gtagame100.com\r\n http://www.subway-game.blogspot.com\r\n
    http://www.zumagame100.blogspot.com"
permalink: flume/entry/streaming_data_into_apache_hbase
---
<p><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"><font face="georgia, times new roman, times, serif"><font style="font-size: medium;"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Apache Flume was conceived as a fault-tolerant ingest system for the Apache Hadoop ecosystem. Flume comes packaged with an HDFS Sink which can be used to write events into HDFS, and two different implementations of HBase sinks to write events into HBase. You can read about the basic architecture of Apache Flume 1.x </span><a href="https://blogs.apache.org/flume/entry/flume_ng_architecture"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">in this blog post</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">. </span></font></font><strong id="internal-source-marker_0.83681909320876" style="font-size: medium; font-weight: normal;"><font face="georgia, times new roman, times, serif"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> You can also read about how Flume&rsquo;s File Channel persists events and still provides extremely high performance in an </span><a href="https://blogs.apache.org/flume/entry/apache_flume_filechannel"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">earlier blog post</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">. </span></font></strong><font face="georgia, times new roman, times, serif"><font style="font-size: medium;"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">In this article, we will explore how to configure Flume to write events into HBase, and write custom serializers to write events into HBase in a format of the user&rsquo;s choice. </span><br /><span style="font-size: 19px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Data is stored in HBase as tables. Each table has one or more column families, and each column family has one or more columns. HBase stores all columns in a column family in physical proximity. Each row is identified by a key known as the row key. To insert data into HBase, the table name, column family, column name and row key have to be specified. More details on the HBase data model can be found </span><a href="http://hbase.apache.org/book.html#datamodel"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">in the HBase documentation</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">.</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Flume has two HBase Sinks, the HBaseSink(org.apache.flume.sink.hbase.HBaseSink) and AsyncHBaseSink(org.apache.flume.sink.hbase.AsyncHBaseSink). These two sinks will eventually converge to similar functionality, but currently each has some advantages over the other:</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /></font> </font> </p>
<ul style="font-size: medium; margin-top: 0pt; margin-bottom: 0pt;">
<li dir="ltr" style="list-style-type: disc; font-size: 15px; background-color: transparent; vertical-align: baseline;"><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"><font face="georgia, times new roman, times, serif">The AsyncHBaseSink currently gives better performance than the HBaseSink, primarily because it makes non-blocking calls to HBase.</font></span></li>
<li dir="ltr" style="list-style-type: disc; font-size: 15px; background-color: transparent; vertical-align: baseline;"><font face="georgia, times new roman, times, serif"><span style="background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">The HBaseSink will soon support secure HBase clusters (<a href="https://issues.apache.org/jira/browse/FLUME-1626">FLUME-1626</a>) and the new HBase IPC which was introduced in HBase 0.96.</span></font></li>
</ul>
<p style="font-size: medium;"><font face="georgia, times new roman, times, serif"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">The configuration for both these sinks are very similar. A sample configuration is shown below:</span></font> </p>
<pre><font size="3"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#Use the AsyncHBaseSink
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.type = org.apache.flume.sink.hbase.AsyncHBaseSink
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#Use the HBaseSink
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#host1.sinks.sink1.type = org.apache.flume.sink.hbase.HBaseSink
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.channel = ch1
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.table = transactions
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.columnFamily = clients
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.column = charges
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.batchSize = 5000
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#Use the SimpleAsyncHbaseEventSerializer that comes with Flume
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.serializer = org.apache.flume.sink.hbase.SimpleAsyncHbaseEventSerializer
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#Use the SimpleHbaseEventSerializer that comes with Flume
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#host1.sinks.sink1.serializer = org.apache.flume.sink.hbase.SimpleHbaseEventSerializer
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.serializer.incrementColumn = icol
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.channels.ch1.type=memory</span></font></pre>
<p><font face="georgia, times new roman, times, serif"><font><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">In the above config, the &ldquo;table&rdquo; parameter specifies the table in HBase that the sink has to write to - in this case, &ldquo;transactions&rdquo;; the &ldquo;columnFamily&rdquo; parameter specifies the column family in that table to insert the data into, in this case, &ldquo;clients&rdquo;; and the &ldquo;column&rdquo; parameter specifies the column in the column family to write to, in this case &ldquo;charges&rdquo;. Apart from this the sink requires the channel to be configured, like all other Flume Sinks. The other interesting configuration parameters are the &ldquo;serializer&rdquo; and the &ldquo;serializer.*&rdquo; parameters. The two sinks use different interfaces for the serializer. In both cases, the serializer is a class that converts the Flume Event into an HBase-friendly format. This piece of code that &ldquo;translates&rdquo; the events is usually specific to the schema used by the user&rsquo;s HBase cluster and is usually implemented by the user. All configuration parameters passed in as &ldquo;serializer.*&rdquo; are passed to the serializer. This configuration can be used to set up any internal state the serializer needs.</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">In case of the HBaseSink, the serializer converts a Flume </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/Event.html" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Event</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> into one or more HBase </span><a href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Put.html" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Put</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">s and/or </span><a href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Increment.html" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">Increment</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">s. The serializer must implement the </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/HbaseEventSerializer.html" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">HbaseEventSerializer</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">. The serializer is instantiated when the sink is started by the Flume configuration framework. For each event processed by the sink, the sink calls the </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/HbaseEventSerializer.html#initialize(org.apache.flume.Event,%20byte[])" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">initialize</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> method in the serializer. The serializer must &ldquo;translate&rdquo; the Flume Event into HBase puts and increments which should be returned by </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/HbaseEventSerializer.html#getActions()" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">getActions</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> and </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/HbaseEventSerializer.html#getIncrements()" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">getIncrements</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> methods. &nbsp;These puts and increments are then sent over the wire to the HBase cluster. When the sink stops, this instance of the serializer is </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/HbaseEventSerializer.html#close()" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">closed </span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">by the HBaseSink.</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">The AsyncHBaseSink&rsquo;s serializer must implement </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/AsyncHbaseEventSerializer.html" style="font-size: medium;"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">AsyncHbaseEventSerializer</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">. </span></font> </p>
<p style="font-size: medium; display: inline !important;"><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">In this case, the </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/AsyncHbaseEventSerializer.html#initialize(byte[],%20byte[])"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">initialize</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> method is called once by the sink, when it starts up. For every event, the sink calls the <a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/AsyncHbaseEventSerializer.html#setEvent(org.apache.flume.Event)">setEvent</a> method and then calls the </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/AsyncHbaseEventSerializer.html#getActions()"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">getActions</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> and </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/AsyncHbaseEventSerializer.html#getIncrements()"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">getIncrements</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> methods - similar to the HBaseSink. When the sink is stopped, the serializer&rsquo;s </span><a href="http://flume.apache.org/releases/content/1.2.0/apidocs/org/apache/flume/sink/hbase/AsyncHbaseEventSerializer.html#cleanUp()"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">cleanUp</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> method is called. Notice that the methods do not return the standard HBase Puts and Increments, but </span><a href="http://tsunanet.net/~tsuna/asynchbase/api/org/hbase/async/PutRequest.html"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">PutRequest</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> and </span><a href="http://tsunanet.net/~tsuna/asynchbase/api/org/hbase/async/AtomicIncrementRequest.html"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">AtomicIncrementRequest</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> from the </span><a href="http://tsunanet.net/~tsuna/asynchbase/api/"><span style="font-size: 15px; color: #1155cc; background-color: transparent; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;">asynchbase</span></a><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> API. These are roughly equivalent to the HBase Puts and Increments respectively, with some differences. </span></strong></strong></p>
<p><strong id="internal-source-marker_0.83681909320876" style="font-size: medium; font-weight: normal;"> </p>
<p style="display: inline !important;"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">An example of such a serializer is below. </span></p>
<p></strong><br /> </font> </p>
<pre><font size="3"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">/**
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> * A serializer for the AsyncHBaseSink, which splits the event body into
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> * multiple columns and inserts them into a row whose key is available in
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> * the headers
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> */
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">public class SplittingSerializer implements AsyncHbaseEventSerializer {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private byte[] table;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private byte[] colFam;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private Event currentEvent;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private byte[][] columnNames;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private final List<PutRequest> puts = new ArrayList<PutRequest>();
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private final List<AtomicIncrementRequest> incs = new ArrayList<AtomicIncrementRequest>();
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private byte[] currentRowKey;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;private final byte[] eventCountCol = "eventCount".getBytes();</span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;@Override
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;public void initialize(byte[] table, byte[] cf) {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;this.table = table;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;this.colFam = cf;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;}</span>

<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;@Override
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;public void setEvent(Event event) {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;// Set the event and verify that the rowKey is not present
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;this.currentEvent = event;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;String rowKeyStr = currentEvent.getHeaders().get("rowKey");
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;if (rowKeyStr == null) {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new FlumeException("No row key found in headers!");
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;}
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;currentRowKey = rowKeyStr.getBytes();
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;}</span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;@Override
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;public List<PutRequest> getActions() {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;// Split the event body and get the values for the columns
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;String eventStr = new String(currentEvent.getBody());
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;String[] cols = eventStr.split(",");
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;puts.clear();
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;for (int i = 0; i < cols.length; i++) {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Generate a PutRequest for each column.
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PutRequest req = new PutRequest(table, currentRowKey, colFam,
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;columnNames[i], cols[i].getBytes());
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts.add(req);
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;}
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;return puts;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;}</span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;@Override
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;public List<AtomicIncrementRequest> getIncrements() {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;incs.clear();
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;//Increment the number of events received
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;incs.add(new AtomicIncrementRequest(table, "totalEvents".getBytes(), colFam, eventCountCol));
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;return incs;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;}</span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;@Override
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;public void cleanUp() {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;table = null;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;colFam = null;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;currentEvent = null;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;columnNames = null;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;currentRowKey = null;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;}</span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;@Override
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;public void configure(Context context) {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;//Get the column names from the configuration
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;String cols = new String(context.getString("columns"));
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;String[] names = cols.split(",");
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;byte[][] columnNames = new byte[names.length][];
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;int i = 0;
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;for(String name : names) {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;columnNames[i++] = name.getBytes();
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;}
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;}</span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;@Override
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;public void configure(ComponentConfiguration conf) {
</span><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;}</span>
<span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">}</span></font></pre>
<p style="font-size: medium;"><span style="font-size: 15px; font-family: Arial; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"> </strong></p>
<p style="font-size: medium; display: inline !important;"><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"></strong></strong></strong></p>
<p><strong id="internal-source-marker_0.83681909320876" style="font-size: medium; font-weight: normal;"> </p>
<p style="display: inline !important;"><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"><strong id="internal-source-marker_0.83681909320876" style="font-weight: normal;"><font face="georgia, times new roman, times, serif"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">This serializer splits the event body based on a delimiter and inserts each split into a different column. The row is defined in the event header. When each event is received, a counter is incremented to keep track of the number of events received as well.</span></font></strong></strong></p>
<p><font face="georgia, times new roman, times, serif"><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">This serializer can be configured by the following configuration:</span></font> </p>
<p></strong> </p>
<p style="font-size: medium;">
<p></strong> </p>
<pre><font size="3"><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.type = org.apache.flume.sink.hbase.AsyncHBaseSink
</span></b></strong><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.channel = ch1
</span></b></strong><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.table = transactions
</span></b></strong><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.columnFamily = clients
</span></b></strong><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.batchSize = 5000</span></b></strong></font>
<font size="3"><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#The serializer to use
</span></b></strong><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.serializer = org.apache.flume.sink.hbase.SplittingSerializer</span></b></strong></font>
<font size="3"><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">#List of columns each event writes to.
</span></b></strong><strong style="font-weight: normal;"><b id="internal-source-marker_0.83681909320876" style="font-family: Times; font-weight: normal;"><span style="font-family: 'Courier New'; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">host1.sinks.sink1.serializer.columns = charges,date,priority</span></b></strong></font></pre>
<p><strong id="internal-source-marker_0.83681909320876" style="font-size: medium; font-weight: normal;"><font face="georgia, times new roman, times, serif"><span style="font-size: 15px; background-color: transparent; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">Internals of the HBaseSink and AsyncHBaseSink</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">The HBaseSink uses the HBase HTable API to write events out to HBase. HTable supports batching of Puts, but only HBase 0.92+ supports batching of Increments. Currently, the HBase Sink is single-threaded and will call the serializer to get the Puts and Increments once per event it processes. HBase Put and Increments are sent to HBase via blocking calls, which means the next event is read and passed to the serializer only once the current event is successfully written to HBase. Each transaction consists of at most the number of events specified by the batchSize property in the configuration. Like all other Flume sinks, if one of these events fails to get written successfully, the sink will retry the entire transaction again.</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">On the other hand, the AsyncHBaseSink uses the asynchbase API, and sends out events asynchronously to HBase. The AsyncHBaseSink, in the same way as the HBase sink, generates Puts and Increments for each event. Once the Puts and Increments are generated, the sink sends them out immediately to HBase and moves on to process the next event. Success or failure is handled through callbacks. Again, each transaction consists of at most the number of events specified by the batchSize configuration parameter. The sink waits until either success callbacks are received for all the events sent, or at least one error callback is received. If an error callback is received, the entire transaction is retried, in true Flume style. </span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">A word of caution</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">As you can see, if HBase reports failure to write even one Put or Increment, the entire transaction is retried - this is how Flume&rsquo;s at-least-once semantics work, and most Flume sinks operate in the same way. In case of HBase Increments, this means it is possible that the same event would cause a counter to be incremented more than once. This is something to keep in mind while using Flume to perform Increments. Also, if the serializer is not idempotent, then this means that it is possible that the same event can cause multiple different Puts to be written to HBase. Imagine a case where we are talking about credit card transactions represented by the event. If the same event can generate different Puts each time, it is possible that HBase would have multiple records of the same transactions, which is probably not desired.</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">The AsyncHBaseSink is known to give better performance than the HBaseSink primarily because of the non-blocking nature of the underlying API it uses. The HBase community is working on improving the HBase client API to improve its performance, which would vastly improve the HBaseSink performance.</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;"></span><br /><span style="font-size: 15px; background-color: transparent; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">Conclusion</span><br /><span style="font-size: 15px; background-color: transparent; vertical-align: baseline; white-space: pre-wrap;">Flume is an excellent tool to write events out to the different storage systems in the Hadoop ecosystem including HBase. The HBase sinks provide the functionality to write data to HBase in your own schema and allows the user to &ldquo;map&rdquo; the Flume event to HBase data.</span></font><br /></strong> </p>
