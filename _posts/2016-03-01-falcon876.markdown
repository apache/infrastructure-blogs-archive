---
layout: post
title: What's new in Falcon 0.9?
date: '2016-03-01T11:35:42+00:00'
categories: falcon
---
<p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">With new feature requirements flowing in constantly, Falcon project is making more frequent releases to ensure the features become available to the users at the earliest. &nbsp;The latest in this string of releases is Falcon 0.9 that was announced last week. There are many new features that the community worked on and a whole lot of product improvements. Some of the features that stand out are:</span></p> 
  <p style="font-family: Verdana; font-size: 13.3333px; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; display: inline ! important; background-color: transparent;" dir="ltr"> </p> 
  <ul> 
    <li><span style="font-size: 9.33333px; font-family: &quot;Times New Roman&quot;; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"> </span><span style="font-size: 18.6667px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Native time-based scheduling</span></li> 
    <li><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">Ability to import from and export to a database</span></li> 
    <li><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">Additional API support in Falcon Unit</span></li> 
  </ul> 
  <p> </p> 
  <p style="font-family: Verdana; font-size: 13.3333px; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; background-color: transparent;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"></span></p> 
  <h1 style="line-height: 1.77187; margin-top: 2pt; margin-bottom: 0pt; margin-right: 16pt; text-align: justify;" dir="ltr"><span style="font-size: 21.3333px; font-family: Arial; color: #000000; font-weight: 700; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Native time-based scheduling</span></h1> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Falcon has been using Oozie as its scheduling engine. While the use of Oozie works reasonably well, there are scenarios where Oozie scheduling is proving to be a limiting factor, such as:</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"> </p> 
  <ul> 
    <li><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">Simple periodic scheduling with no gating conditions.</span></li> 
    <li><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">Calendar based time triggers, example, last working day of every month.</span></li> 
    <li><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">Scheduling based on data avail</span><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">ability for a-periodic datasets.</span></li> 
    <li><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">External triggers.</span></li> 
    <li><span style="font-family: Arial; font-size: 18.6667px; line-height: 1.38; white-space: pre-wrap; background-color: transparent;">Data based predicates such as availability of a minimum subset of instances of data.</span></li> 
  </ul> 
  <p> <span style="font-family: Arial; font-size: 18.6667px; white-space: pre-wrap; line-height: 1.38; text-align: justify; background-color: transparent;">To overcome these limitations, a native scheduler will be built and released over the next few releases of Falcon giving users an opportunity to use it and provide early feedback. In 0.9 release, only time-based scheduling without data dependency is supported.</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Before natively scheduling processes on Falcon, you must make some changes to </span><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">startup.properties</span><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">. For more details refer -&gt; </span><a style="text-decoration: none;" href="http://falcon.apache.org/0.9/FalconNativeScheduler.html"><span style="font-size: 18.6667px; font-family: Arial; color: #bb0000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">http://falcon.apache.org/0.9/FalconNativeScheduler.html</span></a><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">. Once that is done, you can schedule a process using the native scheduler as follows:</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">falcon entity -type process -name &lt;process name&gt; -schedule -properties falcon.scheduler:native</span></p> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">All the entity and instance APIs work seamlessly irrespective of whether the entity is scheduled on Oozie or natively.</span></p> 
  <h1 style="line-height: 1.77187; margin-top: 2pt; margin-bottom: 0pt; margin-right: 16pt; text-align: justify;" dir="ltr"><span style="font-size: 21.3333px; font-family: Arial; color: #000000; font-weight: 700; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Data Import and Export</span></h1> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #333333; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">In this release, Falcon provides constructs to periodically bring raw data from external data sources (like databases, drop boxes etc.) onto Hadoop and push data computed on Hadoop onto external data sources. Currently, Falcon only supports Relational Databases (e.g. Oracle, MySQL etc) via JDBC as external data source. The future releases will add support for other external data sources.</span></p> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #333333; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">To allow users to specify an external data source (or sink), Falcon has introduced a new entity type,</span><span style="font-size: 18.6667px; font-family: Arial; color: #333333; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">datasource</span><span style="font-size: 18.6667px; font-family: Arial; color: #333333; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">. Users can provide the datasource connection and JDBC connector details declaratively in the datasource definition. Users then need to submit this entity as follows:</span></p> 
  <p><span style="font-family: Verdana; font-size: 18.6667px; font-style: italic; line-height: 25.76px; text-align: justify; white-space: pre-wrap;">falcon entity -submit -type datasource -file mysql_datasource.xml</span></p> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #333333; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">This datasource can then be referenced in the feed definition for import or export operations as shown below:</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"><i>&lt;feed description=&quot;Customer data&quot; name=&quot;CustomerFeed&quot; xmlns=&quot;uri:falcon:feed:0.1&quot;&gt;</i></span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"><i>&lt;clusters&gt;</i></span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><i><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">&lt;cluster name=&quot;testCluster&quot; type=&quot;source&quot;&gt;</span><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"><br class="kix-line-break" /></span><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">&lt;import&gt;</span></i></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; text-indent: 36pt;" dir="ltr"><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"><i>&lt;source name=&quot;test-hsql-db&quot; tableName=&quot;customer&quot;&gt;</i></span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt; text-indent: 36pt;" dir="ltr"><i><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"></span><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">.....</span></i></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 14.6667px; font-family: Arial; color: #000000; font-weight: 400; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"><i>&lt;/import&gt;</i></span></p> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #333333; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">The above feed can then be submitted and scheduled for periodic import of data. For more details refer -&gt; </span><a style="text-decoration: none;" href="http://falcon.apache.org/0.9/ImportExport.html"><span style="font-size: 18.6667px; font-family: Arial; color: #bb0000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">http://falcon.apache.org/0.9/ImportExport.html</span></a></p> 
  <h1 style="line-height: 1.38; margin-top: 2pt; margin-bottom: 0pt; margin-right: 16pt;" dir="ltr"><span style="font-size: 21.3333px; font-family: Arial; color: #000000; font-weight: 700; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Additional API support in Falcon Unit</span></h1> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Falcon Unit has been enhanced to add support for entity delete, update and validate APIs, instance management APIs and admin APIs. You can unit test your Falcon processes in your local environment (or a cluster) and use all the Falcon APIs in your test for validations. Testing your process with data dependency is as simple as:</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">submitCluster();</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">submit(EntityType.Feed, clicks.xml);</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">createData(&quot;HourlyClicks&quot;, &quot;local&quot;, scheduleTime, test-data, numinstances);</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">submit(EntityType.Process, daily_clicks.xml);</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">APIResult result = scheduleProcess(&quot;daily_clicks_agg&quot;, startTime, numInstances, clusterName);</span></p> 
  <p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">waitForStatus(EntityType.</span><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 700; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">PROCESS</span><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">.name(),&quot;daily_clicks_agg&quot;, scheduleTime, InstancesResult.WorkflowStatus.</span><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 700; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">SUCCEEDED</span><span style="font-size: 13.3333px; font-family: Verdana; color: #000000; font-weight: 400; font-style: italic; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">);</span></p> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">For more usage examples, you can see example </span><a style="text-decoration: none;" href="https://github.com/apache/falcon/blob/master/unit/src/test/java/org/apache/falcon/unit/TestFalconUnit.java"><span style="font-size: 18.6667px; font-family: Arial; color: #bb0000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">here</span></a><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">.</span></p> 
  <h1 style="line-height: 1.38; margin-top: 2pt; margin-bottom: 0pt; margin-right: 16pt;" dir="ltr"><span style="font-size: 21.3333px; font-family: Arial; color: #000000; font-weight: 700; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Other notable improvements include:</span></h1> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 700; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Ability to capture Hive DR replication metrics</span><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"> - Hive DR feature introduced in Falcon 0.8 invokes replication job to transfer Hive metadata and data from source to destination. In Falcon 0.9, ability to capture the data transfer details such as bytes transferred, files copied by replication job, etc. has been introduced, along with ability to retrieve these details from CLI.</span></p> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 700; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Support for re-tries of timed out instances</span><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"> - Ability to retry FAILED instances has now been extended to add ability to retry TIMED_OUT instances too. This is useful in scenarios where feed delays are expected. User can now specify retry with periodic/exponential back-off without having to specify a large timeout value.</span></p> 
  <p style="line-height: 1.755; margin-top: 0pt; margin-bottom: 0pt; text-align: justify;" dir="ltr"><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">Go ahead, </span><a style="text-decoration: none;" href="http://www.apache.org/dyn/closer.lua/falcon/0.9"><span style="font-size: 18.6667px; font-family: Arial; color: #bb0000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;">download</span></a><span style="font-size: 18.6667px; font-family: Arial; color: #000000; font-weight: 400; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap; background-color: transparent;"> Falcon 0.9 and try out the new features.</span></p> 
  <p> </p> 
  <p> </p> 
  <p> </p> 
  <p> </p>
