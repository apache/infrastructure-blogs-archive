<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Apache Ignite 2.12.0: CDC, Index Query API, Vulnerabilities Fixes | Blogs Archive</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Apache Ignite 2.12.0: CDC, Index Query API, Vulnerabilities Fixes" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="As of January 14, 2022, Apache Ignite 2.12 has been released. You can directly check the full list of resolved Important JIRA tasks but here let&rsquo;s briefly overview some valuable improvements. Vulnerability Updates The Apache Ignite versions lower than 2.11.1 are vulnerable to CVE-2021-44832 which is related to the ignite-log4j2 module usage. The release also fixes 10+ CVE&rsquo;s of various modules. See release notes for more details. Change Data Capture Change Data Capture (CDC) is a data processing pattern used to asynchronously receive entries that have been changed on the local node so that action can be taken using the changed entry. Below are some of the CDC use cases: Streaming changes in Warehouse; Updating search index; Calculating statistics (streaming queries); Auditing logs; Async interaction with external systems: Moderation, business process invocation, etc. Ignite implements CDC with the ignite-cdc.sh application and Java API. Below are the CDC application and the Ignite node integrated via WAL archive segments: When CDC is enabled, the Ignite server node creates a hard link to each WAL archive segment in the special db/cdc/{consistency_id} directory. The ignite-cdc.sh application can be runruns on a different JVM and processes newly archived WAL segments. When the segment is fully processed by ignite-cdc.sh, it is removed. The actual disk space is free when both links (archive and CDC) are removed. State of consumption is a pointer to the last processed event. A consumer can tell ignite-cdc.sh to save the consumption state. On startup event processing will be continued from the last saved state. See implementation details here. Index Query API The Apache Ignite now provides Index Query API for existing indexes. Index queries work over distributed indexes and retrieve cache entries that match the specified query. It will help in some cases, where: SQL is not applicable by the design of user application; IndexScan is preferable to ScanQuery for performance reasons. Example of query: // Find the persons who work in Organization 1 and have salary more than 1,000. QueryCursor&lt;Cache.Entry&lt;Integer, Person&gt;&gt; cursor = cache.query( new IndexQuery&lt;Integer, Person&gt;(Person.class, &quot;ORG_SALARY_IDX&quot;) .setCriteria(eq(&quot;orgId&quot;, 1), gt(&quot;salary&quot;, 1000)) ); See more details here. Snapshots Previous versions can perform snapshot restore in the same cluster topology only. The new version provides the ability to restore snapshots on different cluster topologies. Moreover, added support of encrypted caches. Distributed Environment Tests The new testing framework was implemented. The main goal is to have a large enough set of integration tests that cover most of the typical cluster usage scenarios. Features: Ignite nodes can be started/stopped on a Docker or a real cluster with any custom configuration; Any Apache Ignite version is supported (released or compiled from sources); Apache Ignite forks are also supported &laquo;out of the box&raquo;; Any other application execution is also possible, e.g. we implemented starters for Spark and Zookeeper; The cluster can be managed using the control.sh, we made this a part of the test API; Custom Java applications can be executed remotely with/without a built-in Ignite node or a Thin client; Any ssh command can be executed remotely, and the result will be available locally (at the python test); A network can be broken by editing iptables to check communication issues; Tests can be executed in parallel when the cluster size is bigger than tests requirements. Framework based on Ducktape library from Kafka team, that&#39;s why we called it Ducktests. Migration modules to the Apache Ignite Extensions There is activity on the migration of frameworks to extensions: GCE, AWS, Azure modules were migrated to gce, aws, azure extensions. CacheSpringStoreSessionListener was migrated to the spring-tx extension. TcpDiscoveryZookeeperIpFinder was migrated to the zookeeper-ip-finder extension. The binaries archive now weighs 10 percent less. Anything else? See the release notes to learn about all of the new features and bug fixes. Reach out to us on the community user list for more questions, details, and feedback. Sincerely yours, Ignite contributors and committers" />
<meta property="og:description" content="As of January 14, 2022, Apache Ignite 2.12 has been released. You can directly check the full list of resolved Important JIRA tasks but here let&rsquo;s briefly overview some valuable improvements. Vulnerability Updates The Apache Ignite versions lower than 2.11.1 are vulnerable to CVE-2021-44832 which is related to the ignite-log4j2 module usage. The release also fixes 10+ CVE&rsquo;s of various modules. See release notes for more details. Change Data Capture Change Data Capture (CDC) is a data processing pattern used to asynchronously receive entries that have been changed on the local node so that action can be taken using the changed entry. Below are some of the CDC use cases: Streaming changes in Warehouse; Updating search index; Calculating statistics (streaming queries); Auditing logs; Async interaction with external systems: Moderation, business process invocation, etc. Ignite implements CDC with the ignite-cdc.sh application and Java API. Below are the CDC application and the Ignite node integrated via WAL archive segments: When CDC is enabled, the Ignite server node creates a hard link to each WAL archive segment in the special db/cdc/{consistency_id} directory. The ignite-cdc.sh application can be runruns on a different JVM and processes newly archived WAL segments. When the segment is fully processed by ignite-cdc.sh, it is removed. The actual disk space is free when both links (archive and CDC) are removed. State of consumption is a pointer to the last processed event. A consumer can tell ignite-cdc.sh to save the consumption state. On startup event processing will be continued from the last saved state. See implementation details here. Index Query API The Apache Ignite now provides Index Query API for existing indexes. Index queries work over distributed indexes and retrieve cache entries that match the specified query. It will help in some cases, where: SQL is not applicable by the design of user application; IndexScan is preferable to ScanQuery for performance reasons. Example of query: // Find the persons who work in Organization 1 and have salary more than 1,000. QueryCursor&lt;Cache.Entry&lt;Integer, Person&gt;&gt; cursor = cache.query( new IndexQuery&lt;Integer, Person&gt;(Person.class, &quot;ORG_SALARY_IDX&quot;) .setCriteria(eq(&quot;orgId&quot;, 1), gt(&quot;salary&quot;, 1000)) ); See more details here. Snapshots Previous versions can perform snapshot restore in the same cluster topology only. The new version provides the ability to restore snapshots on different cluster topologies. Moreover, added support of encrypted caches. Distributed Environment Tests The new testing framework was implemented. The main goal is to have a large enough set of integration tests that cover most of the typical cluster usage scenarios. Features: Ignite nodes can be started/stopped on a Docker or a real cluster with any custom configuration; Any Apache Ignite version is supported (released or compiled from sources); Apache Ignite forks are also supported &laquo;out of the box&raquo;; Any other application execution is also possible, e.g. we implemented starters for Spark and Zookeeper; The cluster can be managed using the control.sh, we made this a part of the test API; Custom Java applications can be executed remotely with/without a built-in Ignite node or a Thin client; Any ssh command can be executed remotely, and the result will be available locally (at the python test); A network can be broken by editing iptables to check communication issues; Tests can be executed in parallel when the cluster size is bigger than tests requirements. Framework based on Ducktape library from Kafka team, that&#39;s why we called it Ducktests. Migration modules to the Apache Ignite Extensions There is activity on the migration of frameworks to extensions: GCE, AWS, Azure modules were migrated to gce, aws, azure extensions. CacheSpringStoreSessionListener was migrated to the spring-tx extension. TcpDiscoveryZookeeperIpFinder was migrated to the zookeeper-ip-finder extension. The binaries archive now weighs 10 percent less. Anything else? See the release notes to learn about all of the new features and bug fixes. Reach out to us on the community user list for more questions, details, and feedback. Sincerely yours, Ignite contributors and committers" />
<link rel="canonical" href="http://localhost:4000/ignite/entry/apache-ignite-2-12-0" />
<meta property="og:url" content="http://localhost:4000/ignite/entry/apache-ignite-2-12-0" />
<meta property="og:site_name" content="Blogs Archive" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-17T13:46:58-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Apache Ignite 2.12.0: CDC, Index Query API, Vulnerabilities Fixes" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-17T13:46:58-05:00","datePublished":"2022-01-17T13:46:58-05:00","description":"As of January 14, 2022, Apache Ignite 2.12 has been released. You can directly check the full list of resolved Important JIRA tasks but here let&rsquo;s briefly overview some valuable improvements. Vulnerability Updates The Apache Ignite versions lower than 2.11.1 are vulnerable to CVE-2021-44832 which is related to the ignite-log4j2 module usage. The release also fixes 10+ CVE&rsquo;s of various modules. See release notes for more details. Change Data Capture Change Data Capture (CDC) is a data processing pattern used to asynchronously receive entries that have been changed on the local node so that action can be taken using the changed entry. Below are some of the CDC use cases: Streaming changes in Warehouse; Updating search index; Calculating statistics (streaming queries); Auditing logs; Async interaction with external systems: Moderation, business process invocation, etc. Ignite implements CDC with the ignite-cdc.sh application and Java API. Below are the CDC application and the Ignite node integrated via WAL archive segments: When CDC is enabled, the Ignite server node creates a hard link to each WAL archive segment in the special db/cdc/{consistency_id} directory. The ignite-cdc.sh application can be runruns on a different JVM and processes newly archived WAL segments. When the segment is fully processed by ignite-cdc.sh, it is removed. The actual disk space is free when both links (archive and CDC) are removed. State of consumption is a pointer to the last processed event. A consumer can tell ignite-cdc.sh to save the consumption state. On startup event processing will be continued from the last saved state. See implementation details here. Index Query API The Apache Ignite now provides Index Query API for existing indexes. Index queries work over distributed indexes and retrieve cache entries that match the specified query. It will help in some cases, where: SQL is not applicable by the design of user application; IndexScan is preferable to ScanQuery for performance reasons. Example of query: // Find the persons who work in Organization 1 and have salary more than 1,000. QueryCursor&lt;Cache.Entry&lt;Integer, Person&gt;&gt; cursor = cache.query( new IndexQuery&lt;Integer, Person&gt;(Person.class, &quot;ORG_SALARY_IDX&quot;) .setCriteria(eq(&quot;orgId&quot;, 1), gt(&quot;salary&quot;, 1000)) ); See more details here. Snapshots Previous versions can perform snapshot restore in the same cluster topology only. The new version provides the ability to restore snapshots on different cluster topologies. Moreover, added support of encrypted caches. Distributed Environment Tests The new testing framework was implemented. The main goal is to have a large enough set of integration tests that cover most of the typical cluster usage scenarios. Features: Ignite nodes can be started/stopped on a Docker or a real cluster with any custom configuration; Any Apache Ignite version is supported (released or compiled from sources); Apache Ignite forks are also supported &laquo;out of the box&raquo;; Any other application execution is also possible, e.g. we implemented starters for Spark and Zookeeper; The cluster can be managed using the control.sh, we made this a part of the test API; Custom Java applications can be executed remotely with/without a built-in Ignite node or a Thin client; Any ssh command can be executed remotely, and the result will be available locally (at the python test); A network can be broken by editing iptables to check communication issues; Tests can be executed in parallel when the cluster size is bigger than tests requirements. Framework based on Ducktape library from Kafka team, that&#39;s why we called it Ducktests. Migration modules to the Apache Ignite Extensions There is activity on the migration of frameworks to extensions: GCE, AWS, Azure modules were migrated to gce, aws, azure extensions. CacheSpringStoreSessionListener was migrated to the spring-tx extension. TcpDiscoveryZookeeperIpFinder was migrated to the zookeeper-ip-finder extension. The binaries archive now weighs 10 percent less. Anything else? See the release notes to learn about all of the new features and bug fixes. Reach out to us on the community user list for more questions, details, and feedback. Sincerely yours, Ignite contributors and committers","headline":"Apache Ignite 2.12.0: CDC, Index Query API, Vulnerabilities Fixes","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/ignite/entry/apache-ignite-2-12-0"},"url":"http://localhost:4000/ignite/entry/apache-ignite-2-12-0"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Blogs Archive" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blogs Archive</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Apache Ignite 2.12.0: CDC, Index Query API, Vulnerabilities Fixes</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-01-17T13:46:58-05:00" itemprop="datePublished">Jan 17, 2022
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{"display_name"=>"Nikita Amelchev", "login"=>"namelchev", "email"=>"namelchev@apache.org"}</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>As of January 14, 2022, <a href="https://ignite.apache.org/">Apache Ignite</a> 2.12 has been released. You can directly check the full list of resolved <a href="https://s.apache.org/0zyi2">Important JIRA tasks</a> but here let&rsquo;s briefly overview some valuable improvements.</p>
<h3 id="vulnerability-updates">Vulnerability Updates</h3>
<p>The Apache Ignite versions lower than 2.11.1 are vulnerable to <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-44832">CVE-2021-44832</a> which is related to the <code>ignite-log4j2</code> module usage.</p>
<p>The release also fixes 10+ CVE&rsquo;s of various modules. See <a href="https://ignite.apache.org/releases/2.12.0/release_notes.html">release notes</a> for more details.</p>
<h3 id="change-data-capture">Change Data Capture</h3>
<p>Change Data Capture (<a href="https://en.wikipedia.org/wiki/Change_data_capture">CDC</a>) is a data processing pattern used to asynchronously receive entries that have been changed on the local node so that action can be taken using the changed entry.</p>
<p>Below are some of the CDC use cases:</p>
<ul>
<li>Streaming changes in Warehouse;</li>
<li>Updating search index;</li>
<li>Calculating statistics (streaming queries);</li>
<li>Auditing logs;</li>
<li>Async interaction with external systems: Moderation, business process invocation, etc.</li>
</ul>
<p>Ignite implements CDC with the <code>ignite-cdc.sh</code> application and <a href="https://github.com/apache/ignite/blob/master/modules/core/src/main/java/org/apache/ignite/cdc/CdcConsumer.java#L56">Java API</a>.</p>
<p>Below are the CDC application and the Ignite node integrated via <a href="https://ignite.apache.org/docs/2.12.0/persistence/native-persistence#write-ahead-log">WAL archive segments</a>:</p>
<p><img src="https://blogs.apache.org/ignite/mediaresource/c5574c7d-2a24-4def-b1c4-b2343ed98397" alt="Apache Ignite CDC design" style="display: block;margin-left: auto; margin-right: auto; width: 30%;"></p>
<p>When CDC is enabled, the Ignite server node creates a hard link to each WAL archive segment in the special <code>db/cdc/{consistency_id}</code> directory. The <code>ignite-cdc.sh</code> application can be runruns on a different JVM and processes newly archived WAL segments. When the segment is fully processed by <code>ignite-cdc.sh</code>, it is removed. The actual disk space is free when both links (archive and CDC) are removed.</p>
<p>State of consumption is a pointer to the last processed event. A consumer can tell <code>ignite-cdc.sh</code> to save the consumption state. On startup event processing will be continued from the last saved state.</p>
<p>See implementation details <a href="https://ignite.apache.org/docs/2.12.0/persistence/change-data-capture">here</a>.</p>
<h3 id="index-query-api">Index Query API</h3>
<p>The Apache Ignite now provides Index Query API for existing indexes. Index queries work over distributed indexes and retrieve cache entries that match the specified query.</p>
<p>It will help in some cases, where:</p>
<ul>
<li>SQL is not applicable by the design of user application;</li>
<li><code>IndexScan</code> is preferable to <code>ScanQuery</code> for performance reasons.</li>
</ul>
<p>Example of query:</p>
<pre><code class="lang-java"><span class="hljs-comment">// Find the persons who work in Organization 1 and have salary more than 1,000.</span>
QueryCursor<<span class="hljs-keyword">Cache</span>.Entry<<span class="hljs-built_in">Integer</span>, Person>> cursor = <span class="hljs-keyword">cache</span>.query(
    <span class="hljs-literal">new</span> IndexQuery<<span class="hljs-built_in">Integer</span>, Person>(Person.class, <span class="hljs-string">"ORG_SALARY_IDX"</span>)
        .setCriteria(<span class="hljs-literal">eq</span>(<span class="hljs-string">"orgId"</span>, <span class="hljs-number">1</span>), <span class="hljs-literal">gt</span>(<span class="hljs-string">"salary"</span>, <span class="hljs-number">1000</span>))
);
</code></pre>
<p>See more details <a href="https://ignite.apache.org/docs/latest/key-value-api/using-cache-queries#executing-index-queries">here</a>.</p>
<h3 id="snapshots">Snapshots</h3>
<p>Previous versions can perform snapshot restore in the same cluster topology only. The new version provides the ability to restore snapshots on different cluster topologies. Moreover, added support of encrypted caches.</p>
<h3 id="distributed-environment-tests">Distributed Environment Tests</h3>
<p>The <a href="https://cwiki.apache.org/confluence/display/IGNITE/IEP-56%3A+Distributed+environment+tests">new testing framework</a> was implemented. The main goal is to have a large enough set of integration tests that cover most of the typical cluster usage scenarios.</p>
<p>Features:</p>
<ul>
<li>Ignite nodes can be started/stopped on a Docker or a real cluster with any custom configuration;</li>
<li>Any Apache Ignite version is supported (released or compiled from sources);</li>
<li> Apache Ignite forks are also supported &laquo;out of the box&raquo;;</li>
<li>Any other application execution is also possible, e.g. we implemented starters for Spark and Zookeeper;</li>
<li>The cluster can be managed using the <code>control.sh</code>, we made this a part of the test API;</li>
<li>Custom Java applications can be executed remotely with/without a built-in Ignite node or a Thin client;</li>
<li>Any ssh command can be executed remotely, and the result will be available locally (at the python test);</li>
<li>A network can be broken by editing <code>iptables</code> to check communication issues;</li>
<li>Tests can be executed in parallel when the cluster size is bigger than tests requirements.</li>
</ul>
<p>Framework based on <a href="https://ducktape-docs.readthedocs.io/en/latest/index.html">Ducktape</a> library from Kafka team, that&#39;s why we called it Ducktests.</p>
<h3 id="migration-modules-to-the-apache-ignite-extensions">Migration modules to the Apache Ignite Extensions</h3>
<p>There is activity on the migration of frameworks to extensions:</p>
<ul>
<li>GCE, AWS, Azure modules were migrated to <code>gce</code>, <code>aws</code>, <code>azure</code> extensions.</li>
<li>CacheSpringStoreSessionListener was migrated to the <code>spring-tx</code> extension.</li>
<li>TcpDiscoveryZookeeperIpFinder was migrated to the <code>zookeeper-ip-finder</code> extension.</li>
</ul>
<p>The binaries archive now weighs 10 percent less.</p>
<h3 id="anything-else-">Anything else?</h3>
<p>See the <a href="https://ignite.apache.org/releases/2.12.0/release_notes.html">release notes</a> to learn about all of the new features and bug fixes.</p>
<p>Reach out to us on the community user list for more questions, details, and feedback.</p>
<p>Sincerely yours,</p>
<p>Ignite contributors and committers</p>

  </div><a class="u-url" href="/ignite/entry/apache-ignite-2-12-0" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blogs Archive</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blogs Archive</li><li><a class="u-email" href="mailto:issues@infra.apache.org">issues@infra.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is an archive of the Roller blogs that were previously hosted on blogs.apache.org</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
