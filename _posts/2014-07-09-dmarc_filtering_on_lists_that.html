---
layout: post
status: PUBLISHED
published: true
title: DMARC filtering on lists that munge messages
author:
  display_name: Joe
  login: joes
  email: joes@apache.org
author_login: joes
author_email: joes@apache.org
id: ace245c6-984a-4c75-82b6-ed28d3a05e67
date: '2014-07-09 17:28:06 -0400'
categories:
- General
tags:
- dmarc
- spam
- ezmlm
comments: []
permalink: infra/entry/dmarc_filtering_on_lists_that
---
<p>Since Yahoo! switched their DMARC policy in mid-April, we've seen an increase in undeliverable messages sent from our mail server for Yahoo! accounts subscribed to our lists. &nbsp; Roughly half of Apache's mailing lists do some form of message munging, whether it be Subject header prefixes, appended message trailers, or removed mime components. &nbsp;Such actions are incompatible with Y!'s policy for its users, which has meant more bounces and more frustration trying to maintain inclusive discussions with Y! users.</p>
<p>Since Y!'s actions are likely just the beginning of a trend towards strong DMARC policies aimed at eliminating forged emails, we've taken the extraordinary step of munging Y! user's From headers to append a spec-compliant .INVALID marker on their address, and dropping the DKIM-Signature: header for such messages. &nbsp;We are an ezmlm shop and maintain a heavily customized .ezmlmrc file, so carrying this action out was relatively straightforward with a 30-line perl header filter prepended to certain lines in the "editor" block of our .ezmlmrc file. &nbsp;The filter does a dynamic lookup of DMARC "p=reject" policies to inform its actions, so we are prepared for future adopters beyond the early ones like Yahoo!, AOL, Facebook, LinkedIn, and Twitter. &nbsp; Interested parties in our solution may visit <a href="http://www.sunstarsys.com/essays/mailing-lists">this page</a> for details and the Apache-licensed code.</p>
<p>Of course this filter only applies to half our lists- the remainder that do no munging are perfectly compatible with DMARC rejection policies without modification of our list software or configuration. &nbsp;Apache projects that prefer to avoid munging may file a Jira ticket with infrastructure to ask that their lists be set to "ezmlm-make -+ -TXF" options.</p></p>
